import { ExampleValueInterception } from './examples/ExampleValueInterception/ExampleValueInterception';

# FileField

## Пример использования

```ts
import React from 'react';
import { FileField, FileFieldProps } from '@gpn-design/uikit/FileField';
import { Button } from '@gpn-design/uikit/Button';

const App = () => {
  const [value, setValue] = useState<FileFieldProps['value']>(null);
  const handleChange: FileFieldProps['onChange'] = ({ value }) => setValue(value);

  return (
    <FileField onChange={handleChange} value={value} multiple>
      {({ onClick }) => <Button label="Выбрать файл" onClick={onClick} />}
    </FileField>
  );
};
```

## Свойства

| Свойство  | Тип                                                                      | По умолчанию | Описание                |
| --------- | ------------------------------------------------------------------------ | ------------ | ----------------------- |
| onChange  | `(object: { e: React.ChangeEvent; value: FileList , null }) => void;`    | -            | Cобытие выбора файла    |
| value     | `FileList , null`                                                        | -            | Выбранные файлы         |
| children  | `React.ComponentType<{ onClick: React.MouseEventHandler<HTMLElement> }>` | -            | Компонент представления |
| multiple? | `boolean`                                                                | -            | Множественный выбор     |

## Пример с перехватом `value`

Вы всегда можете вмешаться в возвращаемое значение из `onChange` и записать, нужное вам, значение в `value` компонента

```tsx
import React, { useState } from 'react';

import { FileField, FileFieldProps } from '@gpn-design/uikit/FileField';
import { Button } from '@gpn-design/uikit/Button';
import { Text } from '@gpn-design/uikit/Text';

function renderFiles(value: FileFieldProps['value']) {
  if (value) {
    const render = [];
    for (let i = 0; i < value.length; i++) {
      render[i] = <li key={`${value[i].name}-${i}`}>{value[i].name}</li>;
    }
    return <ul>{render}</ul>;
  }
  return null;
}

export function ExampleValueInterception() {
  const [value, setValue] = useState<FileFieldProps['value']>(null);

  const handleChange: FileFieldProps['onChange'] = ({ value }) => {
    const dataTransfer = new DataTransfer();

    if (value) {
      for (let file of Array.from(value)) {
        if (dataTransfer.files.length < 2) {
          dataTransfer.items.add(file);
        }
      }
    }

    setValue(dataTransfer.files);
  };
  const handleDelete = () => setValue(null);

  return (
    <>
      <Text size="xs">Возможно прикрепить не больше 2х файлов</Text>
      <FileField onChange={handleChange} value={value} multiple>
        {({ onClick }) => <Button label="Выбрать файлы" onClick={onClick} />}
      </FileField>
      {renderFiles(value)}
      {value && value.length > 0 && <Button label="Удалить файлы" onClick={handleDelete} />}
    </>
  );
}
```

<ExampleValueInterception />
