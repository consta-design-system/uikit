import { MdxMenu, MdxInformer, MdxTabs } from '@consta/stand';
import { SpoilerExampleLabel } from './examples/SpoilerExampleLabel/SpoilerExampleLabel';
import { SpoilerExampleIcon } from './examples/SpoilerExampleIcon/SpoilerExampleIcon';
import { SpoilerExampleMode } from './examples/SpoilerExampleMode/SpoilerExampleMode';
import { SpoilerExampleSize } from './examples/SpoilerExampleSize/SpoilerExampleSize';
import { SpoilerExampleAlign } from './examples/SpoilerExampleAlign/SpoilerExampleAlign';
import { SpoilerExampleHiddenButton } from './examples/SpoilerExampleHiddenButton/SpoilerExampleHiddenButton';

<MdxMenu>

- [Обзор](#обзор)
- [Импорт](#импорт)
- [Свойства](#свойства)
- [Содержимое](#содержимое)
  - [Варианты отображения](#варианты-отображения)
- [Внешний вид](#внешний-вид)
  - [Размер](#размер)
- [Кнопка](#кнопка)
  - [Лейбл](#лейбл)
  - [Иконка](#иконка)
  - [Выравнивание кнопки](#выравнивание-кнопки)
  - [Отступ кнопки](#отступ-кнопки)
- [Состояние](#состояние)

</MdxMenu>

## Обзор

Компонент `Spoiler` используется для скрытия части контента с возможностью его раскрытия по клику на кнопку. Поддерживает три варианта работы:

- Обрезка контента по высоте с помощью свойства `maxHeight`.
- Обрезка контента по количеству строк с помощью свойства `lineClamp`.
- Переключение между заранее подготовленным текстом (`preview`) и полным содержимым (`content`).

<MdxInformer status="normal">

Кнопка отображается, только если высота или количество строк обрезанного текста меньше, чем у полного текста. Это правило работает для всех модификаций.

</MdxInformer>

## Импорт

```tsx
import { Spoiler } from '@consta/uikit/Spoiler';
```

## Свойства

| Свойство                               | Тип                                                                                                                 | По умолчанию        | Описание                                                  |
| -------------------------------------- | ------------------------------------------------------------------------------------------------------------------- | ------------------- | --------------------------------------------------------- |
| [`children?`](#варианты-отображения)   | `React.ReactNode`                                                                                                   | -                   | Контент компонента при вариации с размытием               |
| [`content?`](#варианты-отображения)    | `React.ReactNode`                                                                                                   | -                   | Полный контент в компоненте                               |
| [`preview?`](#варианты-отображения)    | `React.ReactNode`                                                                                                   | -                   | Превью полного текста                                     |
| [`maxHeight?`](#варианты-отображения)  | `number`                                                                                                            | -                   | Высота контейнера, если контент скрыт                     |
| [`lineClamp?`](#варианты-отображения)  | `number`                                                                                                            | -                   | Количество строк, если контент скрыт                      |
| [`size?`](#размер)                     | `'xs' \| 's' \| 'm' \| 'l'`                                                                                         | `'m'`               | Размер компонента                                         |
| [`buttonAlign?`](#выравнивание-кнопки) | `'left' \| 'center' \| 'right'`                                                                                     | `'left'`            | Выравнивание кнопки                                       |
| [`buttonIndent?`](#отступ-кнопки)      | `'0' \| 'auto' \| '3xs' \| '2xs' \| 'xs' \| 's' \| 'm' \| 'l' \| 'xl' \| '2xl' \| '3xl' \| '4xl' \| '5xl' \| '6xl'` | -                   | Отступ кнопки от контента, зависит от `size` по умолчанию |
| [`moreLabel?`](#лейбл)                 | `string`                                                                                                            | `'Показать больше'` | Текст кнопки для раскрытия контента                       |
| [`lessLabel?`](#лейбл)                 | `string`                                                                                                            | `'Показать меньше'` | Текст кнопки для скрытия контента                         |
| [`moreIcon?`](#иконка)                 | `IconComponent`                                                                                                     | `IconArrowDown`     | Иконка кнопки для раскрытия контента                      |
| [`lessIcon?`](#иконка)                 | `IconComponent`                                                                                                     | -                   | Иконка кнопки для скрытия контента                        |
| [`opened?`](#состояние)                | `boolean`                                                                                                           | `false`             | Открыт ли компонент                                       |
| [`onOpenButtonClick?`](#состояние)     | `(open: boolean, event: React.MouseEvent) => void`                                                                  | -                   | Обработчик клика по кнопке                                |
| `className?`                           | `string`                                                                                                            | -                   | Дополнительные CSS-классы                                 |
| `as?`                                  | `React.ElementType`                                                                                                 | `div`               | HTML-тег для кнопки                                       |
| `ref?`                                 | `React.Ref<HTMLElement>`                                                                                            | -                   | Ссылка на DOM-элемент                                     |

## Содержимое

### Варианты отображения

Компонент `Spoiler` поддерживает три модификации:

1. **Обрезка по высоте** (`maxHeight`): ограничивает высоту контейнера, скрывая часть контента. Требуется указать `maxHeight` и `children`.

2. **Обрезка по строкам** (`lineClamp`): ограничивает количество отображаемых строк. Требуется указать `lineClamp` и `children`.

3. **Переключение текста** (`preview` и `content`): показывает краткий текст (`preview`) с возможностью переключения на полный (`content`).

<MdxTabs>

<SpoilerExampleMode />

```tsx
<>
  <Spoiler maxHeight={96}>
    Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил,
    что он у себя в постели превратился в страшное насекомое. Лежа на твердой
    спине, он видел, стоило ему приподнять голову, свой коричневый, выпуклый,
    разделенный дугообразными чешуйками живот, на верхушке которого еле
    держалось готовое вот-вот окончательно сползти одеяло. Его многочисленные,
    убого тонкие по сравнению с остальным телом ножки беспомощно копошились у
    него перед глазами. «Что со мной случилось?» – подумал он.
  </Spoiler>
  <Spoiler lineClamp={3}>
    Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил,
    что он у себя в постели превратился в страшное насекомое. Лежа на твердой
    спине, он видел, стоило ему приподнять голову, свой коричневый, выпуклый,
    разделенный дугообразными чешуйками живот, на верхушке которого еле
    держалось готовое вот-вот окончательно сползти одеяло. Его многочисленные,
    убого тонкие по сравнению с остальным телом ножки беспомощно копошились у
    него перед глазами. «Что со мной случилось?» – подумал он.
  </Spoiler>
  <Spoiler
    content="Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил, что он у себя в постели превратился в страшное насекомое. Лежа на твердой спине, он видел, стоило ему приподнять голову, свой коричневый, выпуклый, разделенный дугообразными чешуйками живот, на верхушке которого еле держалось готовое вот-вот окончательно сползти одеяло. Его многочисленные, убого тонкие по сравнению с остальным телом ножки беспомощно копошились у него перед глазами. «Что со мной случилось?» – подумал он."
    preview="Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил, что он у себя в постели превратился в страшное насекомое. Лежа на твердой спине, он видел, стоило ему приподнять..."
  />
</>
```

</MdxTabs>

## Внешний вид

### Размер

Свойство `size` задаёт размер компонента. Доступные значения: `'xs'`, `'s'`, `'m'`, `'l'`. По умолчанию: `'m'`. Влияет на размер текста и кнопки.

<MdxTabs>

<SpoilerExampleSize />

```tsx
<>
  <Spoiler size="xs" lineClamp={3}>
    Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил,
    что он у себя в постели превратился в страшное насекомое. Лежа на твердой
    спине, он видел, стоило ему приподнять голову, свой коричневый, выпуклый,
    разделенный дугообразными чешуйками живот, на верхушке которого еле
    держалось готовое вот-вот окончательно сползти одеяло. Его многочисленные,
    убого тонкие по сравнению с остальным телом ножки беспомощно копошились у
    него перед глазами. «Что со мной случилось?» – подумал он.
  </Spoiler>
  <Spoiler size="s" lineClamp={3}>
    Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил,
    что он у себя в постели превратился в страшное насекомое. Лежа на твердой
    спине, он видел, стоило ему приподнять голову, свой коричневый, выпуклый,
    разделенный дугообразными чешуйками живот, на верхушке которого еле
    держалось готовое вот-вот окончательно сползти одеяло. Его многочисленные,
    убого тонкие по сравнению с остальным телом ножки беспомощно копошились у
    него перед глазами. «Что со мной случилось?» – подумал он.
  </Spoiler>
  <Spoiler size="m" lineClamp={3}>
    Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил,
    что он у себя в постели превратился в страшное насекомое. Лежа на твердой
    спине, он видел, стоило ему приподнять голову, свой коричневый, выпуклый,
    разделенный дугообразными чешуйками живот, на верхушке которого еле
    держалось готовое вот-вот окончательно сползти одеяло. Его многочисленные,
    убого тонкие по сравнению с остальным телом ножки беспомощно копошились у
    него перед глазами. «Что со мной случилось?» – подумал он.
  </Spoiler>
  <Spoiler size="l" lineClamp={3}>
    Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил,
    что он у себя в постели превратился в страшное насекомое. Лежа на твердой
    спине, он видел, стоило ему приподнять голову, свой коричневый, выпуклый,
    разделенный дугообразными чешуйками живот, на верхушке которого еле
    держалось готовое вот-вот окончательно сползти одеяло. Его многочисленные,
    убого тонкие по сравнению с остальным телом ножки беспомощно копошились у
    него перед глазами. «Что со мной случилось?» – подумал он.
  </Spoiler>
</>
```

</MdxTabs>

## Кнопка

### Лейбл

Свойства `moreLabel` и `lessLabel` задают текст кнопки для раскрытия и скрытия контента соответственно. По умолчанию: `moreLabel="Показать больше"`, `lessLabel="Показать меньше"`.

<MdxTabs>

<SpoilerExampleLabel />

```tsx
<Spoiler lessLabel="Скрыть" moreLabel="Показать" lineClamp={3}>
  Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил, что
  он у себя в постели превратился в страшное насекомое. Лежа на твердой спине,
  он видел, стоило ему приподнять голову, свой коричневый, выпуклый, разделенный
  дугообразными чешуйками живот, на верхушке которого еле держалось готовое
  вот-вот окончательно сползти одеяло. Его многочисленные, убого тонкие по
  сравнению с остальным телом ножки беспомощно копошились у него перед глазами.
  «Что со мной случилось?» – подумал он.
</Spoiler>
```

</MdxTabs>

### Иконка

Свойства `moreIcon` и `lessIcon` задают иконки для кнопок раскрытия и скрытия контента. По умолчанию: `moreIcon=IconArrowDown`, `lessIcon` не задан. Для иконок используйте компоненты из [библиотеки иконок Consta](https://consta.design/libs/icons).

<MdxTabs>

<SpoilerExampleIcon />

```tsx
<Spoiler lessIcon={IconRemove} moreIcon={IconQuestion} lineClamp={3}>
  Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил, что
  он у себя в постели превратился в страшное насекомое. Лежа на твердой спине,
  он видел, стоило ему приподнять голову, свой коричневый, выпуклый, разделенный
  дугообразными чешуйками живот, на верхушке которого еле держалось готовое
  вот-вот окончательно сползти одеяло. Его многочисленные, убого тонкие по
  сравнению с остальным телом ножки беспомощно копошились у него перед глазами.
  «Что со мной случилось?» – подумал он.
</Spoiler>
```

</MdxTabs>

### Выравнивание кнопки

Свойство `buttonAlign` задаёт выравнивание кнопки. Доступные значения: `'left'`, `'center'`, `'right'`. По умолчанию: `'left'`.

<MdxTabs>

<SpoilerExampleAlign />

```tsx
<>
  <Spoiler buttonAlign="left" lineClamp={3}>
    Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил,
    что он у себя в постели превратился в страшное насекомое. Лежа на твердой
    спине, он видел, стоило ему приподнять голову, свой коричневый, выпуклый,
    разделенный дугообразными чешуйками живот, на верхушке которого еле
    держалось готовое вот-вот окончательно сползти одеяло. Его многочисленные,
    убого тонкие по сравнению с остальным телом ножки беспомощно копошились у
    него перед глазами. «Что со мной случилось?» – подумал он.
  </Spoiler>
  <Spoiler buttonAlign="center" lineClamp={3}>
    Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил,
    что он у себя в постели превратился в страшное насекомое. Лежа на твердой
    спине, он видел, стоило ему приподнять голову, свой коричневый, выпуклый,
    разделенный дугообразными чешуйками живот, на верхушке которого еле
    держалось готовое вот-вот окончательно сползти одеяло. Его многочисленные,
    убого тонкие по сравнению с остальным телом ножки беспомощно копошились у
    него перед глазами. «Что со мной случилось?» – подумал он.
  </Spoiler>
  <Spoiler buttonAlign="right" lineClamp={3}>
    Проснувшись однажды утром после беспокойного сна, Грегор Белый обнаружил,
    что он у себя в постели превратился в страшное насекомое. Лежа на твердой
    спине, он видел, стоило ему приподнять голову, свой коричневый, выпуклый,
    разделенный дугообразными чешуйками живот, на верхушке которого еле
    держалось готовое вот-вот окончательно сползти одеяло. Его многочисленные,
    убого тонкие по сравнению с остальным телом ножки беспомощно копошились у
    него перед глазами. «Что со мной случилось?» – подумал он.
  </Spoiler>
</>
```

</MdxTabs>

### Отступ кнопки

Свойство `buttonIndent` задаёт отступ кнопки от контента. Доступные значения: `'0'`, `'auto'`, `'3xs'`, `'2xs'`, `'xs'`, `'s'`, `'m'`, `'l'`, `'xl'`, `'2xl'`, `'3xl'`, `'4xl'`, `'5xl'`, `'6xl'`. По умолчанию зависит от значения свойства `size`.

## Состояние

Свойство `opened` управляет состоянием компонента (открыт или закрыт). Возможные значения: `true` (открыт), `false` (закрыт). По умолчанию: `false`.  
Свойство `onOpenButtonClick` позволяет задать обработчик клика по кнопке, принимающий текущее состояние (`open`) и событие (`event`).

<MdxTabs>

<SpoilerExampleHiddenButton />

```tsx
export const SpoilerExampleHiddenButton = () => {
  const [lineClamp, setLineClamp] = useState(4);
  const onChange: TextFieldPropOnChange = useCallback(
    ({ value }) => setLineClamp(Number(value)),
    [],
  );
  return (
    <Example col={1}>
      <TextField
        type="number"
        label="Максимальное количество строк"
        value={lineClamp.toString()}
        onChange={onChange}
      />
      <Spoiler lineClamp={lineClamp}>
        Проснувшись однажды утром после беспокойного сна, Грегор Белый
        обнаружил, что он у себя в постели превратился в страшное насекомое.
        Лежа на твердой спине, он видел, стоило ему приподнять голову, свой
        коричневый, выпуклый, разделенный дугообразными чешуйками живот, на
        верхушке которого еле держалось готовое вот-вот окончательно сползти
        одеяло. Его многочисленные, убого тонкие по сравнению с остальным телом
        ножки беспомощно копошились у него перед глазами. «Что со мной
        случилось?» – подумал он.
      </Spoiler>
      <Spoiler lineClamp={lineClamp}>
        Проснувшись однажды утром после беспокойного сна, Грегор Белый
        обнаружил, что он у себя в постели превратился в страшное насекомое.
        Лежа на твердой спине, он видел, стоило ему приподнять голову, свой
        коричневый, выпуклый, разделенный дугообразными чешуйками живот.
      </Spoiler>
    </Example>
  );
};
```

</MdxTabs>
