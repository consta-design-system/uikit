import { MdxMenu, MdxTabs, MdxInformer } from '@consta/stand';
import { AttachmentExampleLoading } from './examples/AttachmentExampleLoading/AttachmentExampleLoading';
import { AttachmentExampleError } from './examples/AttachmentExampleError/AttachmentExampleError';
import { AttachmentExampleActions } from './examples/AttachmentExampleActions/AttachmentExampleActions';
import { AttachmentExampleDescription } from './examples/AttachmentExampleDescription/AttachmentExampleDescription';
import { AttachmentExampleIcon } from './examples/AttachmentExampleIcon/AttachmentExampleIcon';
import { AttachmentExampleName } from './examples/AttachmentExampleName/AttachmentExampleName';
import { AttachmentExampleAs } from './examples/AttachmentExampleAs/AttachmentExampleAs';
import { AttachmentExampleSize } from './examples/AttachmentExampleSize/AttachmentExampleSize';
import { AttachmentExampleWithPictogram } from './examples/AttachmentExampleWithPictogram/AttachmentExampleWithPictogram';

```tsx
import { Attachment } from '@consta/uikit/Attachment';
```

<MdxMenu>

- [Импорт](#импорт)
- [Свойства](#свойства)
- [Размер](#размер)
- [Название](#название)
- [Описание](#описание)
- [Иконка](#иконка)
- [Загрузка файла](#загрузка-файла)
  - [Индикаторы загрузки](#индикаторы-загрузки)
  - [Ошибка при загрузке](#ошибка-при-загрузке)
- [Обработка событий](#обработка-событий)
  - [По клику на компонент](#по-клику-на-компонент)
  - [Действия по кнопкам](#действия-по-кнопкам)
- [Тег для компонента](#тег-для-компонента)

</MdxMenu>

## Импорт

```tsx
import { Attachment } from '@consta/uikit/Attachment';
```

## Свойства

```ts
export type AttachmentActions = {
  onClick: React.MouseEventHandler<HTMLButtonElement>;
  icon: IconComponent;
  title?: string;
  ref?: React.Ref<HTMLButtonElement>;
};
```

| Свойство                                  | Тип                                    | По умолчанию | Описание                                                         |
| ----------------------------------------- | -------------------------------------- | ------------ | ---------------------------------------------------------------- |
| [`size?`](#размер)                        | `'xs', 's', 'm'`                       | `'s'`        | Размер компонента                                                |
| [`fileName`](#название)                   | `string`                               | -            | Название файла                                                   |
| [`fileDescription`](#описание)            | `string`                               | -            | Описание файла                                                   |
| [`fileExtension`](#иконка)                | `string`                               | -            | Расширение иконки файла                                          |
| [`withPictogram`](#иконка)                | `boolean`                              | `true`       | Отображается ли пиктограмма файла                                |
| [`loading`](#загрузка-файла)              | `boolean`                              | -            | Состояние загрузки                                               |
| [`loadingProgress`](#индикаторы-загрузки) | `number`                               | -            | Степень загрузки файла в процентах                               |
| [`loadingText`](#индикаторы-загрузки)     | `string`                               | `'Loading'`  | Текст, который видно во время загрузки                           |
| [`errorText`](#ошибка-при-загрузке)       | `string`                               | -            | Текст ошибки при загрузке файла                                  |
| [`onClick`](#по-клику-на-компонент)       | `React.EventHandler<React.MouseEvent>` | -            | Событие для клика по всему компоненту                            |
| [`actions`](#по-клику-на-компонент)       | `AttachmentActions[]`                  | []           | Дополнительные действия                                          |
| [`withAction`](#обработка-событий)        | `boolean`                              | -            | Добавляет подсветку компонента по наведению                      |
| [`as`](#тег-для-компонента)               | `keyof JSX.IntrinsicElements`          | `'div'`      | HTML-тег, в виде которого этот компонент будет представлен в DOM |
| `className`                               | `string`                               | -            | Дополнительный CSS-класс                                         |
| `ref`                                     | `React.Ref<HTMLDivElement>`            | -            | Ссылка на корневой DOM-элемент этого компонента                  |

## Размер

Чтобы настроить размер, задайте свойство `size`. Возможные значения: `xs`, `s` и `m`. Значение по умолчанию – `s`.

<MdxTabs>

<AttachmentExampleSize />

```tsx
<Attachment
  size="xs"
  fileName="Инструкция по сборке марсохода"
  fileExtension="pdf"
  withPictogram
/>
<Attachment
  size="s"
  fileName="Инструкция по сборке марсохода"
  fileExtension="pdf"
  withPictogram
/>
<Attachment
  size="m"
  fileName="Инструкция по сборке марсохода"
  fileExtension="pdf"
  withPictogram
/>
```

</MdxTabs>

## Название

За название отвечает свойство `fileName`.

<MdxTabs>

<AttachmentExampleDescription />

```tsx
<Attachment
  className={cnAttachmentExampleList()}
  fileName="Фотография"
  fileExtension="jpg"
  withPictogram
  fileDescription="1,5 Mб 19.07.2020, 16:11"
/>

<Attachment
  className={cnAttachmentExampleList()}
  fileName="Скан паспорта"
  fileExtension="pdf"
  withPictogram
  fileDescription="1,5 Mб 19.07.2020, 16:12"
/>

<Attachment
  className={cnAttachmentExampleList()}
  fileName="Сопроводительное письмо"
  fileExtension="docx"
  withPictogram
  fileDescription="225 Mб 19.07.2020, 17:15"
/>
```

</MdxTabs>

## Описание

Чтобы указать описание файла, задайте свойство `fileDescription`. Обычно здесь удобно показывать размер файла и время загрузки.

<MdxTabs>

<AttachmentExampleName />

```tsx
<Attachment
  className={cnAttachmentExampleName()}
  fileName="Файл с нормальным описанием"
  fileExtension="jpg"
  withPictogram
  fileDescription="14 Мб 01.04.2020, 07:01"
/>

<Attachment
  className={cnAttachmentExampleName()}
  fileName="Файл с каким попало описанием"
  fileExtension="bzz"
  withPictogram
  /* cspell:disable-next-line */
  fileDescription="Крекс, пекс, фекс"
/>
```

</MdxTabs>

## Иконка

Чтобы отобразить пиктограмму, укажите значение свойства `withPictogram` в `true`.

<MdxTabs>

<AttachmentExampleWithPictogram />

```tsx
<Attachment
  withPictogram
  fileName="Файл"
  fileExtension="jpg"
  fileDescription="14 Мб 01.04.2020, 07:01"
/>
<Attachment
  withPictogram={false}
  fileName="Файл"
  fileExtension="jpg"
  fileDescription="14 Мб 01.04.2020, 07:01"
/>
```

</MdxTabs>

Иконка файла зависит от его расширения, за это отвечает свойство `fileExtension`. Если вы укажете расширение, которого нет в нашей галерее иконок, пользователь увидит иконку с вопросом.
[Посмотреть иконки для файлов](##LIBS.LIB/lib:icons)

<MdxTabs>

<AttachmentExampleIcon />

```tsx
<Attachment
  fileName="Картинка в JPG"
  fileExtension="jpg"
/>

<Attachment
  fileName="Картинка в непонятном формате BZZ"
  fileExtension="bzz"
/>
```

</MdxTabs>

Рядом с иконкой можно разместить информацию о файле.

## Загрузка файла

### Индикаторы загрузки

Чтобы отобразить загрузку файла, используйте свойство `loading`. Тогда вместо иконки файла пользователь увидит индикатор загрузки.

Свойство `loadingText` отвечает за текст, который можно показать во время загрузки файла. Значение по умолчанию — `Loading`.

`loadingProgress` позволяет показать прогресс загрузки файла в процентах.

<MdxTabs>

<AttachmentExampleLoading />

```tsx
<Attachment
  fileName="Инструкция по сборке марсохода"
  fileExtension="docx"
  withPictogram
  fileDescription="25,5 Mб 19.07.2020, 21:12"
  loadingText="Я ещё не загрузился, уже загружено"
  loading
  loadingProgress={70}
/>
```

</MdxTabs>

### Ошибка при загрузке

Если во время загрузки файла произошла ошибка, покажите, что случилось, с помощью свойства `errorText`.
Рекомендуем в тексте ошибки объяснить пользователю не только, что произошло, но ещё и почему так получилось и как это исправить.

<MdxTabs>

<AttachmentExampleError />

```tsx
<Attachment
  fileName="Марсианский закат"
  fileExtension="jpg"
  withPictogram
  errorText="Фотография не загрузилась"
/>
<Attachment
  fileName="Марсианский закат"
  fileExtension="jpg"
  withPictogram
  errorText="Файл слишком большой, максимум 100 ТБ"
/>
```

</MdxTabs>

## Обработка событий

### По клику на компонент

За обработку событий по клику на весь компонент отвечает свойство `onClick`.

```tsx
<Attachment
  fileName="my_tale_about_mars_variant_121_final"
  fileExtension="docx"
  withPictogram
  fileDescription="1,5 Mб 21.02.2051, 14:12"
  onClick={(e) => console.log(e)}
/>
```

### Действия по кнопкам

Используйте кнопки для выполнения дополнительных действий с файлом. Событие можно задать в свойстве `actions`.

<MdxInformer status="normal">

Не забудьте про [всплытие событий](https://learn.javascript.ru/event-bubbling).

</MdxInformer>

<MdxTabs>

<AttachmentExampleActions />

```tsx
<Attachment
  fileName="my_tale_about_mars_final_last_12"
  fileExtension="docx"
  withPictogram
  fileDescription="1,5 Mб 21.02.2020, 14:12"
  actions={[
    {
      onClick: (e) => e.stopPropagation(),
      title: 'Изменить',
      icon: IconEdit,
    },
    {
      onClick: (e) => e.stopPropagation(),
      title: 'Скрыть',
      icon: IconEyeClose,
    },
    {
      onClick: (e) => e.stopPropagation(),
      title: 'Удалить',
      icon: IconTrash,
    },
  ]}
/>
```

</MdxTabs>

## Тег для компонента

Свойство `as` отвечает за тег, в который `Attachment` оборачивается в HTML-документе. По умолчанию это `div`. Вы можете поменять этот тег, чтобы добавить компоненту свойства другого элемента. Например, сделайте его ссылкой.

<MdxTabs>

<AttachmentExampleAs />

```tsx
<Attachment
  as="a"
  href="https://www.youtube.com/watch?v=dAZKu_ojb14"
  fileName="Вести с марса"
  fileExtension="mov"
  withPictogram
  fileDescription="Нажми меня"
/>
```

</MdxTabs>
