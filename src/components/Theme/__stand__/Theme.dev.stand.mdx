import { MdxMenu, MdxInformer, MdxTabs } from '@consta/stand';
import { ThemeExampleColors } from './examples/ThemeExampleColors/ThemeExampleColors';
import { ThemeExampleRoot } from './examples/ThemeExampleRoot/ThemeExampleRoot';

Компонент `Theme` управляет стилями приложения, включая цвета, шрифты, размеры текста, отступы, тени и внешний вид контролов. Он позволяет задавать пресеты для настройки визуального оформления и переключения между темами.

<MdxMenu>

- [Обзор](#обзор)
- [Импорт](#импорт)
- [Свойства](#свойства)
- [Модификаторы](#модификаторы)
  - [Цвета](#цвета)
  - [Шрифты](#шрифты)
  - [Размеры текста](#размеры-текста)
  - [Отступы](#отступы)
  - [Внешний вид контролов](#внешний-вид-контролов)
  - [Тени](#тени)
- [Пресеты](#пресеты)
  - [Пресеты в Consta](#пресеты-в-consta)
  - [Цветовые схемы в пресете](#цветовые-схемы-в-пресете)
  - [Кастомный пресет](#кастомный-пресет)
- [Как использовать](#как-использовать)
  - [Для всего проекта](#для-всего-проекта)
  - [Для отдельного блока](#для-отдельного-блока)
  - [Переключение тем](#переключение-тем)
  - [Получение текущей темы](#получение-текущей-темы)
- [Пример использования](#пример-использования)

</MdxMenu>

## Обзор

Компонент `Theme` определяет визуальный стиль приложения через набор модификаторов, каждый из которых отвечает за определённую область оформления:

- [`_color`](#цвета) — цвета интерфейса.
- [`_font`](#шрифты) — шрифты.
- [`_size`](#размеры-текста) — размеры текста и межстрочные интервалы.
- [`_space`](#отступы) — отступы.
- [`_control`](#внешний-вид-контролов) — внешний вид и размеры контролов.
- [`_shadow`](#тени) — тени.

Каждый модификатор имеет значения, описанные в отдельных CSS-файлах, которые подключаются через пресеты. [Пресет](#пресеты) (`preset`) — это обязательное свойство компонента `Theme`, задающее комбинацию значений модификаторов.

Пример подключения темы:

```tsx
import { Theme, presetGpnDefault } from '@consta/uikit/Theme';

const App = () => <Theme preset={presetGpnDefault}>{/* Ваш код */}</Theme>;
```

## Импорт

```tsx
import {
  Theme,
  presetGpnDefault,
  presetGpnDark,
  presetGpnDisplay,
} from '@consta/uikit/Theme';
```

## Свойства

| Свойство             | Тип           | По умолчанию | Описание                                                     |
| -------------------- | ------------- | ------------ | ------------------------------------------------------------ |
| [`preset`](#пресеты) | `ThemePreset` | —            | Обязательный пресет, задающий комбинацию модификаторов темы. |

## Модификаторы

Модификаторы определяют визуальные аспекты темы. Каждый модификатор связан с CSS-файлом, содержащим стили для конкретного значения.

### Цвета

- **Модификатор**: `_color`
- **CSS-файлы**:
  - [Theme_color_gpnDefault.css](https://github.com/consta-design-system/uikit/blob/master/src/components/Theme/_color/Theme_color_gpnDefault.css)
  - [Theme_color_gpnDark.css](https://github.com/consta-design-system/uikit/blob/master/src/components/Theme/_color/Theme_color_gpnDark.css)
  - [Theme_color_gpnDisplay.css](https://github.com/consta-design-system/uikit/blob/master/src/components/Theme/_color/Theme_color_gpnDisplay.css)

#### Цветовые схемы в Consta

Consta предоставляет три цветовые схемы:

- `gpnDefault` — светлая (основная) тема.
- `gpnDark` — тёмная (инверсная) тема.
- `gpnDisplay` — акцентная (презентационная) тема.

<ThemeExampleColors />

Эти схемы реализованы в CSS-файлах:

```
_color/Theme_color_gpnDefault.css  # Светлая тема
_color/Theme_color_gpnDark.css     # Тёмная тема
_color/Theme_color_gpnDisplay.css  # Акцентная тема
```

#### Использование цветовых схем

- **Default и Dark**: Подходят для большинства интерфейсов с возможностью переключения между светлой и тёмной темами.
- **Display**: Используется для выделения элементов, например, для видеостен или мониторинга. Не рекомендуется для длительного взаимодействия.

#### Подключение цветовых схем

Для подключения цветовой схемы используйте соответствующий пресет:

```tsx
import {
  Theme,
  presetGpnDefault,
  presetGpnDark,
  presetGpnDisplay,
} from '@consta/uikit/Theme';

const App = () => (
  <>
    <Theme preset={presetGpnDefault}>Светлая тема</Theme>
    <Theme preset={presetGpnDark}>Тёмная тема</Theme>
    <Theme preset={presetGpnDisplay}>Акцентная тема</Theme>
  </>
);
```

#### Цвета в CSS

Цвета в теме вычисляются на основе базовых цветов с использованием HSLA. Базовые цвета задаются PostCSS-переменными:

```css
$color-base-base: #002033; /* Базовый цвет содержимого */
$color-base-essential: #fff; /* Базовый цвет поверхностей */
$color-base-project: #0071b2; /* Акцентный цвет */
$color-base-phantom: #004269; /* Тонирующий цвет */
$color-base-path: #0078d2; /* Цвет ссылок и контролов */
$color-base-system: #ced8de; /* Системный цвет */
$color-base-success: #22c38e; /* Цвет успеха */
$color-base-alert: #eb5757; /* Цвет ошибки */
$color-base-warning: #f38b00; /* Цвет предупреждения */
$color-base-caution: #f2c94c; /* Цвет осторожности */
$color-base-normal: #56b9f2; /* Нейтральный цвет */
```

Пример вычисления фоновых цветов:

```css
--color-bg-default: color($color-base-essential a(100%)); /* Основной фон */
--color-bg-secondary: color(
  $color-base-project s(-75) l(+59)
); /* Вторичный фон */
--color-bg-brand: color($color-base-project a(100%)); /* Брендированный фон */
```

[Подробнее на GitHub](https://github.com/consta-design-system/uikit/blob/master/src/components/Theme/_color/Theme_color_gpnDefault.css)

#### Новые цвета

Рекомендуется использовать существующие цвета Consta. Новые цвета добавляйте только для брендинга, специфичных статусов или графиков.

### Шрифты

- **Модификатор**: `_font`
- **CSS-файл**: [Theme_font_gpnDefault.css](https://github.com/consta-design-system/uikit/blob/master/src/components/Theme/_font/Theme_font_gpnDefault.css)

Основной шрифт — `Inter`, с резервными системными шрифтами:

```css
--font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Roboto', 'Oxygen', 'Ubuntu',
  'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
--font-mono: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;
font-family: var(--font-primary);
```

<MdxInformer status="success">

Убедитесь, что используемая насыщенность шрифта поддерживается. Браузер может имитировать отсутствующие начертания, что может повлиять на отображение.

</MdxInformer>

Подробности о насыщенности шрифта см. в компоненте [Text](##LIBS.LIB.STAND.TAB/lib:uikit/stand:components-text-stable/tab:dev/hash:насыщенность).

### Размеры текста

- **Модификатор**: `_size`
- **CSS-файл**: [Theme_size_gpnDefault.css](https://github.com/consta-design-system/uikit/blob/master/src/components/Theme/_size/Theme_size_gpnDefault.css)

Задаёт размеры текста, межстрочные интервалы и ширину шрифта:

```css
--size-text-2xs: 10px;
--size-text-xs: 12px;
--size-text-s: 14px;
--size-text-m: 16px;
--size-text-l: 18px;
--size-text-xl: 20px;
--size-text-2xl: 24px;
--size-text-3xl: 32px;
--size-text-4xl: 48px;
--size-text-5xl: 72px;
--size-text-6xl: 96px;

--line-height-text-2xs: 1em;
--line-height-text-xs: 1.2em;
--line-height-text-s: 1.4em;
--line-height-text-m: 1.5em;
--line-height-text-l: 1.6em;

--font-weight-text-thin: 100;
--font-weight-text-light: 300;
--font-weight-text-regular: normal;
--font-weight-text-semibold: 600;
--font-weight-text-bold: bold;
--font-weight-text-black: 900;
```

Размеры текста и межстрочные интервалы можно комбинировать произвольно.

### Отступы

- **Модификатор**: `_space`
- **CSS-файл**: [Theme_space_gpnDefault.css](https://github.com/consta-design-system/uikit/blob/master/src/components/Theme/_space/Theme_space_gpnDefault.css)

Отступы задаются с шагом 4px, за исключением `3xs` (2px) для компенсации графических элементов:

```css
--space-3xs: 2px;
--space-2xs: 4px;
--space-xs: 8px;
--space-s: 12px;
--space-m: 16px;
--space-l: 20px;
--space-xl: 24px;
--space-2xl: 32px;
--space-3xl: 40px;
--space-4xl: 48px;
--space-5xl: 72px;
--space-6xl: 96px;
```

Используйте переменные для отступов, чтобы избежать случайных значений.

### Внешний вид контролов

- **Модификатор**: `_control`
- **CSS-файл**: [Theme_control_gpnDefault.css](https://github.com/consta-design-system/uikit/blob/master/src/components/Theme/_control/Theme_control_gpnDefault.css)

Определяет размеры, внутренние отступы и текст контролов:

```css
--control-radius: 4px;
--control-border-width: 1px;
--control-height-l: var(--space-4xl);
--control-height-m: var(--space-3xl);
--control-height-s: var(--space-2xl);
--control-height-xs: var(--space-xl);
--control-box-size-m: var(--space-m);
--control-box-size-l: var(--space-l);
--control-space-l: var(--space-xl);
--control-space-m: var(--space-l);
--control-space-s: var(--space-m);
--control-space-xs: var(--space-s);
--control-text-size-l: var(--size-text-l);
--control-text-size-m: var(--size-text-m);
--control-text-size-s: var(--size-text-s);
--control-text-size-xs: var(--size-text-xs);
```

Значения наследуются из модификатора `_space`.

### Тени

- **Модификатор**: `_shadow`
- **CSS-файл**: [Theme_shadow_gpnDefault.css](https://github.com/consta-design-system/uikit/blob/master/src/components/Theme/_shadow/Theme_shadow_gpnDefault.css)

Задаёт тени для элементов:

```css
--shadow-group: 0 2px 2px rgba(0, 32, 51, 0.02), 0 2px 8px rgba(0, 32, 51, 0.16);
--shadow-layer: 0 4px 4px rgba(0, 32, 51, 0.04), 0 8px 24px rgba(0, 32, 51, 0.12);
--shadow-modal: 0 8px 8px rgba(0, 32, 51, 0.04), 0 12px 28px rgba(0, 32, 51, 0.12);
```

Подробности см. в [Figma](https://www.figma.com/file/vNZFtFH6w0IjD2Twi5OXXE/Consta-Default-Colors), вкладка **Default Shadows**.

## Пресеты

Пресет (`preset`) — это объект, определяющий, какие CSS-файлы используются для каждого модификатора.

### Пресеты в Consta

Consta предоставляет три пресета:

- `presetGpnDefault` — светлая тема.
- `presetGpnDark` — тёмная тема.
- `presetGpnDisplay` — акцентная тема.

Пример пресета `presetGpnDefault`:

```tsx
import '../Theme.css';
import '../_color/Theme_color_gpnDefault.css';
import '../_color/Theme_color_gpnDark.css';
import '../_control/Theme_control_gpnDefault.css';
import '../_font/Theme_font_gpnDefault.css';
import '../_size/Theme_size_gpnDefault.css';
import '../_space/Theme_space_gpnDefault.css';
import '../_shadow/Theme_shadow_gpnDefault.css';

export const presetGpnDefault: ThemePreset = {
  color: {
    primary: 'gpnDefault',
    accent: 'gpnDark',
    invert: 'gpnDark',
  },
  control: 'gpnDefault',
  font: 'gpnDefault',
  size: 'gpnDefault',
  space: 'gpnDefault',
  shadow: 'gpnDefault',
};
```

[Подробнее на GitHub](https://github.com/consta-design-system/uikit/blob/master/src/components/Theme/presets/presetGpnDefault.ts)

### Цветовые схемы в пресете

Модификатор `_color` поддерживает три схемы:

- `primary` — основная схема.
- `accent` — для выделения статусных компонентов ([Snackbar](##LIBS.LIB.STAND/lib:uikit/stand:components-snackbar-stable), [Informer](##LIBS.LIB.STAND/lib:uikit/stand:components-informer-stable), [Badge](##LIBS.LIB.STAND/lib:uikit/stand:components-badge-stable)).
- `invert` — для компонентов на другом информационном слое, например, [Tooltip](##LIBS.LIB.STAND/lib:uikit/stand:components-tooltip-stable).

### Кастомный пресет

Создайте собственный пресет, следуя структуре существующих пресетов. Подробности см. в [руководстве](##LIBS.LIB.STAND/lib:portal/stand:theme-createpreset).

## Как использовать

### Для всего проекта

Подключите `Theme` в корневом компоненте приложения:

```tsx
import { Theme, presetGpnDefault } from '@consta/uikit/Theme';

const App = () => <Theme preset={presetGpnDefault}>{/* Ваш код */}</Theme>;
```

### Для отдельного блока

Используйте вложенные компоненты `Theme` для отдельных блоков:

<MdxInformer status="normal">

Вложенные темы не изменяются при смене основной темы.

</MdxInformer>

```tsx
import { Theme, presetGpnDefault, presetGpnDark } from '@consta/uikit/Theme';

const App = () => (
  <Theme preset={presetGpnDefault}>
    {/* Основной контент */}
    <Theme preset={presetGpnDark}>{/* Блок с тёмной темой */}</Theme>
  </Theme>
);
```

### Переключение тем

Для переключения тем используйте компонент [ThemeToggler](##LIBS.LIB.STAND/lib:uikit/stand:components-themetoggler-stable/) или реализуйте собственную логику:

<MdxTabs>

<ThemeExampleRoot />

```tsx
import './RootTheme.css';
import React, { useState } from 'react';
import { cn } from '@bem-react/classname';
import {
  Theme,
  presetGpnDark,
  presetGpnDefault,
  ThemePreset,
} from '@consta/uikit/Theme';
import { Switch } from '@consta/uikit/Switch';

type ThemeName = 'gpnDefault' | 'gpnDark';

function getPreset(themeName: ThemeName): ThemePreset {
  const obj = {
    gpnDefault: presetGpnDefault,
    gpnDark: presetGpnDark,
  };
  return obj[themeName] || presetGpnDefault;
}

const cnRootTheme = cn('RootTheme');

export const ThemeExampleRoot: React.FC = () => {
  const [theme, setTheme] = useState<ThemeName>('gpnDefault');
  const handleChange: SwitchProps['onChange'] = (e) =>
    setTheme(e.target.checked ? 'gpnDark' : 'gpnDefault');

  return (
    <Theme preset={getPreset(theme)} className={cnRootTheme('')}>
      <Switch
        label="Dark Mode"
        onChange={handleChange}
        checked={theme === 'gpnDark'}
      />
    </Theme>
  );
};
```

</MdxTabs>

<MdxInformer status="normal">

Для корректной работы переключения тем используйте CSS-переменные, описанные по смыслу. Подробности см. в [документации](##LIBS.LIB.STAND/lib:uikit/stand:components-theme-stable/hash:цвета-темы-default).

</MdxInformer>

### Получение текущей темы

Используйте хук `useTheme` для получения текущей темы и её CSS-классов:

```tsx
import { useTheme } from '@consta/uikit/Theme';
import { Text } from '@consta/uikit/Text';

const App = () => {
  const { themeClassNames } = useTheme();
  return (
    <Text className={themeClassNames.color.invert}>
      Текст в инвертной цветовой схеме
    </Text>
  );
};
```

## Пример использования

Базовый пример подключения темы:

```tsx
import React from 'react';
import { Theme, presetGpnDefault } from '@consta/uikit/Theme';
import { Button } from '@consta/uikit/Button';

const App = () => (
  <Theme preset={presetGpnDefault}>
    <Button label="Кнопка в теме Default" />
  </Theme>
);
```
