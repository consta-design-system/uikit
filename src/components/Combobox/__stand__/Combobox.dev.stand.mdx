import { MdxMenu } from '@consta/stand';

import { ComboboxExampleItems } from './examples/ComboboxExampleItems/ComboboxExampleItems';
import { ComboboxExamplePlaceholder } from './examples/ComboboxExamplePlaceholder/ComboboxExamplePlaceholder';
import { ComboboxExampleSize } from './examples/ComboboxExampleSize/ComboboxExampleSize';
import { ComboboxExampleForm } from './examples/ComboboxExampleForm/ComboboxExampleForm';
import { ComboboxExampleDisabled } from './examples/ComboboxExampleDisabled/ComboboxExampleDisabled';
import { ComboboxExampleDisabledItem } from './examples/ComboboxExampleDisabledItem/ComboboxExampleDisabledItem';
import { ComboboxExampleGroups } from './examples/ComboboxExampleGroups/ComboboxExampleGroups';
import { ComboboxExampleRenderItem } from './examples/ComboboxExampleRenderItem/ComboboxExampleRenderItem';
import { ComboboxExampleRenderValue } from './examples/ComboboxExampleRenderValue/ComboboxExampleRenderValue';
import { ComboboxExampleView } from './examples/ComboboxExampleView/ComboboxExampleView';
import { ComboboxExampleCreate } from './examples/ComboboxExampleCreate/ComboboxExampleCreate';
import { ComboboxExampleMultiple } from './examples/ComboboxExampleMultiple/ComboboxExampleMultiple';
import {
  ComboboxExampleCustomTypes,
  ComboboxExampleCustomTypesWithGroups,
} from './examples/ComboboxExampleCustomTypes/ComboboxExampleCustomTypes';
import { ComboboxExampleLabel } from './examples/ComboboxExampleLabel/ComboboxExampleLabel';
import { ComboboxExampleStatus } from './examples/ComboboxExampleStatus/ComboboxExampleStatus';
import { ComboboxExampleOnInputChange } from './examples/ComboboxExampleOnInputChange/ComboboxExampleOnInputChange';
import { ComboboxExampleSelectAll } from './examples/ComboboxExampleSelectAll/ComboboxExampleSelectAll';
import { ComboboxExampleSearchValue } from './examples/ComboboxExampleSearchValue/ComboboxExampleSearchValue';

```tsx
import { Combobox } from '@consta/uikit/Combobox';
```

<MdxMenu>

- [Содержимое](#содержимое-списка)
  - [Варианты](#варианты)
  - [Выбранное значение](#выбранное-значение)
  - [Подсказка](#подсказка)
  - [Заголовок и подпись](#заголовок-и-подпись)
  - [Неактивный вариант](#неактивный-элемент-списка)
  - [Несколько вариантов](#несколько-вариантов)
  - [Группы вариантов](#группы-вариантов)
- [Статус](#статус-поля)
- [Размер](#размер)
- [Форма](#форма)
- [Внешний вид](#внешний-вид)
- [Поиск](#поиск)
- [Неактивный выпадающий список](#неактивный-выпадающий-список)
- [Создание новых вариантов](#создание-новых-вариантов)
- [Выбор всех элементов](#выбор-всех-элементов)
- [Кастомизация](#кастомизация)
  - [Кастомный элемент списка](#кастомный-элемент-списка)
  - [Кастомное выбранное значение](#кастомное-выбранное-значение)
  - [Кастомные типы данных для групп и вариантов](#кастомные-типы-данных-для-групп-и-вариантов)
- [Контролируемое значение поля ввода](#контролируемое-значение-поля-ввода)
- [Импорт](#импорт)
- [Список свойств](#свойства)

</MdxMenu>

## Содержимое

### Варианты

Элементы выпадающего списка можно описать в массиве `items`. Тип свойства `items` по умолчанию равен [DefaultItem](#свойства). Что внутри:

- `label` — название элемента списка, лучше писать с заглавной буквы, точка не нужна,
- `id` — уникальный ключ элемента,
- `groupId` — идентификатор [группы](#группы-вариантов), в которую входит этот элемент (если список разбит на группы),
- `disabled` — отмечает [неактивные элементы](#неактивный-элемент-списка).

Вы можете сделать [кастомный тип данных для элементов списка](#кастомный-элемент-списка) и использовать его.

### Выбранное значение

Выбранное значение задаётся в свойстве `value`. Тип свойства `value` по умолчанию равен [DefaultItem](#свойства).

Чтобы получить значение, которое пользователь выбрал из списка, используйте `onChange`. Этот обработчик срабатывает при выборе варианта или при очистке поля ввода
и возвращает значение из массива `items` и событие выбора.

Выбор варианта срабатывает по клику мыши или по нажатию `Enter` на клавиатуре.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function ComboboxExampleItems() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
      placeholder="Выберите что-нибудь хорошее"
    />
  );
}
```

<ComboboxExampleItems />

### Подсказка

Подсказка, которая видна, когда ни один вариант не выбран, задаётся в свойстве `placeholder`.
Сформулируйте подсказку так, чтобы стало понятно, что по клику на поле раскроется список вариантов, один из которых нужно выбрать.

Если не знаете, что написать в подсказке, используйте универсальное **Выберите**.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function ComboboxExamplePlaceholder() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      placeholder="Выберите вариант"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
  );
}
```

<ComboboxExamplePlaceholder />

## Заголовок и подпись

Вы можете добавить к компоненту два необязательных элемента — заголовок и подпись.

Заголовок можно добавить с помощью свойства `label`.
За его расположение отвечает свойство `labelPosition`.
Варианты: `'top'` (над полем) или `'left'` (слева от поля), по умолчанию `'top'`.

Подпись можно добавить с помощью свойства `caption`.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function ComboboxExampleLabel() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      label="Выберите что-нибудь"
      caption={value?.label}
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
      placeholder="Выберите что-нибудь хорошее"
    />
  );
}
```

<ComboboxExampleLabel />

### Неактивный элемент списка

Чтобы сделать вариант в списке неактивным, добавьте к элементу массива `items` свойство `disabled: true`. Если используете [кастомный тип `items`](#кастомные-типы-данных-для-групп-и-вариантов), можете добавить своё свойство.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
  disabled: boolean;
};

const items: Item[] = [
  {
    label: 'Первый — этот вариант не выбрать',
    id: 1,
    disabled: true,
  },
  {
    label: 'Второй',
    id: 2,
    disabled: false,
  },
  {
    label: 'Третий — и этот тоже не выбрать',
    id: 3,
    disabled: true,
  },
];

export function ComboboxExampleDisabledItem() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      placeholder="Выберите вариант"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
  );
}
```

<ComboboxExampleDisabledItem />

### Несколько вариантов

По умолчанию из списка можно выбрать только одного пользователя. Чтобы выбрать нескольких, добавьте `multiple`.

> В этом случае `value` становится массивом, а в `onChange` передаётся массив выбранных элементов.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function ComboboxExampleMultiple() {
  const [value, setValue] = useState<Item[] | null>();
  return (
    <Combobox
      placeholder="Выберите вариант"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
      multiple
    />
  );
}
```

<ComboboxExampleMultiple />

### Группы вариантов

Чтобы разбить элементы списка на группы, передайте массив групп в свойство `groups`. Тип свойства `groups` по умолчанию равен [DefaultGroup](#свойства). Что внутри:

- `label` — название группы,
- `id` — уникальный ключ.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
  groupId: number;
};

type Group = {
  label: string;
  id: number;
};

const groups: Group[] = [
  {
    id: 1,
    label: 'Первая группа',
  },
  {
    id: 2,
    label: 'Вторая группа',
  },
  {
    id: 3,
    label: 'Третья группа',
  },
];

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
    groupId: 1,
  },
  {
    label: 'Второй',
    id: 2,
    groupId: 2,
  },
  {
    label: 'Третий',
    id: 3,
    groupId: 1,
  },
  {
    label: 'Четвертый',
    id: 4,
    groupId: 3,
  },
  {
    label: 'Пятый',
    id: 5,
    groupId: 2,
  },
];

export function ComboboxExampleGroups() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      placeholder="Выберите вариант"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
      groups={groups}
    />
  );
}
```

<ComboboxExampleGroups />

## Статус поля

С помощью статуса можно выделить поле: показать, где ошибка, или, наоборот,
отметить правильно заполненные поля.

За статус отвечает свойство `status`. Если оно не указано, поле будет обычным.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function ComboboxExampleStatus() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      placeholder="default"
      caption="default"
      size="s"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
    <Combobox
      placeholder="alert"
      caption="alert"
      status="alert"
      size="s"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
    <Combobox
      placeholder="warning"
      caption="warning"
      status="warning"
      size="s"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
    <Combobox
      placeholder="success"
      caption="success"
      size="s"
      status="success"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
  );
}
```

<ComboboxExampleStatus />

## Размер

За размер компонента отвечает свойство `size`. Варианты: `s` , `m` , `l` , по умолчанию `m`.

Компонент занимает всю ширину родительского блока.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function ComboboxExampleSize() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      placeholder="Размер s"
      size="s"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
  );
}
```

<ComboboxExampleSize />

## Форма

За форму селекта отвечает свойство `form`. Варианты:
`default`, `brick`, `round`, `clearRound`, `roundClear`, `clearDefault`, `defaultClear`, `defaultBrick`, `brickDefault`, `brickClear`, `clearBrick`, `clearClear`. По умолчанию `default`.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function ComboboxExampleForm() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      placeholder="Форма round"
      form="round"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
    <Combobox
      placeholder="Форма defaultBrick"
      form="defaultBrick"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
  );
}
```

<ComboboxExampleForm />

## Внешний вид

За вид компонента отвечает свойство `view`. Варианты: `default`, `clear`, по умолчанию `default`.

Вид `view="clear"` используется в случаях когда нужно создать кастомное поле ввода или обернуть его в контейнер, в этом случае
поля с разными статусами и разной формы будут выглядет одинаково.

> Для создания hover эфекта для view="`clear`" управляйте внешним видом контейнера, в котором находится Combobox

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function ComboboxExampleView() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      placeholder="Вид default"
      view="default"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
    <Combobox
      placeholder="Вид clear"
      view="clear"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
    />
  );
}
```

<ComboboxExampleView />

## Неактивный выпадающий список

Чтобы сделать весь комбобокс неактивным, добавьте `disabled`.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function ComboboxExampleDisabled() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      placeholder="Здесь ничего выбрать не получится"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
      disabled
    />
  );
}
```

<ComboboxExampleDisabled />

## Поиск

Если в поле что-то напечатать, компонент найдёт всех варианты, в названии которых есть напечатанные символы.

По умолчанию компонент ищет по `label` элемента. Вы можете поменять параметры поиска с помощью `searchFunction`. Например, если в комбобоксе есть [кастомные элементы](#кастомный-элемент-списка) и нужно искать варианты не только по `label`, но и по другим данным.

Чтобы получить значение поисквого поля, нужно указать колбек для `onInputChange`.

Если ничего не нашлось, пользователь увидит текст **Не найдено**. Поменять его можно с помощью свойства `labelForNotFound`.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function ComboboxExampleOnInputChange() {
  const [value, setValue] = useState<Item | null>();
  const [search, setSearch] = useState<string | undefined | null>();
  return (
    <>
      <Text size="l">Значение поиска: {search ?? 'Пусто'}</Text>
      <Combobox
        placeholder="Выберите вариант"
        items={items}
        value={value}
        onInputChange={({ value }) => setSearch(value)}
        onChange={({ value }) => setValue(value)}
      />
    </>
  );
}
```

<ComboboxExampleOnInputChange />

## Создание новых вариантов

Если при поиске в поле ничего не нашлось, можно показать в комбобоксе кнопку для создания нового значения. Пользователь сможет добавить значение в список, а потом выбрать его. В функцию на вход придёт `label` созданного элемента.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number | string;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function ComboboxExampleCreate() {
  const [value, setValue] = useState<Item | null>();
  const [list, setList] = useState<Item[]>(items);
  return (
    <Combobox
      placeholder="Выберите вариант"
      items={list}
      value={value}
      onChange={({ value }) => setValue(value)}
      onCreate={({ label }) =>
        setList([{ label, id: `${label}_${list.length + 1}` }, ...list])
      }
    />
  );
}
```

Начните набирать слово, которого нет в выпадающем списке — рядом с ним появится **+**.
Если на нажать на строчку с плюсом, элемент добавится в список и его можно будет выбрать.

Поставить свой текст вместо плюса можно с помощью свойства `labelForCreate`.

<ComboboxExampleCreate />

## Выбор всех элементов

Для того чтобы выбрать все элементы в группе, если группы определены, или все элементы в целом, необходимо определить флаг `selectAll`.

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
  groupId: number;
};

type Group = {
  label: string;
  id: number;
};

const groups: Group[] = [
  {
    id: 1,
    label: 'Первая группа',
  },
  {
    id: 2,
    label: 'Вторая группа',
  },
  {
    id: 3,
    label: 'Третья группа',
  },
];

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
    groupId: 1,
  },
  {
    label: 'Второй',
    id: 2,
    groupId: 2,
  },
  {
    label: 'Третий',
    id: 3,
    groupId: 1,
  },
  {
    label: 'Четвертый',
    id: 4,
    groupId: 3,
  },
  {
    label: 'Пятый',
    id: 5,
    groupId: 2,
  },
];

export const ComboboxExampleSelectAll = () => {
  const [value, setValue] = useState<Item[] | null>();
  return (
    <Combobox
      placeholder="Выберите варианты"
      items={items}
      value={value}
      multiple
      selectAll
      onChange={({ value }) => setValue(value)}
      groups={groups}
    />
  );
};
```

<ComboboxExampleSelectAll />

## Кастомизация

### Кастомный элемент списка

Чтобы создать свое представление элементов списка, используйте свойство `renderItem`.
Свойство принимает [функцию рендера](https://reactjs.org/docs/render-props.html).

> У корневого DOM-элемента должно быть свойство role="option".

#### Пример с кастомным элементом списка и своей функцией поиска

```tsx
import React, { useState } from 'react';
import { Badge } from '@consta/uikit/Badge';
import { cn } from '../../../../../utils/bem';
import { Combobox } from '@consta/uikit/Combobox';

import { cn } from '@bem-react/classname';

const cnComboboxExampleRenderItem = cn('ComboboxExampleRenderItem');

type Item = {
  label: string;
  id: number;
  status?: 'repairs' | 'serviceable';
};

const items: Item[] = [
  {
    label: 'Принтер',
    id: 1,
    status: 'repairs',
  },
  {
    label: 'Монитор',
    id: 2,
    status: 'serviceable',
  },
  {
    label: 'Ноутбук',
    id: 3,
    status: 'serviceable',
  },
  {
    label: 'Стол',
    id: 4,
  },
];

const mapLabel = {
  repairs: 'На ремонте',
  serviceable: 'Исправен',
} as const;

const mapStatus = {
  repairs: 'error',
  serviceable: 'success',
} as const;

export const searchCompare = (
  searchValue: string,
  compare?: string,
): boolean => {
  if (!compare) {
    return false;
  }

  return (
    compare.toLocaleLowerCase().indexOf(searchValue.toLocaleLowerCase()) !== -1
  );
};

const searchFunction = (item: Item, searchValue: string): boolean => {
  const searchOfLabel = searchCompare(searchValue, item.label);

  if (searchOfLabel) {
    return searchOfLabel;
  }

  return searchCompare(searchValue, item.status && mapLabel[item.status]);
};

export function ComboboxExampleRenderItem() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      placeholder="Выберите вариант"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
      searchFunction={searchFunction}
      renderItem={({ item, active, hovered, onClick, onMouseEnter }) => (
        <div
          className={cnComboboxExampleRenderItem('Item', { active, hovered })}
          role="option"
          aria-selected={active}
          aria-hidden="true"
          onMouseEnter={onMouseEnter}
          onClick={onClick}
        >
          {item.label}
          {item.status && (
            <Badge
              className={cnComboboxExampleRenderItem('Badge')}
              as="span"
              size="s"
              label={mapLabel[item.status]}
              status={mapStatus[item.status]}
            />
          )}
        </div>
      )}
    />
  );
}
```

<ComboboxExampleRenderItem />

### Кастомное выбранное значение

Чтобы создать кастомное выбранное значение, используте свойство `renderValue`.
Свойство принимает [функцию рендера](https://reactjs.org/docs/render-props.html).

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

export function ComboboxExampleRenderValue() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      placeholder="Выберите вариант"
      items={items}
      value={value}
      onChange={({ value }) => setValue(value)}
      renderValue={({ item }) => (
        <div>
          <span role="img" aria-label="Panda">
            🐼
          </span>{' '}
          — {item.label}
        </div>
      )}
    />
  );
}
```

<ComboboxExampleRenderValue />

### Кастомные типы данных для групп и вариантов

Вы можете использовать кастомные типы данных для элементов списка (items) и групп (groups) — они могут отличаться от [DefaultItem](#свойства) и [DefaultGroup](#свойства).

В этом случае нужно использовать геттеры `getItemLabel`, `getItemKey`, `getItemGroupKey`, `getItemDisabled`, `getGroupLabel`, `getGroupKey`, чтобы компонент понимал, откуда брать данные.

#### Геттеры по умолчанию

```ts
const defaultGetItemKey = (item) => item.id;
const defaultGetItemLabel = (item) => item.label;
const defaultGetItemGroupKey = (item) => item.groupId;
const defaultGetItemDisabled = (item) => item.disabled;
const defaultGetGroupKey = (group) => group.id;
const defaultGetGroupLabel = (group) => group.label;
```

#### Пример с кастомным Item

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

export function ComboboxExampleCustomTypes() {
  const [value, setValue] = useState<string | null>();
  return (
    <Combobox
      placeholder="Выберите вариант"
      items={['Первый', 'Второй', 'Третий']}
      value={value}
      onChange={({ value }) => setValue(value)}
      getItemKey={(item) => item}
      getItemLabel={(item) => item}
    />
  );
}
```

<ComboboxExampleCustomTypes />

#### Пример с кастомным Item и Group

```tsx
import React, { useState } from 'react';
import { Combobox } from '@consta/uikit/Combobox';

export type Item = {
  name: string;
  group: string;
};

export const items: Item[] = [
  { name: 'Первый', group: 'Первая группа' },
  { name: 'Второй', group: 'Третья группа' },
  { name: 'Третий', group: 'Вторая группа' },
  { name: 'Четвертый', group: 'Первая группа' },
  { name: 'Пятый', group: 'Первая группа' },
  { name: 'Шестой', group: 'Третья группа' },
  { name: 'Седьмой', group: 'Первая группа' },
  { name: 'Восьмой', group: 'Вторая группа' },
  { name: 'Девятый', group: 'Третья группа' },
  { name: 'Десятый', group: 'Вторая группа' },
];

export const groups: string[] = [
  'Первая группа',
  'Вторая группа',
  'Третья группа',
];

export function ComboboxExampleCustomTypesWithGroups() {
  const [value, setValue] = useState<Item | null>();
  return (
    <Combobox
      placeholder="Выберите вариант"
      items={items}
      groups={groups}
      value={value}
      onChange={({ value }) => setValue(value)}
      getItemKey={(item) => item.name}
      getItemLabel={(item) => item.name}
      getItemGroupKey={(item) => item.group}
      getGroupKey={(group: string) => group}
      getGroupLabel={(group: string) => group}
    />
  );
}
```

<ComboboxExampleCustomTypesWithGroups />

## Контролируемое значение поля ввода

Для того, чтобы программным путем изменить значение поля ввода, используйте `searchValue`.

```tsx
export function ComboboxExampleSearchValue() {
  const [value, setValue] = useState<Item[] | null>();
  const [searchValue, setSearchValue] = useState<string | undefined>();

  return (
    <>
      <Combobox
        className={cnMixSpace({ mB: 'm' })}
        placeholder="Выберите вариант"
        items={items}
        value={value}
        onChange={({ value }) => setValue(value)}
        searchValue={searchValue}
        multiple
      />
      <Button
        className={cnMixSpace({ mR: 'm' })}
        label="Второй"
        onClick={() => setSearchValue('Второй')}
      />
      <Button
        className={cnMixSpace({ mR: 'm' })}
        label="Первый"
        onClick={() => setSearchValue('Первый')}
      />
      <Button label="Очистить" onClick={() => setSearchValue(undefined)} />
    </>
  );
}
```

<ComboboxExampleSearchValue />

## Импорт

```tsx
import { Combobox } from '@consta/uikit/Combobox';
```

## Свойства

```tsx
type DefaultItem = {
  label: string;
  id: string | number;
  groupId?: string | number;
  disabled?: boolean;
};

type DefaultGroup = {
  label: string;
  id: string | number;
};

type PropOnChange<ITEM, MULTIPLE extends boolean> = (props: {
  value: (MULTIPLE extends true ? ITEM[] : ITEM) | null;
  e: React.SyntheticEvent;
}) => void;

type PropRenderItem<ITEM = DefaultItem> = (props: {
  item: ITEM;
  active: boolean;
  hovered: boolean;
  onClick: React.ReactEventHandler;
  onMouseEnter: React.ReactEventHandler;
}) => React.ReactElement | null;

type PropValue<ITEM, MULTIPLE extends boolean> =
  | (MULTIPLE extends true ? ITEM[] : ITEM)
  | null
  | undefined;

type PropRenderValue<ITEM> = (props: {
  item: ITEM;
}) => React.ReactElement | null;

type PropSearchFunction<ITEM> = (item: ITEM, searchValue: string) => boolean;

type PropGetItemLabel<ITEM> = (item: ITEM) => string;
type PropGetItemKey<ITEM> = (item: ITEM) => string | number;
type PropGetItemGroupKey<ITEM> = (item: ITEM) => string | number | undefined;
type PropGetItemDisabled<ITEM> = (item: ITEM) => boolean | undefined;
type PropGetGroupKey<GROUP> = (group: GROUP) => string | number;
type PropGetGroupLabel<GROUP> = (group: GROUP) => string;
```

| Свойство                                                  | Тип или варианты значения                                                                         | По умолчанию                                                  | Описание                                                               |
| --------------------------------------------------------- | ------------------------------------------------------------------------------------------------- | ------------------------------------------------------------- | ---------------------------------------------------------------------- |
| [`view?`](#внешний-вид)                                   | `default` , `clear`                                                                               | `default`                                                     | Внешний вид компонента                                                 |
| [`disabled?`](#отключение-поля-ввода)                     | `boolean`                                                                                         | -                                                             | Делает компонент недоступным                                           |
| [`status?`](#статус-поля)                                 | `'', 'alert', 'success', 'warning'`                                                               | `' '`                                                         | Тип поля                                                               |
| [`size?`](#размер)                                        | `'xs'`, `'s'` , `'m'` , `'l'`                                                                     | `'m'`                                                         | Размер компонента                                                      |
| [`form?`](#форма)                                         | `default`, `brick`, `round`                                                                       | `default`                                                     | Форма компонента                                                       |
| [`placeholder?`](#подсказка)                              | `string`                                                                                          | -                                                             | Подсказка, отображается, когда вариант не выбран                       |
| [`label?`](#лейбл-и-подпись)                              | `string`                                                                                          | -                                                             | Лейбл                                                                  |
| [`labelIcon?`](#лейбл-и-подпись)                          | `IconComponent`                                                                                   | -                                                             | Иконка слева от лейбла                                                 |
| [`labelPosition?`](#лейбл-и-подпись)                      | `'top', 'left'`                                                                                   | `'top'`                                                       | Положение лейбла                                                       |
| [`caption?`](#лейбл-и-подпись)                            | `string`                                                                                          | -                                                             | Подпись                                                                |
| [`items`](#варианты)                                      | `ITEM[]`                                                                                          | -                                                             | Варианты                                                               |
| [`value?`](#значение)                                     | `PropValue<ITEM,MULTIPLE>`                                                                        | -                                                             | Значение селекта                                                       |
| [`onChange?`](#onchange)                                  | `PropOnChange<ITEM,MULTIPLE>`                                                                     | -                                                             | Событие связанное с изменением значения компонента                     |
| [`multiple?`](#множественный-выбор)                       | `boolean`                                                                                         | `false`                                                       | Указатель множественного выбора                                        |
| [`groups?`](#группировка-списка)                          | `GROUP[]`                                                                                         | -                                                             | Группы                                                                 |
| [`onInputChange?`](#поиск)                                | `(args: e: React.ChangeEvent; id?: string, number; name?: string; value: string, null;) => void;` | -                                                             | Функция для получения значения поля ввода                              |
| [`searchFunction?`](#поиск)                               | `PropSearchFunction<ITEM>`                                                                        | поиск по `label` элементов, `label` получен из `getItemLabel` | Функция поиска                                                         |
| [`renderItem?`](#свое-представление-элемента-списка)      | `PropRenderItem<ITEM>`                                                                            | рендер по умолчанию                                           | Рендер-функция для элемента списка                                     |
| [`renderValue?`](#свое-представление-выбранного-значения) | `PropRenderValue<ITEM>`                                                                           | рендер по умолчанию                                           | Рендер-функция для элемента значения                                   |
| [`getItemLabel?`](#свои-тип-данных-items-и-groups)        | `PropGetItemLabel<ITEM>`                                                                          | `(item) => item.label`                                        | Функция для определения названия элемента                              |
| [`getItemKey?`](#свои-тип-данных-items-и-groups)          | `PropGetItemKey<ITEM>`                                                                            | `(item) => item.id`                                           | Функция для определения уникального ключа элемента                     |
| [`getItemGroupKey?`](#свои-тип-данных-items-и-groups)     | `PropGetItemGroupKey<ITEM>`                                                                       | `(item) => item.groupId`                                      | Функция для определения ключа группы, к которой будет привязан элемент |
| [`getItemDisabled?`](#свои-тип-данных-items-и-groups)     | `PropGetItemDisabled<ITEM>`                                                                       | `(item) => item.disabled`                                     | Функция для определения состояния `disabled`                           |
| [`getGroupLabel?`](#свои-тип-данных-items-и-groups)       | `PropGetGroupKey<GROUP>`                                                                          | `(group) => group.id`                                         | Функция для определения названия группы                                |
| [`getGroupKey?`](#свои-тип-данных-items-и-groups)         | `PropGetGroupLabel<GROUP>`                                                                        | `(group) => group.label`                                      | Функция для определения уникального ключа группы                       |
| `isLoading?`                                              | `boolean`                                                                                         | -                                                             | При `true` будет отображаться лоудер загрузки                          |
| `required?`                                               | `boolean`                                                                                         | -                                                             | Нужно заполнить                                                        |
| `searchValue?`                                            | `string`                                                                                          | -                                                             | Значение поля ввода                                                    |
| `labelForEmptyItems?`                                     | `string`                                                                                          | `Список пуст`                                                 | Текст, который нужно показать, если в списке нет значений              |
| [`labelForNotFound?`](#поиск)                             | `string`                                                                                          | `Не найдено`                                                  | Текст, который нужно показать, если при поиске ничего не нашлось       |
| [`labelForCreate?`](#создание-новых-вариантов)            | `string`                                                                                          | `+`                                                           | Текст для кнопки, по которой можно добавить элемент в список           |
| [`selectAll?`](#выбор-всех-элементов)                     | `boolean`                                                                                         | `false`                                                       | Добавляет пункт списка с возможностью выбора всех элементов            |
| `onBlur?`                                                 | `(event?: React.FocusEvent<HTMLInputElement>) => void`                                            | -                                                             | Обработчик события `blur`                                              |
| `onFocus?`                                                | `(event?: React.FocusEvent<HTMLInputElement>) => void`                                            | -                                                             | Обработчик события `focus`                                             |
| `ariaLabel?`                                              | `string`                                                                                          | -                                                             | `aria` атрибут для поля ввода                                          |
| `name?`                                                   | `string`                                                                                          | -                                                             | Имя поля ввода                                                         |
| `className?`                                              | `string`                                                                                          | -                                                             | Дополнительный CSS-класс                                               |
| `dropdownClassName?`                                      | `string`                                                                                          | -                                                             | Дополнительный CSS-класс для выпадающего блока                         |
| `ref?`                                                    | `React.Ref<HTMLDivElement>`                                                                       | -                                                             | Ссылка на корневой DOM-элемент компонента                              |
