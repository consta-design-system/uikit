import { MdxMenu, MdxTabs } from '@consta/stand';
import {
  ProgressStepBarExampleDirectionHorizontal,
  ProgressStepBarExampleDirectionVertical,
} from './examples/ProgressStepBarExampleDirection/ProgressStepBarExampleDirection';
import { ProgressStepBarExampleSize } from './examples/ProgressStepBarExampleSize/ProgressStepBarExampleSize';
import { ProgressStepBarExampleTooltip } from './examples/ProgressStepBarExampleTooltip/ProgressStepBarExampleTooltip';
import { ProgressStepBarExampleProgress } from './examples/ProgressStepBarExampleProgress/ProgressStepBarExampleProgress';
import { ProgressStepBarExampleContent } from './examples/ProgressStepBarExampleContent/ProgressStepBarExampleContent';
import { ProgressStepBarExampleActive } from './examples/ProgressStepBarExampleActive/ProgressStepBarExampleActive';
import { ProgressStepBarExampleAdaptive } from './examples/ProgressStepBarExampleAdaptive/ProgressStepBarExampleAdaptive';

<MdxMenu>

- [Обзор](#обзор)
- [Импорт](#импорт)
- [Свойства](#свойства)
- [Содержимое](#содержимое)
  - [Шаги](#шаги)
  - [Подсказка в тултипе](#подсказка-в-тултипе)
  - [Индикатор шага в процессе](#индикатор-шага)
  - [Дополнительный контент и клик](#дополнительный-контент-и-клик)
- [Внешний вид](#внешний-вид)
  - [Расположение](#расположение)
  - [Размер](#размер)
- [Поведение](#поведение)
  - [Активный шаг](#активный-шаг)
  - [Адаптивность](#адаптивность)
- [Пример использования](#пример-использования)

</MdxMenu>

## Обзор

Компонент `ProgressStepBar` отображает последовательность шагов с возможностью указания их статуса, прогресса и дополнительного контента. Подходит для отображения процессов, таких как прогресс выполнения задачи, навигация по этапам или визуализация рабочих процессов.

## Импорт

```tsx
import { ProgressStepBar } from '@consta/uikit/ProgressStepBar';
```

## Свойства

| Свойство                            | Тип или варианты значения                        | По умолчанию                    | Описание                                            |
| ----------------------------------- | ------------------------------------------------ | ------------------------------- | --------------------------------------------------- |
| [`steps`](#шаги)                    | `ITEM[]`                                         | -                               | Список шагов                                        |
| [`direction?`](#расположение)       | `'horizontal'` &#124; `'vertical'`               | `'horizontal'`                  | Ориентация шагов                                    |
| [`size?`](#размер)                  | `'xs'` &#124; `'s'` &#124; `'m'`                 | `'s'`                           | Размер компонента                                   |
| [`activeStepIndex?`](#активный-шаг) | `string` &#124; `number`                         | -                               | Номер активного шага (нумерация начинается с `0`)   |
| `onItemClick?`                      | `ProgressStepBarPropOnItemClick`                 | -                               | Обработчик клика по шагу                            |
| `getItemLabel?`                     | `ProgressStepBarPropGetItemLabel<ITEM>`          | `(item) => item.label`          | Функция для получения названия шага                 |
| `getItemLineStatus?`                | `ProgressStepBarPropGetItemLineStatus<ITEM>`     | `(item) => item.lineStatus`     | Функция для получения статуса линии                 |
| `getItemTooltipContent?`            | `ProgressStepBarPropGetItemTooltipContent<ITEM>` | `(item) => item.tooltipContent` | Функция для получения содержимого тултипа           |
| `getItemPoint?`                     | `ProgressStepBarPropGetItemPoint<ITEM>`          | `(item) => item.point`          | Функция для получения внутреннего контента шага     |
| `getItemProgress?`                  | `ProgressStepBarPropGetItemProgress<ITEM>`       | `(item) => item.progress`       | Функция для определения прогресса шага              |
| `getItemContent?`                   | `ProgressStepBarPropGetItemContent<ITEM>`        | `(item) => item.content`        | Функция для получения дополнительного контента шага |
| `getItemStatus?`                    | `ProgressStepBarPropGetItemStatus<ITEM>`         | `(item) => item.status`         | Функция для получения статуса шага                  |
| `getItemClick?`                     | `ProgressStepBarPropGetItemOnClick<ITEM>`        | `(item) => item.onClick`        | Функция для обработки клика по шагу                 |
| `className?`                        | `string`                                         | -                               | Дополнительный CSS-класс                            |
| `ref?`                              | `React.Ref<HTMLDivElement>`                      | -                               | Ссылка на корневой элемент                          |

## Содержимое

### Шаги

Список шагов задаётся через свойство `steps` в виде массива объектов. Каждый объект в массиве описывает шаг и может содержать следующие поля:

### Шаги

Список шагов задаётся через свойство `steps` в виде массива объектов. Каждый объект в массиве описывает шаг и может содержать следующие поля:

| Свойство          | Тип или варианты значения                                         | Описание                                                                                                |
| ----------------- | ----------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------- |
| `label`           | `string`                                                          | Название шага, отображается рядом с его обозначением                                                    |
| `tooltipContent?` | `string`                                                          | Текст для всплывающей подсказки ([Tooltip](##LIBS.LIB.STAND/lib:uikit/stand:components-tooltip-stable)) |
| `lineStatus?`     | `'normal' \| 'success' \| 'alert' \| 'warning'`                   | Цвет линии, соединяющей шаги                                                                            |
| `point?`          | `0 \| 1 \| 2 \| 3 \| 4 \| 5 \| 6 \| 7 \| 8 \| 9 \| IconComponent` | Номер шага или иконка, отображаемая в качестве обозначения шага                                         |
| `progress?`       | `boolean`                                                         | Показывает, что шаг в процессе выполнения (отображается индикатор загрузки)                             |
| `content?`        | `React.ReactNode`                                                 | Дополнительное содержимое шага (например, текст, иконки, компоненты)                                    |
| `status?`         | `'normal' \| 'success' \| 'alert' \| 'warning'`                   | Статус шага, влияет на его визуальное отображение                                                       |
| `onClick?`        | `React.EventHandler<React.MouseEvent>`                            | Обработчик клика по шагу                                                                                |

Шаги отображаются в порядке, указанном в массиве.

### Подсказка в тултипе

Для отображения всплывающей подсказки используйте свойство `tooltipContent` в объекте шага. Подсказка появляется при наведении на шаг и содержит краткое описание.

<MdxTabs>

<ProgressStepBarExampleTooltip />

```tsx
const steps = [
  {
    label: 'Первый шаг',
    point: 1,
    status: 'normal',
    lineStatus: 'normal',
    tooltipContent: 'Небольшое описание выполнения или состояния на шаге 1',
  },
  {
    label: 'Второй шаг',
    point: 2,
    status: 'warning',
    progress: true,
    lineStatus: 'warning',
    tooltipContent: 'Небольшое описание выполнения или состояния на шаге 2',
  },
  {
    label: 'Третий шаг',
    point: 3,
    status: 'alert',
    progress: true,
    lineStatus: 'alert',
    tooltipContent: 'Небольшое описание выполнения или состояния на шаге 3',
  },
  {
    label: 'Четвёртый шаг',
    point: 4,
    status: 'success',
    tooltipContent: 'Небольшое описание выполнения или состояния на шаге 4',
  },
];

return <ProgressStepBar steps={steps} />;
```

</MdxTabs>

### Индикатор шага

Свойство `progress` в объекте шага показывает, что шаг находится в процессе выполнения. В таком случае вместо номера или иконки отображается индикатор загрузки.

<MdxTabs>

<ProgressStepBarExampleProgress />

```tsx
const steps = [
  {
    label: 'Первый шаг',
    point: 1,
    status: 'normal',
    lineStatus: 'normal',
  },
  {
    label: 'Второй шаг',
    point: 2,
    status: 'normal',
    lineStatus: 'normal',
  },
  {
    label: 'Третий шаг',
    point: 3,
    progress: true,
    status: 'normal',
    lineStatus: 'normal',
  },
  {
    label: 'Четвёртый шаг',
    point: 4,
    status: 'normal',
  },
];

return <ProgressStepBar steps={steps} activeStepIndex={3} />;
```

</MdxTabs>

### Дополнительный контент и клик

Свойство `content` позволяет добавить к шагу дополнительное содержимое, например, иконки, теги или другие компоненты. Свойство `onClick` задаёт действие при клике на шаг.

<MdxTabs>

<ProgressStepBarExampleContent />

```tsx
const StepContent = () => {
  return (
    <div>
      <IconDinosaur size="xs" view="secondary" />
      <Tag mode="button" onClick={() => console.log()} label="Черновик" />
      <Tag
        mode="button"
        onClick={() => console.log()}
        label=""
        icon={IconSettings}
      />
    </div>
  );
};

const [status, setStatus] = useState('normal');

const clickAction = () => {
  setStatus(status === 'normal' ? 'success' : 'normal');
};

const steps = [
  {
    label: 'Первый шаг',
    point: 1,
    status,
    lineStatus: 'normal',
    content: <StepContent />,
    onClick: () => clickAction(),
  },
  {
    label: 'Второй шаг',
    point: 2,
    status,
    lineStatus: 'normal',
    onClick: () => clickAction(),
  },
  {
    label: 'Третий шаг',
    point: 3,
    status,
    lineStatus: 'normal',
    onClick: () => clickAction(),
  },
  {
    label: 'Четвёртый шаг',
    point: 4,
    status,
    content: <StepContent />,
    onClick: () => clickAction(),
  },
];

return <ProgressStepBar steps={steps} activeStepIndex={2} size="m" />;
```

</MdxTabs>

## Внешний вид

### Расположение

Свойство `direction` определяет ориентацию шагов:

- `'horizontal'` — шаги располагаются горизонтально (по умолчанию).
- `'vertical'` — шаги располагаются вертикально, друг под другом.

<MdxTabs>

<ProgressStepBarExampleDirectionHorizontal />

```tsx
return <ProgressStepBar direction="horizontal" steps={steps} />;
```

</MdxTabs>

<MdxTabs>

<ProgressStepBarExampleDirectionVertical />

```tsx
return <ProgressStepBar direction="vertical" steps={steps} />;
```

</MdxTabs>

### Размер

Свойство `size` задаёт размер компонента. Доступные значения: `'xs'`, `'s'`, `'m'`. По умолчанию — `'s'`.

<MdxTabs>

<ProgressStepBarExampleSize />

```tsx
return (
  <>
    <ProgressStepBar size="xs" steps={steps} activeStepIndex={2} />
    <ProgressStepBar size="s" steps={steps} activeStepIndex={2} />
    <ProgressStepBar size="m" steps={steps} activeStepIndex={2} />
  </>
);
```

</MdxTabs>

## Поведение

### Активный шаг

Свойство `activeStepIndex` указывает номер активного шага (нумерация начинается с `0`). Активный шаг выделяется визуально.

<MdxTabs>

<ProgressStepBarExampleActive />

```tsx
return (
  <>
    <ProgressStepBar steps={steps} activeStepIndex={0} />
    <ProgressStepBar steps={steps} activeStepIndex={1} />
    <ProgressStepBar steps={steps} activeStepIndex={2} />
    <ProgressStepBar steps={steps} activeStepIndex={3} />
  </>
);
```

</MdxTabs>

### Адаптивность

На компактных экранах компонент занимает всю доступную ширину. Если шаги не помещаются, появляется горизонтальная прокрутка, которую можно выполнять кнопками или свайпами (на мобильных устройствах). Названия и обозначения шагов сохраняются. Для лучшего отображения на узких экранах рекомендуется использовать `direction="vertical"`.

<MdxTabs>

<ProgressStepBarExampleAdaptive />

```tsx
return <ProgressStepBar steps={steps} />;
```

</MdxTabs>
