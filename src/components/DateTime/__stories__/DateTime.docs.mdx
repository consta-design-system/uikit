import {
  DateTimeExampleView,
  DateTimeExampleViewTwo,
  DateTimeExampleViewSlider,
  DateTimeExampleCurrent,
} from './examples/DateTimeExampleView/DateTimeExampleView';

import { DateTimeExampleDateMin } from './examples/DateTimeExampleDateMin/DateTimeExampleDateMin';

import { DateTimeExamplePeriod } from './examples/DateTimeExamplePeriod/DateTimeExamplePeriod';

import { DateTimeExampleLocale } from './examples/DateTimeExampleLocale/DateTimeExampleLocale';

import { DateTimeExampleEvents } from './examples/DateTimeExampleEvents/DateTimeExampleEvents';

# DateTime

Календарь нужен, чтобы пользователь мог выбрать дату или период.

- [Внешний вид](#внешний-вид)
  - [Какой месяц показывать](#какой-месяц-показывать)
- [Выбор даты](#выбор-даты)
  - [Ограничение выбора](#ограничение-выбора)
- [События на календаре](#события-на-календаре)
- [Локализация](#локализация)
- [Список свойств](#свойства)

## Внешний вид

За внешний вид календаря отвечает свойство `view`. Варианты:

- показать 1 месяц — `'oneMonth'` (отображается по умолчанию),
- показать 2 месяца — `'twoMonths'`,
- 2 месяца со слайдером — `'slider'`.

**Календарь на один месяц**

<DateTimeExampleView />

```tsx
<DateTime view="oneMonth" />
```

**Календарь на два месяца**

<DateTimeExampleViewTwo />

```tsx
<DateTime view="twoMonths" />
```

**Календарь со слайдером**

<DateTimeExampleViewSlider />

```tsx
<DateTime view="slider" />
```

### Какой месяц показывать

Вы можете выбрать, какой месяц показывать. Для этого передайте дату в свойстве `currentVisibleDate`. Пользователь увидит месяц, в который входит эта дата.

**Показывает месяц, в который входит начало текущей недели**

<DateTimeExampleCurrent />

```tsx
import { startOfWeek } from 'date-fns';
import ruLocale from 'date-fns/locale/ru';

<DateTime
  currentVisibleDate={startOfWeek(new Date()), {locale: ruLocale})}
/>
```

## Выбор даты

Выбранная дата передаётся в свойстве `value`.

Пользователь может выбрать одну дату или указать период.

Для полчения события выбора даты существует свойства `onChange` и `onChangeRange`

> Свойство `value` описано в [DateTimePropValue](#свойства)

> Событие выбора даты описано в [DateTimePropOnChange](#свойства) и в [DateTimePropOnChangeRange](#свойства)

### Пример с выбором периода

<DateTimeExamplePeriod />

```tsx
export const DateTimeExamplePeriod = () => {
  const [rangeValue, setRangeValue] = useState<[Date?, Date?]>([]);

  return (
    <DateTime
      value={rangeValue}
      onChangeRange={({ value }) => setRangeValue(value)}
      view="slider"
    />
  );
};
```

### Ограничение выбора

Можно установить диапазон, в котором пользователь может выбрать дату в календаре.

Начало диапазона укажите в свойстве `minDate`, конец — в свойстве `maxDate`.

**Календарь с диапазоном дат**

<DateTimeExampleDateMin />

```tsx
import { startOfWeek } from 'date-fns';
import ruLocale from 'date-fns/locale/ru';

<DateTime minDate={startOfWeek(new Date(), { locale: ruLocale })} maxDate={new Date()} />;
```

## События на календаре

Если какие-то события уже запланированы, укажите их даты в массиве `events`. Тогда их можно будет увидеть на календаре.

**На этой неделе что-то запланировано**

<DateTimeExampleEvents />

```tsx
import { addDays, startOfWeek } from 'date-fns';

const events = [startOfWeek(new Date(), { locale: ruLocale }), new Date(), addDays(new Date(), 2)];

<DateTime events={events} />;
```

## Локализация

По умолчанию календарь отображается по-русски. Чтобы поменять язык,
подключите библиотеку [date-fns](https://date-fns.org/) и укажите локализацию в свойстве `locale`.

**Календарь по-французски**

<DateTimeExampleLocale />

```tsx
import frLocale from 'date-fns/locale/fr';

const DateTimeExampleLocale = () => {
  return <DateTime locale={frLocale} />;
};
```

## Свойства

```tsx
import { Locale } from 'date-fns';
import ruLocale from 'date-fns/locale/ru';

export type DateTimePropValue = Date | [Date?, Date?];

export type DateTimePropOnChange = (props: {
  value: DateTimePropValue;
  e: React.MouseEvent<HTMLDivElement>;
}) => void;

export type DateTimePropOnChangeRange = (props: {
  value: DateTimePropValue;
  e: React.MouseEvent<HTMLDivElement>;
}) => void;
```

| Свойство                                         | Тип или варианты значения           | По умолчанию | Описание                                                          |
| ------------------------------------------------ | ----------------------------------- | ------------ | ----------------------------------------------------------------- |
| [`view?`](#внешний-вид)                          | `'oneMonth', 'twoMonths', 'slider'` | `'oneMonth'` | Вид календаря                                                     |
| [`type?`](#выбор-даты)                           | `'date'`                            | `'date'`     | Тип календаря                                                     |
| [`value?`](#выбор-даты)                          | `DateTimePropValue`                 | -            | Выбранная дата или диапазон дат                                   |
| [`minDate?`](#ограничение-выбора)                | `Date`                              | -            | Ограничение выбора дат по меньшей дате                            |
| [`maxDate?`](#ограничение-выбора)                | `Date`                              | -            | Ограничение выбора дат по большей дате                            |
| [`events?`](#события-на-календаре)               | `Date[]`                            | -            | События                                                           |
| [`locale?`](#локализация)                        | `Locale`                            | `ruLocale`   | Локализация                                                       |
| [`currentVisibleDate?`](#какой-месяц-показывать) | `Date`                              | `new Date()` | Дата, которая входит в страницу календаря, которую нужно показать |
| [`onChange?`](#выбор-даты)                       | `DateTimePropOnChange`              | -            | Обработчик событий выбора даты                                    |
| [`onChangeRange?`](#выбор-даты)                  | `DateTimePropOnChangeRange`         | -            | Обработчик событий выбора диапазона дат                           |
| `ref?`                                           | `React.Ref<HTMLDivElement>`         | —            | Ссылка на корневой DOM-элемент компонента                         |
| `className?`                                     | `string`                            | —            | Дополнительные CSS-классы                                         |
