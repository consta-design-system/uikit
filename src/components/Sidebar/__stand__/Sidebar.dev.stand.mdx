import { MdxMenu, MdxTabs } from '@consta/stand';

import { ExampleSidebarSimple } from './examples/ExampleSidebarSimple/ExampleSidebarSimple';
import { ExampleSidebarPosition } from './examples/ExampleSidebarPosition/ExampleSidebarPosition';
import { ExampleSidebarSize } from './examples/ExampleSidebarSize/ExampleSidebarSize';
import { ExampleSidebarCustomSize } from './examples/ExampleSidebarCustomSize/ExampleSidebarCustomSize';
import { ExampleSidebarNoOverlay } from './examples/ExampleSidebarNoOverlay/ExampleSidebarNoOverlay';

<MdxMenu>

- [Обзор](#обзор)
- [Импорт](#импорт)
- [Свойства](#свойства)
- [Содержимое](#содержимое)
  - [Дочерние элементы](#дочерние-элементы)
- [Внешний вид](#внешний-вид)
  - [Расположение](#расположение)
  - [Размер](#размер)
  - [Подложка](#подложка)
- [Пример использования](#пример-использования)

</MdxMenu>

## Обзор

Компонент `Sidebar` предназначен для создания боковой панели, которая может размещаться с разных сторон экрана. Он поддерживает настройку размера, положения, подложки и обработку событий, таких как открытие, закрытие или клик за пределами панели.

## Импорт

```tsx
import { Sidebar } from '@consta/uikit/Sidebar';
```

## Свойства

| Свойство                          | Тип или варианты значения                                                  | По умолчанию           | Описание                                             |
| --------------------------------- | -------------------------------------------------------------------------- | ---------------------- | ---------------------------------------------------- |
| [`children?`](#дочерние-элементы) | `React.ReactNode`                                                          | -                      | Дочерние элементы, отображаемые внутри сайдбара      |
| [`position?`](#расположение)      | `'right' \| 'bottom' \| 'left' \| 'top'`                                   | `right`                | Расположение сайдбара на экране                      |
| [`size?`](#размер)                | `'s' \| 'm' \| 'l' \| 'full' \| '1/2' \| '1/3' \| '1/4' \| '2/3' \| '3/4'` | `m`                    | Размер сайдбара                                      |
| [`hasOverlay?`](#подложка)        | `boolean`                                                                  | `true`                 | Добавляет полупрозрачную подложку вокруг окна        |
| `isOpen?`                         | `boolean`                                                                  | -                      | Управляет видимостью сайдбара                        |
| `border?`                         | `boolean`                                                                  | -                      | Добавляет обводку                                    |
| `onClose?`                        | `() => void`                                                               | -                      | Действие при закрытии сайдбара                       |
| `onOpen?`                         | `() => void`                                                               | -                      | Действие при открытии сайдбара                       |
| `onClickOutside?`                 | `(e: MouseEvent) => void`                                                  | -                      | Действие при клике за пределами сайдбара             |
| `onEsc?`                          | `(e: KeyboardEvent) => void`                                               | -                      | Действие при нажатии клавиши **Escape**              |
| `afterClose?`                     | `() => void`                                                               | -                      | Действие после завершения анимации закрытия сайдбара |
| `className?`                      | `string`                                                                   | -                      | Дополнительный CSS-класс для окна                    |
| `rootClassName?`                  | `string`                                                                   | -                      | Дополнительный CSS-класс для корневого DOM-элемента  |
| `container?`                      | `HTMLElement \| React.RefObject<HTMLElement>`                              | `window.document.body` | Родительский контейнер для сайдбара                  |

## Содержимое

### Дочерние элементы

Свойство `children` определяет содержимое, которое отображается внутри сайдбара. Это могут быть любые React-компоненты или элементы. Для удобства, можно использовать компоненты [`ModalLayout`](##LIBS.LIB.STAND.TAB/lib:uikit/stand:components-modal-stable/tab:dev/hash:modallayout), [`ModalHeader`](##LIBS.LIB.STAND.TAB/lib:uikit/stand:components-modal-stable/tab:dev/hash:modalheader).

<MdxTabs>

<ExampleSidebarSimple />

```tsx
import React from 'react';
import { Button } from '@consta/uikit/Button';
import { ModalHeader, ModalLayout } from '@consta/uikit/Modal';
import { Text } from '@consta/uikit/Text';
import { useFlag } from '@consta/uikit/useFlag';
import { cnMixFlex } from '@consta/uikit/MixFlex';

import { Sidebar } from '@consta/uikit/Sidebar';

export const ExampleSidebarSimple = () => {
  const [open, setOpen] = useFlag();

  return (
    <>
      <Button
        size="m"
        view="primary"
        label="Открыть сайдбар"
        width="default"
        onClick={setOpen.on}
      />
      <Sidebar
        isOpen={open}
        onClickOutside={setOpen.off}
        onEsc={setOpen.off}
        style={{ zIndex: 2000 }}
        border
      >
        <ModalLayout border fixed space={{ p: 's' }}>
          {/* Шапка */}
          <ModalHeader>Заголовок сайдбара</ModalHeader>
          {/* Тело */}
          <Text as="p" size="m" view="primary" lineHeight="m">
            Это содержимое сайдбара. Здесь может быть что угодно: текст,
            изображение, форма или таблица. Всё, что хочется вынести из
            контекста и показать поверх основной страницы.
          </Text>
          {/* Футер */}
          <div
            className={cnMixFlex({
              gap: 'xs',
              justify: 'flex-end',
            })}
          >
            <Button
              onClick={setOpen.off}
              size="m"
              view="primary"
              label="Кнопка"
              width="default"
            />
          </div>
        </ModalLayout>
      </Sidebar>
    </>
  );
};
```

</MdxTabs>

## Внешний вид

### Расположение

Свойство `position` определяет, с какой стороны экрана появится сайдбар. Доступные значения: `'right'`, `'left'`, `'top'`, `'bottom'`. По умолчанию используется `'right'`.

- При выборе `'right'` или `'left'` сайдбар растягивается на всю высоту экрана.
- При выборе `'top'` или `'bottom'` — на всю ширину.

<ExampleSidebarPosition />

### Размер

Свойство `size` задаёт ширину или высоту сайдбара в зависимости от его расположения. Доступны фиксированные размеры: `'s'`, `'m'`, `'l'`, и относительные: `'1/4'`, `'1/3'`, `'1/2'`, `'2/3'`, `'3/4'`, `'full'`. По умолчанию — `'m'`.

<MdxTabs>

<ExampleSidebarSize />

```tsx
import React from 'react';
import { Button } from '@consta/uikit/Button';
import { ModalHeader, ModalLayout } from '@consta/uikit/Modal';
import { Text } from '@consta/uikit/Text';
import { useFlag } from '@consta/uikit/useFlag';
import { cnMixFlex } from '@consta/uikit/MixFlex';

import { Sidebar } from '@consta/uikit/Sidebar';

export const ExampleSidebarSize = () => {
  const [open, setOpen] = useFlag();

  return (
    <>
      <Button
        size="m"
        view="primary"
        label="Открыть сайдбар"
        width="default"
        onClick={setOpen.on}
      />
      <Sidebar
        isOpen={open}
        onClickOutside={setOpen.off}
        onEsc={setOpen.off}
        style={{ zIndex: 2000 }}
        size="2/3"
        border
      >
        <ModalLayout border fixed space={{ p: 's' }}>
          {/* Шапка */}
          <ModalHeader>Заголовок сайдбара</ModalHeader>
          {/* Тело */}
          <Text as="p" size="m" view="primary" lineHeight="m">
            Это содержимое сайдбара. Здесь может быть что угодно: текст,
            изображение, форма или таблица. Всё, что хочется вынести из
            контекста и показать поверх основной страницы.
          </Text>
          {/* Футер */}
          <div
            className={cnMixFlex({
              gap: 'xs',
              justify: 'flex-end',
            })}
          >
            <Button
              onClick={setOpen.off}
              size="m"
              view="primary"
              label="Кнопка"
              width="default"
            />
          </div>
        </ModalLayout>
      </Sidebar>
    </>
  );
};
```

</MdxTabs>

Для указания произвольного размера укажите `size="none"`, что отключит стили размера у компонента, и воспользуйтесь css переменной `--sidebar-size`.

<MdxTabs>

<ExampleSidebarCustomSize />

```tsx
import React from 'react';
import { Button } from '@consta/uikit/Button';
import { ModalHeader, ModalLayout } from '@consta/uikit/Modal';
import { Text } from '@consta/uikit/Text';
import { useFlag } from '@consta/uikit/useFlag';
import { cnMixFlex } from '@consta/uikit/MixFlex';

import { Sidebar } from '@consta/uikit/Sidebar';

export const ExampleSidebarCustomSize = () => {
  const [open, setOpen] = useFlag();

  return (
    <>
      <Button
        size="m"
        view="primary"
        label="Открыть сайдбар"
        width="default"
        onClick={setOpen.on}
      />
      <Sidebar
        isOpen={open}
        onClickOutside={setOpen.off}
        onEsc={setOpen.off}
        style={{ zIndex: 2000 }}
        size="none"
        border
        className="ExampleSidebarCustomSize"
      >
        <ModalLayout border fixed space={{ p: 's' }}>
          {/* Шапка */}
          <ModalHeader>Заголовок сайдбара</ModalHeader>
          {/* Тело */}
          <Text as="p" size="m" view="primary" lineHeight="m">
            Это содержимое сайдбара. Здесь может быть что угодно: текст,
            изображение, форма или таблица. Всё, что хочется вынести из
            контекста и показать поверх основной страницы.
          </Text>
          {/* Футер */}
          <div
            className={cnMixFlex({
              gap: 'xs',
              justify: 'flex-end',
            })}
          >
            <Button
              onClick={setOpen.off}
              size="m"
              view="primary"
              label="Кнопка"
              width="default"
            />
          </div>
        </ModalLayout>
      </Sidebar>
    </>
  );
};
```

```css
.ExampleSidebarCustomSize {
  --sidebar-size: 200px;
}
```

</MdxTabs>

### Подложка

Свойство `hasOverlay` управляет отображением полупрозрачной подложки, которая покрывает основную страницу при открытом сайдбаре. По умолчанию подложка включена (`true`). Чтобы убрать подложку, установите `hasOverlay={false}`.

<MdxTabs>

<ExampleSidebarNoOverlay />

```tsx
import React from 'react';
import { Button } from '@consta/uikit/Button';
import { ModalHeader, ModalLayout } from '@consta/uikit/Modal';
import { Text } from '@consta/uikit/Text';
import { useFlag } from '@consta/uikit/useFlag';
import { cnMixFlex } from '@consta/uikit/MixFlex';

import { Sidebar } from '@consta/uikit/Sidebar';

export const ExampleSidebarNoOverlay = () => {
  const [open, setOpen] = useFlag();

  return (
    <>
      <Example>
        <Button
          size="m"
          view="primary"
          label="Открыть сайдбар"
          width="default"
          onClick={setOpen.on}
        />
      </Example>
      <Sidebar
        isOpen={open}
        onClickOutside={setOpen.off}
        onEsc={setOpen.off}
        style={{ zIndex: 2000 }}
        hasOverlay={false}
        border
      >
        <ModalLayout border fixed space={{ p: 's' }}>
          {/* Шапка */}
          <ModalHeader>Заголовок сайдбара</ModalHeader>
          {/* Тело */}
          <Text as="p" size="m" view="primary" lineHeight="m">
            Это содержимое сайдбара. Здесь может быть что угодно: текст,
            изображение, форма или таблица. Всё, что хочется вынести из
            контекста и показать поверх основной страницы.
          </Text>
          {/* Футер */}
          <div
            className={cnMixFlex({
              gap: 'xs',
              justify: 'flex-end',
            })}
          >
            <Button
              onClick={setOpen.off}
              size="m"
              view="primary"
              label="Кнопка"
              width="default"
            />
          </div>
        </ModalLayout>
      </Sidebar>
    </>
  );
};
```

</MdxTabs>
