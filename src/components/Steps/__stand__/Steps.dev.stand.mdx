import { MdxMenu, MdxInformer, MdxTabs } from '@consta/stand';
import { ExampleStepsValue } from './examples/ExampleStepsValue/ExampleStepsValue';
import { ExampleStepsDisabled } from './examples/ExampleStepsDisabled/ExampleStepsDisabled';
import { ExampleStepsCompleted } from './examples/ExampleStepsCompleted/ExampleStepsCompleted';
import { ExampleStepsSkipped } from './examples/ExampleStepsSkipped/ExampleStepsSkipped';
import { ExampleStepsContent } from './examples/ExampleStepsContent/ExampleStepsContent';
import { ExampleStepsSize } from './examples/ExampleStepsSize/ExampleStepsSize';
import { ExampleStepsAdaptive } from './examples/ExampleStepsAdaptive/ExampleStepsAdaptive';

<MdxMenu>

- [Обзор](#обзор)
- [Импорт](#импорт)
- [Свойства](#свойства)
- [Содержимое](#содержимое)
  - [Активный шаг](#активный-шаг)
  - [Недоступные шаги](#недоступные-шаги)
  - [Пройденные шаги](#пройденные-шаги)
  - [Пропущенные шаги](#пропущенные-шаги)
- [Внешний вид](#внешний-вид)
  - [Размер](#размер)
  - [Адаптивность](#адаптивность)
- [Пример использования](#пример-использования)

</MdxMenu>

## Обзор

Компонент `Steps` предназначен для отображения последовательности шагов, например, в форме пошагового процесса или навигации. Он позволяет пользователю видеть текущий прогресс, переключаться между шагами и понимать, какие шаги уже завершены, недоступны или пропущены. Компонент поддерживает настройку внешнего вида, адаптивность и взаимодействие с пользователем.

<MdxInformer status="warning">

Не рекомендуем делать больше 5 шагов.

</MdxInformer>

## Импорт

```tsx
import { Steps } from '@consta/uikit/Steps';
```

## Свойства

| Свойство                                | Тип                     | По умолчанию | Описание                                                                             |
| --------------------------------------- | ----------------------- | ------------ | ------------------------------------------------------------------------------------ |
| [`items`](#шаги)                        | `Item[]`                | -            | Массив с шагами                                                                      |
| [`value`](#активный-шаг)                | `Item`                  | -            | Текущий активный шаг                                                                 |
| [`getItemLabel`](#шаги)                 | `StepsPropGetLabel`     | -            | Получает название для шага. Также используется в качестве уникального ключа элемента |
| [`getItemDisabled?`](#недоступные-шаги) | `StepsPropGetDisabled`  | -            | Определяет, является ли шаг недоступным                                              |
| [`getItemCompleted?`](#пройденные-шаги) | `StepsPropGetCompleted` | -            | Определяет, является ли шаг завершенным                                              |
| [`getItemSkipped?`](#пропущенные-шаги)  | `StepsPropGetSkipped`   | -            | Определяет, является ли шаг пропущенным                                              |
| [`onChange?`](#активный-шаг)            | `StepsPropOnChange`     | -            | Обрабатывает переключение шагов                                                      |
| [`size?`](#размер)                      | `'s' \| 'm' \| 'l'`     | `'m'`        | Размер элементов компонента                                                          |
| `className?`                            | `string`                | -            | Дополнительные CSS-классы для компонента                                             |

## Содержимое

### Шаги

Данные для отображения шагов задаются в массиве `items`. Названия шагов получаются с помощью функции `getItemLabel`, которая также используется для создания уникального ключа элемента.

### Активный шаг

Активный шаг — это текущий шаг, в котором находится пользователь. За него отвечает свойство `value`.

<MdxTabs>

<ExampleStepsValue />

```tsx
type Item = string;

const items: Item[] = ['Главное', 'Важное', 'Необязательное'];

<Steps items={items} value={items[1]} getItemLabel={(item) => item} />;
```

</MdxTabs>

### Недоступные шаги

Недоступные шаги — это шаги, которые пока нельзя пройти (например, до завершения предыдущего шага). Они выделяются цветом и определяются функцией `getItemDisabled`.

<MdxTabs>

<ExampleStepsDisabled />

```tsx
type Item = {
  label: string;
  disabled?: boolean;
};

const items: Item[] = [
  {
    label: 'Главное',
  },
  {
    label: 'Важное',
    disabled: true,
  },
  {
    label: 'Необязательное',
  },
];

<Steps
  items={items}
  getItemDisabled={(item) => item.disabled}
  value={items[2]}
  onChange={emptyFunction}
/>;
```

</MdxTabs>

### Пройденные шаги

Пройденные шаги — это шаги, которые пользователь завершил (например, заполнил все обязательные поля). Они выделяются цветом и иконкой `IconCheck`. Определяются функцией `getItemCompleted`.

<MdxTabs>

<ExampleStepsCompleted />

```tsx
type Item = {
  label: string;
  finish?: boolean;
};

const items: Item[] = [
  {
    label: 'Главное',
    finish: true,
  },
  {
    label: 'Важное',
  },
  {
    label: 'Необязательное',
  },
];

<Steps
  items={items}
  getItemCompleted={(item) => item.finish}
  value={items[1]}
  onChange={emptyFunction}
/>;
```

</MdxTabs>

### Пропущенные шаги

Пропущенные шаги — это шаги, на которых пользователь побывал, но не завершил их (например, не заполнил поля). Они выделяются цветом и определяются функцией `getItemSkipped`.

<MdxTabs>

<ExampleStepsSkipped />

```tsx
type Item = {
  label: string;
  skip?: boolean;
};

const items: Item[] = [
  {
    label: 'Главное',
    skip: true,
  },
  {
    label: 'Важное',
  },
  {
    label: 'Необязательное',
  },
];

<Steps
  items={items}
  getItemSkipped={(item) => item.skip}
  value={items[1]}
  onChange={emptyFunction}
/>;
```

</MdxTabs>

## Внешний вид

### Размер

Размер компонента задается свойством `size`. Доступные значения: `'s'`, `'m'`, `'l'`. По умолчанию используется `'m'`.

<MdxTabs>

<ExampleStepsSize />

```tsx
export const Items: string[] = ['Главное', 'Важное', 'Необязательное'];

<Steps size="s" items={items} getItemLabel={(item) => item} value={items[1]} />;
<Steps size="m" items={items} getItemLabel={(item) => item} value={items[1]} />;
<Steps size="l" items={items} getItemLabel={(item) => item} value={items[1]} />;
```

</MdxTabs>

### Адаптивность

На мобильных и компактных экранах компонент занимает всю доступную ширину. Если шаги не помещаются, появляется горизонтальная прокрутка. Прокручивать шаги можно с помощью кнопок или свайпов (на мобильных устройствах).

<MdxTabs>

<ExampleStepsAdaptive />

</MdxTabs>

## Пример использования

Компонент `Steps` можно разместить в любом месте страницы и комбинировать с другими элементами, такими как формы, кнопки или текст. Например, можно добавить кнопки «Вперёд» и «Назад» для переключения шагов.

```tsx
export const Items: string[] = ['Главное', 'Важное', 'Необязательное'];

const getContent = (index: number) => `Контент на шаге №${index + 1}`;
const getLabel = (item: string) => item;

export const ExampleStepsContent = () => {
  const [activeStep, setActiveStep] = useState<string>(items[0]);

  const activeStepIndex = items.findIndex((item) => item === activeStep);

  const handleNext = () => setActiveStep(items[activeStepIndex + 1]);
  const handlePrev = () => setActiveStep(items[activeStepIndex - 1]);

  return (
    <>
      <Steps
        items={items}
        getItemLabel={getLabel}
        value={activeStep}
        onChange={setActiveStep}
      />
      <div>{getContent(activeStepIndex)}</div>
      <Button
        label="Предыдущий"
        onClick={handlePrev}
        disabled={activeStepIndex === 0}
      />
      <Button
        label="Следующий"
        onClick={handleNext}
        disabled={activeStepIndex === items.length - 1}
      />
    </>
  );
};
```

<ExampleStepsContent />
