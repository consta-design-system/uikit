import { MdxMenu, MdxTabs } from '@consta/stand';

import {
  CollapseGroupExampleSimple,
  CollapseGroupExampleSimple2,
} from './examples/CollapseGroupExampleSimple/CollapseGroupExampleSimple';
import { CollapseGroupExampleIsAccordion } from './examples/CollapseGroupExampleIsAccordion/CollapseGroupExampleIsAccordion';
import { CollapseGroupExampleOwnType } from './examples/CollapseGroupExampleOwnType/CollapseGroupExampleOwnType';
import { CollapseGroupExampleControl } from './examples/CollapseGroupExampleControl/CollapseGroupExampleControl';

<MdxMenu>

- [Обзор](#обзор)
- [Импорт](#импорт)
- [Свойства](#свойства)
- [Содержимое](#содержимое)
  - [Блоки с информацией](#блоки-с-информацией)
  - [Кастомный тип данных](#кастомный-тип-данных)
- [Внешний вид](#внешний-вид)
  - [Размер](#размер)
  - [Внешний вид и иконки](#внешний-вид-и-иконки)
  - [Отступы и разделители](#отступы-и-разделители)
- [Поведение](#поведение)
  - [Обычный режим](#обычный-режим)
  - [Режим аккордеона](#режим-аккордеона)
  - [Кастомное поведение](#кастомное-поведение)
- [Пример использования](#пример-использования)

</MdxMenu>

## Обзор

Компонент `CollapseGroup` позволяет создавать группу раскрывающихся блоков (коллапсов). Каждый блок состоит из заголовка и содержимого, которое появляется при клике на заголовок. Компонент поддерживает настройку внешнего вида, поведения и кастомных данных. Он основан на компоненте [Collapse](##LIBS.LIB.STAND/lib:uikit/stand:components-collapse-stable) и наследует его возможности.

## Импорт

```tsx
import { CollapseGroup } from '@consta/uikit/CollapseGroup';
```

## Свойства

| Свойство                                       | Тип                                                                                                | По умолчанию              | Описание                                                           |
| ---------------------------------------------- | -------------------------------------------------------------------------------------------------- | ------------------------- | ------------------------------------------------------------------ |
| [`items`](#блоки-с-информацией)                | `Item[]`                                                                                           | -                         | Массив элементов коллапса                                          |
| [`getItemLabel`](#кастомный-тип-данных)        | `GetItemLabel<ITEM>`                                                                               | `defaultGetItemLabel`     | Функция для получения текста заголовка                             |
| [`getItemContent`](#кастомный-тип-данных)      | `GetItemContent<ITEM>`                                                                             | `defaultGetItemContent`   | Функция для получения содержимого коллапса                         |
| [`getItemRightSide`](#кастомный-тип-данных)    | `GetItemRightSide<ITEM>`                                                                           | `defaultGetItemRightSide` | Функция для получения дополнительного контента справа от заголовка |
| [`isAccordion`](#режим-аккордеона)             | `boolean`                                                                                          | -                         | Включает режим аккордеона (только один блок открыт одновременно)   |
| [`size?`](#размер)                             | `'l' \| 'm' \| 's' \| 'xs' \| '2xs'`                                                               | `'m'`                     | Размер коллапса                                                    |
| [`view?`](#внешний-вид-и-иконки)               | `'primary' \| 'secondary'`                                                                         | `'primary'`               | Внешний вид коллапса                                               |
| [`iconView?`](#внешний-вид-и-иконки)           | `'clear' \| 'ghost'`                                                                               | `'clear'`                 | Внешний вид иконки                                                 |
| [`icon?`](#внешний-вид-и-иконки)               | `IconComponent`                                                                                    | `IconComponent`           | Иконка в закрытом состоянии                                        |
| [`closeIcon?`](#внешний-вид-и-иконки)          | `IconComponent`                                                                                    | -                         | Иконка в открытом состоянии                                        |
| [`iconPosition?`](#внешний-вид-и-иконки)       | `'left' \| 'right'`                                                                                | `'left'`                  | Расположение иконки                                                |
| [`directionIcon?`](#внешний-вид-и-иконки)      | `'up' \| 'right' \| 'down' \| 'left' \| 'upRight' \| 'downRight' \| 'upLeft' \| 'downLeft'`        | `'up'`                    | Направление иконки в закрытом состоянии                            |
| [`closeDirectionIcon?`](#внешний-вид-и-иконки) | `'up' \| 'right' \| 'down' \| 'left' \| 'upRight' \| 'downRight' \| 'upLeft' \| 'downLeft'`        | `'down'`                  | Направление иконки в открытом состоянии                            |
| [`hoverEffect?`](#внешний-вид-и-иконки)        | `boolean`                                                                                          | -                         | Подсвечивает заголовок при наведении                               |
| [`divider?`](#отступы-и-разделители)           | `boolean`                                                                                          | -                         | Добавляет разделитель между заголовком и содержимым                |
| [`horizontalSpace?`](#отступы-и-разделители)   | `'6xl' \| '5xl' \| '4xl' \| '3xl' \| '2xl' \| 'xl' \| 'l' \| 'm' \| 's' \| 'xs' \| '2xs' \| '3xs'` | -                         | Устанавливает боковые отступы                                      |
| [`onOpen?`](#кастомное-поведение)              | `OnOpen<IS_ACCORDION>`                                                                             | -                         | Функция обратного вызова при клике на коллапс                      |
| [`opened?`](#кастомное-поведение)              | `Opened<IS_ACCORDION>`                                                                             | -                         | Индексы открытых коллапсов                                         |
| `className?`                                   | `string`                                                                                           | -                         | Дополнительный CSS-класс                                           |

## Содержимое

### Блоки с информацией

Содержимое коллапсов задаётся через массив `items`. По умолчанию используется тип `DefaultItem`, который включает:

- `label` — заголовок блока (пишите с заглавной буквы, без точки в конце).
- `content` — содержимое, отображаемое при раскрытии блока (может быть любым React-компонентом).
- `rightSide` — дополнительный элемент справа от заголовка (например, иконка или текст).

<MdxTabs>

<CollapseGroupExampleSimple2 />

```tsx
<>
  <CollapseGroup items={[
    {
      label: 'Пункт раз',
      content: 'Содержимое блока раз',
      rightSide: 'Я справа',
    },
    {
      label: 'Пункт два',
      content: 'Содержимое блока два',
      rightSide: 'Я тоже справа',
    },
    {
      label: 'Пункт три',
      content: 'Содержимое блока три',
 .     rightSide: 'И я :)',
    },
  ]} />
</>
```

</MdxTabs>

### Кастомный тип данных

Если нужно использовать собственный тип данных для `items`, определите его и укажите функции-геттеры: `getItemLabel`, `getItemContent`, `getItemRightSide`. Они указывают, какие поля объекта использовать для заголовка, содержимого и дополнительного элемента справа.

<MdxTabs>

<CollapseGroupExampleOwnType />

```tsx
<>
  <CollapseGroup
    items={[
      {
        title: 'Во-первых',
        text: 'Здесь ошибка. Кажется, с этим пунктом что-то не так: например, пользователь неправильно заполнил форму или не ответил на какой-то вопрос.',
        status: 'error',
      },
      {
        title: 'Во-вторых',
        text: 'Здесь всё в порядке. Скорее всего, здесь всё сделано и можно больше не открывать.',
        status: 'success',
      },
 }^0-2
      {
        title: 'В-третьих',
        text: 'Это не пройдено. Нужно открыть и посмотреть, что здесь нужно прочитать, посмотреть или заполнить.',
        status: 'system',
      },
    ]}
    getItemLabel={(item) => item.title}
    getItemContent={(item) => item.text}
    getItemRightSide={(item) => (
      <Badge size="s" status={item.status} label={item.status} />
    )}
  />
</>
```

</MdxTabs>

## Внешний вид

### Размер

Свойство `size` задаёт размер коллапса. Возможные значения: `'2xs'`, `'xs'`, `'s'`, `'m'`, `'l'`. По умолчанию — `'m'`.

### Внешний вид и иконки

- `view` — задаёт стиль коллапса: `'primary'` (по умолчанию) или `'secondary'`.
- `iconView` — стиль иконки: `'clear'` (по умолчанию) или `'ghost'`.
- `icon` — иконка в закрытом состоянии.
- `closeIcon` — иконка в открытом состоянии.
- `iconPosition` — расположение иконки: `'left'` (по умолчанию) или `'right'`.
- `directionIcon` — направление иконки в закрытом состоянии: `'up'` (по умолчанию), `'right'`, `'down'`, `'left'`, `'upRight'`, `'downRight'`, `'upLeft'`, `'downLeft'`.
- `closeDirectionIcon` — направление иконки в открытом состоянии: `'down'` (по умолчанию) или другие значения, аналогичные `directionIcon`.
- `hoverEffect` — включает подсветку заголовка при наведении курсора.

Подробности см. в документации [Collapse](##LIBS.LIB.STAND/lib:uikit/stand:components-collapse-stable).

### Отступы и разделители

- `horizontalSpace` — задаёт боковые отступы. Возможные значения: `'6xl'`, `'5xl'`, `'4xl'`, `'3xl'`, `'2xl'`, `'xl'`, `'l'`, `'m'`, `'s'`, `'xs'`, `'2xs'`, `'3xs'`.
- `divider` — добавляет разделитель между заголовком и содержимым.

## Поведение

### Обычный режим

По умолчанию каждый блок раскрывается или закрывается независимо при клике на заголовок.

<MdxTabs>

<CollapseGroupExampleSimple />

```tsx
<>
  <CollapseGroup
    items={[
      {
        label: 'Пункт раз',
        content: 'Содержимое блока раз',
        rightSide: 'Я справа',
      },
      {
        label: 'Пункт два',
        content: 'Содержимое блока два',
        rightSide: 'Я тоже справа',
      },
      {
        label: 'Пункт три',
        content: 'Содержимое блока три',
        rightSide: 'И я :)',
      },
    ]}
  />
</>
```

</MdxTabs>

### Режим аккордеона

Включите свойство `isAccordion`, чтобы в один момент времени был открыт только один блок. Открытие нового блока автоматически закрывает ранее открытый.

<MdxTabs>

<CollapseGroupExampleIsAccordion />

```tsx
<>
  <CollapseGroup
    isAccordion
    items={[
      {
        label: 'Пункт раз',
        content: 'Содержимое блока раз',
      },
      {
        label: 'Пункт два',
        content: 'Содержимое блока два',
      },
      {
        label: 'Пункт три',
        content: 'Содержимое блока три',
      },
    ]}
  />
</>
```

</MdxTabs>

### Кастомное поведение

Для нестандартного поведения используйте свойства `onOpen` и `opened`. `onOpen` вызывается при клике на коллапс, а `opened` задаёт индексы открытых блоков (`number[]` в обычном режиме, `number` в режиме аккордеона).

<MdxTabs>

<CollapseGroupExampleControl />

```tsx
<>
  <CollapseGroup
    items={[
      {
        label: 'Пункт раз',
        content: 'Содержимое блока раз',
      },
      {
        label: 'Пункт два',
        content: 'Содержимое блока два',
      },
      {
        label: 'Пункт три',
        content: 'Содержимое блока три',
      },
    ]}
    opened={[0, 1, 2]}
    onOpen={(params) => setOpened(params.value)}
  />
</>
```

</MdxTabs>

## Пример использования

```tsx
const items = [
  {
    label: 'Пункт раз',
    content: 'Содержимое блока раз',
    rightSide: 'Я справа',
  },
  {
    label: 'Пункт два',
    content: 'Содержимое блока два',
    rightSide: 'Я тоже справа',
  },
  {
    label: 'Пункт три',
    content: 'Содержимое блока три',
    rightSide: 'И я :)',
  },
];

const CollapseGroupExample = () => {
  return <CollapseGroup items={items} />;
};
```
