import { MdxMenu, MdxTabs, MdxInformer } from '@consta/stand';
import { ExampleStepsValue } from './examples/ExampleStepsValue/ExampleStepsValue';
import { ExampleStepsDisabled } from './examples/ExampleStepsDisabled/ExampleStepsDisabled';
import { ExampleStepsContent } from './examples/ExampleStepsContent/ExampleStepsContent';
import { ExampleStepsSize } from './examples/ExampleStepsSize/ExampleStepsSize';
import { ExampleStepsAdaptive } from './examples/ExampleStepsAdaptive/ExampleStepsAdaptive';
import { ExampleStepsIcon } from './examples/ExampleStepsIcon/ExampleStepsIcon';
import { ExampleStepsWithNumber } from './examples/ExampleStepsWithNumber/ExampleStepsWithNumber';
import { ExampleStepsStatus } from './examples/ExampleStepsStatus/ExampleStepsStatus';

<MdxMenu>

- [Обзор](#обзор)
- [Импорт](#импорт)
- [Свойства](#свойства)
- [Содержимое](#содержимое)
  - [Шаги](#шаги)
  - [Активный шаг](#активный-шаг)
  - [Номер шага](#номер-шага)
  - [Недоступные шаги](#недоступные-шаги)
  - [Иконка шага](#иконка-шага)
  - [Статус шага](#статус-шага)
- [Внешний вид](#внешний-вид)
  - [Размер](#размер)
  - [Адаптивность](#адаптивность)

</MdxMenu>

## Обзор

Компонент `Steps` предназначен для отображения последовательности шагов, например, в многоэтапных формах или процессах. Он позволяет пользователю видеть текущий этап, выполненные шаги и недоступные этапы. Компонент поддерживает настройку содержимого, внешнего вида и поведения шагов.

<MdxInformer status="warning">

Не рекомендуем делать больше 5 шагов.

</MdxInformer>

## Импорт

```tsx
import { Steps } from '@consta/uikit/StepsCanary';
```

## Свойства

| Свойство                               | Тип                                 | По умолчанию                 | Описание                                                                            |
| -------------------------------------- | ----------------------------------- | ---------------------------- | ----------------------------------------------------------------------------------- |
| [`items`](#шаги-и-их-описание)         | `Item[]`                            | -                            | Массив с шагами.                                                                    |
| [`value`](#активный-шаг)               | `Item`                              | -                            | Выбранный шаг.                                                                      |
| [`getItemLabel`](#шаги)                | `StepsPropGetItemLabel<ITEM>`       | `(item) => item.label`       | Определяет название шага. Также используется в качестве уникального ключа элемента. |
| [`getItemDescription`](#шаги)          | `StepsPropGetItemDescription<ITEM>` | `(item) => item.description` | Определяет описание шага.                                                           |
| [`getItemDisabled`](#недоступные-шаги) | `StepsPropGetItemDisabled<ITEM>`    | `(item) => item.disabled`    | Определяет флаг доступности шага.                                                   |
| [`getItemStatus`](#статус-шага)        | `StepsPropGetItemStatus<ITEM>`      | `(item) => item.status`      | Определяет статус шага.                                                             |
| [`getItemIcon`](#иконка-шага)          | `StepsPropGetItemIcon<ITEM>`        | `(item) => item.icon`        | Определяет иконку шага, отображается при включенном свойстве `withNumber`.          |
| [`size`](#размер)                      | `'s' \| 'm' \| 'l'`                 | `'m'`                        | Размер компонента.                                                                  |
| [`fitMode`](#адаптивность)             | `'scroll' \| 'scrollWithButtons'`   | `'scroll'`                   | Способ адаптации при нехватке места.                                                |
| [`withNumber`](#номер-шага)            | `boolean`                           | -                            | Показать номер шага.                                                                |
| `onChange`                             | `StepsPropOnChange`                 | -                            | Событие выбора шага.                                                                |
| `className`                            | `string`                            | -                            | Дополнительные CSS-классы для компонента.                                           |

```tsx
export type StepItemStatus = 'resolved' | 'error';

export type StepsPropGetItemLabel<ITEM> = (item: ITEM) => string;

export type StepsPropGetItemDescription<ITEM> = (
  item: ITEM,
) => string | undefined;

export type StepsPropGetItemDisabled<ITEM> = (
  item: ITEM,
) => boolean | undefined;

export type StepsPropGetItemStatus<ITEM> = (
  item: ITEM,
) => StepItemStatus | undefined;

export type StepsPropGetItemIcon<ITEM> = (
  item: ITEM,
) => IconComponent | undefined;

export type StepsItemDefault = {
  label: string;
  description?: string;
  disabled?: boolean;
  status?: StepItemStatus;
  icon?: IconComponent;
};
```

## Содержимое

### Шаги

Для отображения шагов используется массив `items`. Каждый шаг описывается объектом типа `StepsItemDefault`:

```tsx
type StepsItemDefault = {
  label: string;
  description?: string;
  disabled?: boolean;
  status?: 'resolved' | 'error';
  icon?: IconComponent;
};
```

- `label`: Название шага (обязательное поле).
- `description`: Описание шага (необязательное).
- `disabled`: Флаг, определяющий доступность шага.
- `status`: Статус шага (`resolved` или `error`).
- `icon`: Иконка шага, отображается при включенном свойстве `withNumber`.

Название шага задаётся с помощью функции `getItemLabel`, а описание — через `getItemDescription`. Если используется тип `StepsItemDefault`, компонент автоматически берёт значения из полей `label` и `description`. Для кастомных объектов можно указать свои функции для получения этих данных.

### Активный шаг

Свойство `value` определяет текущий активный шаг. При клике на шаг вызывается функция `onChange`, которая обновляет значение `value`.

<MdxTabs>

<ExampleStepsValue />

```tsx
import { Steps } from '@consta/uikit/StepsCanary';

const items: string[] = ['Главное', 'Важное', 'Необязательное'];

const getItemLabel = <T,>(item: T) => item;

const ExampleStepsValue = () => {
  const [value, setValue] = useState(items[0]);

  return (
    <Steps
      items={items}
      value={value}
      getItemLabel={getItemLabel}
      onChange={setValue}
    />
  );
};
```

</MdxTabs>

### Номер шага

Свойство `withNumber` включает отображение порядкового номера шага. Используется для наглядного обозначения последовательности.

<MdxTabs>

<ExampleStepsWithNumber />

```tsx
import { Steps } from '@consta/uikit/StepsCanary';

const items: string[] = ['Главное', 'Важное', 'Необязательное'];

const getItemLabel = <T,>(item: T) => item;

const ExampleStepsValue = () => {
  const [value, setValue] = useState(items[0]);

  return (
    <Steps
      items={items}
      value={value}
      getItemLabel={getItemLabel}
      onChange={setValue}
      withNumber
    />
  );
};
```

</MdxTabs>

### Недоступные шаги

Свойство `disabled` или функция `getItemDisabled` определяют, какие шаги недоступны для выбора. Недоступные шаги отображаются в неактивном состоянии и не реагируют на клики.

<MdxTabs>

<ExampleStepsDisabled />

```tsx
type Item = {
  label: string;
  disabled?: boolean;
};

const items: Item[] = [
  {
    label: 'Главное',
  },
  {
    label: 'Важное',
    disabled: true,
  },
  {
    label: 'Необязательное',
  },
];

export const ExampleStepsDisabled = () => {
  const [value, setValue] = useState(items[0]);

  return <Steps items={items} value={value} onChange={setValue} />;
};
```

</MdxTabs>

### Иконка шага

Иконка шага задаётся через свойство `icon` или функцию `getItemIcon`. Иконка отображается вместо номера шага, если включено свойство `withNumber`.

<MdxTabs>

<ExampleStepsIcon />

```tsx
export const items: StepsItemDefault[] = [
  {
    label: 'Планирование',
    icon: IconCalendar,
  },
  {
    label: 'Расчет средств',
    icon: IconCalculator,
  },
  {
    label: 'Разработка',
    icon: IconWrench,
  },
  {
    label: 'Итог',
    icon: IconFlagFilled,
  },
];

export const ExampleStepsIcon = () => {
  const [value, setValue] = useState(items[0]);

  return <Steps items={items} value={value} onChange={setValue} withNumber />;
};
```

</MdxTabs>

### Статус шага

Свойство `status` или функция `getItemStatus` задают статус шага: `resolved` (выполнен) или `error` (ошибка). Для улучшения восприятия рекомендуется использовать соответствующие иконки.

<MdxInformer status="success">

Рекомендуем помечать шаги со статусом соответствующими иконками.

</MdxInformer>

<MdxTabs>

<ExampleStepsStatus />

```tsx
export const items: StepsItemDefault[] = [
  {
    label: 'Главное',
    status: 'resolved',
    icon: IconCheck,
  },
  {
    label: 'Важное',
    status: 'error',
    icon: IconClose,
  },
  {
    label: 'Необязательное',
  },
];

export const ExampleStepsStatus = () => {
  const [value, setValue] = useState(items[1]);

  return <Steps items={items} value={value} onChange={setValue} withNumber />;
};
```

</MdxTabs>

## Внешний вид

### Размер

Свойство `size` задаёт размер компонента. Возможные значения: `'s'`, `'m'`, `'l'`. По умолчанию используется `'m'`.

<MdxTabs>

<ExampleStepsSize />

```tsx
export const items: string[] = ['Главное', 'Важное', 'Необязательное'];

<Steps size="s" items={items} getItemLabel={(item) => item} value={items[1]} />;
<Steps size="m" items={items} getItemLabel={(item) => item} value={items[1]} />;
<Steps size="l" items={items} getItemLabel={(item) => item} value={items[1]} />;
```

</MdxTabs>

### Адаптивность

Свойство `fitMode` определяет поведение компонента при нехватке места. Возможные значения:

- `'scroll'`: шаги прокручиваются горизонтально.
- `'scrollWithButtons'`: добавляются кнопки для прокрутки.

Компонент автоматически заполняет всю ширину контейнера на мобильных устройствах.

<MdxTabs>

<ExampleStepsAdaptive />

```tsx
const getItemLabel = <T,>(item: T) => item;

export const ExampleStepsAdaptive = () => {
  const [value, setValue] = useState(steps[0]);

  return (
    <div style={{ maxWidth: 300 }}>
      <Steps
        items={steps}
        value={value}
        onChange={setValue}
        getItemLabel={getItemLabel}
        withNumber
        fitMode="scroll"
      />
      <Steps
        items={steps}
        onChange={setValue}
        value={value}
        getItemLabel={getItemLabel}
        withNumber
        fitMode="scrollWithButtons"
      />
    </div>
  );
};
```

</MdxTabs>
