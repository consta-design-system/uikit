import { MdxMenu, MdxTabs } from '@consta/stand';
import { LayoutExampleBasic } from './examples/LayoutExampleBasic/LayoutExampleBasic';
import {
  LayoutExampleDirectionRow,
  LayoutExampleDirectionColumn,
} from './examples/LayoutExampleDirection/LayoutExampleDirection';
import { LayoutExampleAnchor } from './examples/LayoutExampleAnchor/LayoutExampleAnchor';
import { LayoutExampleRowFixed } from './examples/LayoutExampleRowFixed/LayoutExampleRowFixed';

<MdxMenu>

- [Обзор](#обзор)
- [Импорт](#импорт)
- [Свойства](#свойства)
- [Содержимое](#содержимое)
  - [Блоки](#блоки)
- [Внешний вид](#внешний-вид)
  - [Расположение блоков](#расположение-блоков)
  - [Фиксация блоков](#фиксация-блоков)
  - [Прикрепление к якорю](#прикрепление-к-якорю)
- [Адаптивность](#адаптивность)
- [Пример использования](#пример)

</MdxMenu>

## Обзор

Компонент `Layout` используется для создания гибких макетов страницы. Он позволяет размещать блоки контента, задавать их размеры, расположение и фиксацию относительно друг друга или контейнера. Поддерживает вложенные структуры, что делает его универсальным инструментом для построения интерфейсов.

## Импорт

```tsx
import { Layout } from '@consta/uikit/Layout';
```

## Свойства

| Свойство                               | Тип или варианты значения      | По умолчанию | Описание                                                                                                                              |
| -------------------------------------- | ------------------------------ | ------------ | ------------------------------------------------------------------------------------------------------------------------------------- |
| [`flex?`](#блоки)                      | `string` \| `number`           | -            | Доля, которую занимает блок во флекс-контейнере                                                                                       |
| [`direction?`](#расположение-блоков)   | `'row'` \| `'column'`          | `'row'`      | Расположение блоков внутри компонента                                                                                                 |
| [`fixed?`](#фиксация-блоков)           | `boolean`                      | -            | Фиксирует блок внутри контейнера                                                                                                      |
| [`verticalAlign?`](#фиксация-блоков)   | `'top'` \| `'bottom'`          | `'top'`      | Фиксация по вертикали                                                                                                                 |
| [`horizontalAlign?`](#фиксация-блоков) | `'left'` \| `'right'`          | `'left'`     | Фиксация по горизонтали                                                                                                               |
| [`anchorRef?`](#прикрепление-к-якорю)  | `React.RefObject<HTMLElement>` | -            | Ссылка на элемент-якорь, см. [Popover](##LIBS.LIB.STAND.TAB/lib:uikit/stand:components-popover-stable/tab:dev/hash:по-элементу-якорю) |
| `scrollContainerRef?`                  | `React.RefObject<HTMLElement>` | -            | Контейнер прокрутки, внутри которого фиксируется блок                                                                                 |
| `smooth?`                              | `boolean`                      | `false`      | Более плавное отображение при прокрутке                                                                                               |
| `tabIndex?`                            | `number`                       | -            | Порядковый номер при переходе между элементами интерфейса по клавише **tab**                                                          |
| `as?`                                  | `React.ElementType`            | `div`        | HTML-тег для компонента                                                                                                               |
| `className?`                           | `string`                       | -            | Дополнительные CSS-классы                                                                                                             |

## Содержимое

### Блоки

Свойство `flex` определяет долю пространства, которую занимает блок в родительском контейнере. Используйте его для настройки пропорций вложенных блоков. Внутрь `Layout` можно помещать любые компоненты: текст, кнопки, карточки, таблицы или шапку.

<MdxTabs>

<LayoutExampleBasic />

```tsx
<>
  <Layout>
    <Layout flex={1}>
      <Text view="primary" size="m" lineHeight="m">
        Это первый блок
      </Text>
    </Layout>
    <Layout flex={2}>
      <Text view="primary" size="m" lineHeight="m">
        А это второй блок, он в два раза шире первого
      </Text>
    </Layout>
  </Layout>
</>
```

</MdxTabs>

## Внешний вид

### Расположение блоков

Свойство `direction` задаёт направление расположения блоков внутри компонента:

- `'row'` — блоки располагаются в строку, последовательно.

<MdxTabs>

<LayoutExampleDirectionRow />

```tsx
<>
  <Layout direction="row">
    <Layout flex={1}>
      <Text view="primary" size="m" lineHeight="m">
        Первый блок
      </Text>
    </Layout>
    <Layout flex={1}>
      <Text view="primary" size="m" lineHeight="m">
        Второй блок
      </Text>
    </Layout>
  </Layout>
</>
```

</MdxTabs>

- `'column'` — блоки располагаются в столбец, друг под другом.

<MdxTabs>

<LayoutExampleDirectionColumn />

```tsx
<>
  <Layout direction="column">
    <Layout flex={1}>
      <Text view="primary" size="m" lineHeight="m">
        Первый блок
      </Text>
    </Layout>
    <Layout flex={1}>
      <Text view="primary" size="m" lineHeight="m">
        Второй блок
      </Text>
    </Layout>
  </Layout>
</>
```

</MdxTabs>

### Фиксация блоков

Свойство `fixed` позволяет зафиксировать блок внутри контейнера. Для настройки положения используются свойства:

- `verticalAlign`: фиксирует блок по вертикали:
  - `'top'` — по верхнему краю (по умолчанию).
  - `'bottom'` — по нижнему краю.
- `horizontalAlign`: фиксирует блок по горизонтали:
  - `'left'` — по левому краю (по умолчанию).
  - `'right'` — по правому краю.

### Прикрепление к якорю

Для прикрепления блока к другому используйте:

1. Свойство `fixed` и `ref` для блока, который нужно зафиксировать.
2. Свойство `anchorRef` в блоке-якоре, ссылающееся на зафиксированный блок.
3. Свойство `scrollContainerRef` для указания контейнера прокрутки.

```tsx
import { Layout } from '@consta/uikit/Layout';

export const LayoutExampleAnchor = () => {
  const scrollContainerRef = useRef(null);
  const fixedRef = useRef(null);

  return (
    <Layout direction="column" ref={scrollContainerRef}>
      <Layout>
        <Text view="primary" size="m" lineHeight="m">
          Заголовок
        </Text>
      </Layout>
      <Layout direction="column">
        <Layout
          ref={fixedRef}
          fixed
          scrollContainerRef={scrollContainerRef}
          verticalAlign="top"
        >
          <Text view="primary" size="m" lineHeight="m">
            Фиксированный элемент
          </Text>
        </Layout>
        <Layout>
          <Text view="primary" size="m" lineHeight="m">
            Контент
          </Text>
        </Layout>
        <Layout
          fixed
          scrollContainerRef={scrollContainerRef}
          verticalAlign="bottom"
          anchorRef={fixedRef}
        >
          <Text view="primary" size="m" lineHeight="m">
            Фиксированный элемент
          </Text>
        </Layout>
        <Layout>
          <Text view="primary" size="m" lineHeight="m">
            Контент
          </Text>
        </Layout>
      </Layout>
    </Layout>
  );
};
```

## Адаптивность

Компонент `Layout` не адаптируется к ширине экрана автоматически. Для поддержки планшетов и мобильных устройств дизайнер должен предусмотреть, как структура страницы меняется при изменении ширины экрана.
