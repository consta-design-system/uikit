import { MdxMenu, MdxTabs } from '@consta/stand';

import { ListExampleItems } from './examples/ListExampleItems/ListExampleItems';
import { ListExampleSize } from './examples/ListExampleSize/ListExampleSize';
import { ListExampleInnerOffset } from './examples/ListExampleInnerOffset/ListExampleInnerOffset';
import { ListExampleDisabled } from './examples/ListExampleDisabled/ListExampleDisabled';
import { ListExampleGroups } from './examples/ListExampleGroups/ListExampleGroups';
import { ListExampleRenderItem } from './examples/ListExampleRenderItem/ListExampleRenderItem';
import { ListExampleCustomTypes } from './examples/ListExampleCustomTypes/ListExampleCustomTypes';
import { ListExampleDisabledItem } from './examples/ListExampleDisabledItem/ListExampleDisabledItem';
import { ListItemExample } from './examples/ListItemExample/ListItemExample';
import { ListGroupLabelExample } from './examples/ListGroupLabelExample/ListGroupLabelExample';
import { ListAddItemExample } from './examples/ListAddItemExample/ListAddItemExample';
import { ListLoaderExample } from './examples/ListLoaderExample/ListLoaderExample';
import { ListExampleChecked } from './examples/ListExampleChecked/ListExampleChecked';
import { ListExampleAdditionalElements } from './examples/ListExampleAdditionalElements/ListExampleAdditionalElements';
import { ListExampleSpace } from './examples/ListExampleSpace/ListExampleSpace';
import { ListExampleAdditionalClassName } from './examples/ListExampleAdditionalClassName/ListExampleAdditionalClassName';
import { ListExampleListBox } from './examples/ListExampleListBox/ListExampleListBox';

<MdxMenu>

- [Обзор](#обзор)
- [Импорт](#импорт)
- [Свойства](#свойства)
- [Содержимое](#содержимое)
  - [Элементы списка](#элементы-списка)
  - [Неактивный элемент списка](#неактивный-элемент-списка)
  - [Выбранный элемент списка](#выбранный-элемент-списка)
  - [Дополнительные элементы](#дополнительные-элементы)
  - [Группировка](#группировка)
- [Внешний вид](#внешний-вид)
  - [Размер](#размер)
  - [Отступы](#отступы)
- [Поведение](#поведение)
  - [Неактивный список](#неактивный-список)
- [Кастомизация](#кастомизация)
  - [Кастомный элемент списка](#кастомный-элемент-списка)
  - [Кастомные типы данных](#кастомные-типы-данных)
  - [Кастомные отступы](#кастомные-отступы)
  - [Дополнительный класс](#дополнительный-класс)
- [Дополнительные компоненты](#дополнительные-компоненты)
  - [Элемент списка (ListItem)](#элемент-списка-listitem)
  - [Индикатор загрузки (ListLoader)](#индикатор-загрузки-listloader)
  - [Заголовок группы (ListGroupLabel)](#заголовок-группы-listgrouplabel)
  - [Компонент для добавления элемента (ListAddItem)](#компонент-для-добавления-элемента-listadditem)
  - [Коробка (ListBox)](#коробка-listbox)

</MdxMenu>

## Обзор

Компонент `List` представляет собой универсальный список, который можно использовать для отображения элементов с возможностью группировки, кастомизации и интерактивного взаимодействия. Он поддерживает настройку содержимого, внешнего вида и поведения, включая иконки, отступы, состояния элементов и кастомные типы данных. Компонент также предоставляет дополнительные элементы, такие как `ListItem`, `ListLoader`, `ListGroupLabel`, `ListAddItem` и `ListBox` для создания гибких интерфейсов.

## Импорт

```tsx
import { List } from '@consta/uikit/ListCanary';
```

## Свойства

| Свойство                                               | Тип или варианты значения                              | По умолчани ю                | Описание                                     |
| ------------------------------------------------------ | ------------------------------------------------------ | ---------------------------- | -------------------------------------------- |
| [`items`](#элементы-списка)                            | `ITEM[]`                                               | -                            | Массив элементов списка                      |
| [`groups?`](#группировка)                              | `GROUP[]`                                              | -                            | Массив групп для элементов                   |
| [`size?`](#размер)                                     | `'xs'`, `'s'`, `'m'`, `'l'`                            | `'m'`                        | Размер компонента                            |
| [`innerOffset?`](#отступы)                             | `'increased'`, `'normal'`                              | `'normal'`                   | Внутренние отступы элементов                 |
| [`disabled?`](#неактивный-список)                      | `boolean`                                              | -                            | Делает весь список неактивным                |
| [`onItemClick?`](#выбранный-элемент-списка)            | `ListPropOnItemClick<ITEM>`                            | -                            | Обработчик клика по элементу                 |
| [`renderItem?`](#кастомный-элемент-списка)             | `ListPropRenderItem<ITEM>`                             | рендер по умолчанию          | Функция рендера элемента списка              |
| [`getItemLabel?`](#кастомные-типы-данных)              | `ListPropGetItemLabel<ITEM>`                           | `(item) => item.label`       | Определяет название элемента                 |
| [`getItemKey?`](#кастомные-типы-данных)                | `ListPropGetItemKey<ITEM>`                             | `(item) => item.id`          | Определяет уникальный ключ элемента          |
| [`getItemGroupKey?`](#кастомные-типы-данных)           | `ListPropGetItemGroupKey<ITEM>`                        | `(item) => item.groupId`     | Определяет ключ группы для элемента          |
| [`getItemDisabled?`](#кастомные-типы-данных)           | `ListPropGetItemDisabled<ITEM>`                        | `(item) => item.disabled`    | Определяет состояние `disabled` для элемента |
| [`getItemLeftIcon?`](#кастомные-типы-данных)           | `ListPropGetItemLeftIcon<ITEM>`                        | `(item) => item.leftIcon`    | Определяет иконку слева от элемента          |
| [`getItemLeftSide?`](#кастомные-типы-данных)           | `ListPropGetItemLeftSide<ITEM>`                        | `(item) => item.leftSide`    | Определяет контент слева от элемента         |
| [`getItemRightIcon?`](#кастомные-типы-данных)          | `ListPropGetItemRightIcon<ITEM>`                       | `(item) => item.rightIcon`   | Определяет иконку справа от элемента         |
| [`getItemRightSide?`](#кастомные-типы-данных)          | `ListPropGetItemRightSide<ITEM>`                       | `(item) => item.rightSide`   | Определяет контент справа от элемента        |
| [`getItemOnClick?`](#кастомные-типы-данных)            | `ListPropGetItemOnClick<ITEM>`                         | `(item) => item.onClick`     | Определяет обработчик клика для элемента     |
| [`getItemActive?`](#кастомные-типы-данных)             | `ListPropGetItemActive<ITEM>`                          | `(item) => item.active`      | Определяет активное состояние элемента       |
| [`getItemAs?`](#кастомные-типы-данных)                 | `ListPropGetItemAs<ITEM>`                              | `(item) => item.as`          | Определяет HTML-тег для рендера элемента     |
| [`getItemAttributes?`](#кастомные-типы-данных)         | `ListPropGetItemAttributes<ITEM>`                      | `(item) => item.attributes`  | Определяет атрибуты элемента                 |
| [`getGroupLabel?`](#кастомные-типы-данных)             | `ListPropGetGroupLabel<GROUP>`                         | `(group) => group.label`     | Определяет название группы                   |
| [`getGroupKey?`](#кастомные-типы-данных)               | `ListPropGetGroupKey<GROUP>`                           | `(group) => group.id`        | Определяет уникальный ключ группы            |
| [`getGroupRightSide?`](#кастомные-типы-данных)         | `ListPropGetGroupRightSide<GROUP>`                     | `(group) => group.rightSide` | Определяет контент справа от группы          |
| [`itemSpace?`](#кастомные-отступы)                     | `MixSpaceProps`                                        | -                            | Кастомные отступы для элементов списка       |
| [`groupLabelSpace?`](#кастомные-отступы)               | `MixSpaceProps`                                        | -                            | Кастомные отступы для заголовков групп       |
| [`dividerSpace?`](#кастомные-отступы)                  | `MixSpaceProps`                                        | -                            | Кастомные отступы для разделителей           |
| [`getItemAdditionalClassName?`](#дополнительный-класс) | `ListPropGetItemAdditionalClassName<ITEM>`             | -                            | Дополнительный CSS-класс для элемента        |
| `onBlur?`                                              | `(event?: React.FocusEvent<HTMLInputElement>) => void` | -                            | Обработчик события `blur`                    |
| `onFocus?`                                             | `(event?: React.FocusEvent<HTMLInputElement>) => void` | -                            | Обработчик события `focus`                   |
| `name?`                                                | `string`                                               | -                            | Имя поля ввода                               |
| `className?`                                           | `string`                                               | -                            | Дополнительный CSS-класс                     |
| `ref?`                                                 | `React.Ref<HTMLDivElement>`                            | -                            | Ссылка на корневой DOM-элемент компонента    |

## Содержимое

### Элементы списка

Список формируется с помощью свойства `items`, которое принимает массив элементов. По умолчанию тип элементов соответствует `DefaultListItem`:

- `label` — название элемента (пишется с заглавной буквы).
- `groupId` — идентификатор группы, к которой относится элемент.
- `disabled` — флаг неактивного элемента.
- `leftSide` — контент слева от элемента.
- `leftIcon` — иконка слева от элемента.
- `rightSide` — контент справа от элемента.
- `rightIcon` — иконка справа от элемента.
- `onClick` — обработчик клика по элементу.

```tsx
const items = [
  { label: 'Первый', groupId: 1 },
  { label: 'Второй', groupId: 2 },
  { label: 'Третий', groupId: 1 },
];
return <List items={items} />;
```

### Неактивный элемент списка

Чтобы сделать элемент неактивным, укажите `disabled: true` в объекте элемента или используйте функцию `getItemDisabled`.

<MdxTabs>

<ListExampleDisabledItem />

```tsx
type Item = {
  label: string;
  id: number;
  disabled: boolean;
};

const items: Item[] = [
  { label: 'Первый — этот вариант не выбрать', id: 1, disabled: true },
  { label: 'Второй', id: 2, disabled: false },
  { label: 'Третий — и этот тоже не выбрать', id: 3, disabled: true },
];

return <List placeholder="Выберите вариант" items={items} />;
```

</MdxTabs>

### Выбранный элемент списка

Для отметки элемента как выбранного используйте свойство `checked: true` или функцию `getItemChecked`. Для управления состоянием выбора можно использовать `onItemClick`.

<MdxTabs>

<ListExampleChecked />

```tsx
const items: string[] = ['Первый', 'Второй', 'Третий'];

const getItemLabel = (item: string) => item;

const [checked, setChecked] = useState(items[0]);

return (
  <List
    items={items}
    getItemLabel={getItemLabel}
    getItemChecked={(item) => checked === item}
    onItemClick={setChecked}
  />
);
```

</MdxTabs>

### Дополнительные элементы

Для добавления иконок или произвольного контента используйте свойства `leftIcon`, `rightIcon`, `leftSide`, `rightSide` или соответствующие геттеры (`getItemLeftIcon`, `getItemRightIcon`, `getItemLeftSide`, `getItemRightSide`). Если передать массив в `leftSide` или `rightSide`, отступы между элементами добавятся автоматически.

<MdxTabs>

<ListExampleAdditionalElements />

```tsx
type Item = {
  label: string;
  leftIcon: IconComponent;
  work: 'дома' | 'в офисе' | 'не работает';
};

const items: Item[] = [
  { label: 'Андрей', leftIcon: IconUser, work: 'дома' },
  { label: 'Иван', leftIcon: IconUser, work: 'в офисе' },
  { label: 'Дементий', leftIcon: IconClose, work: 'не работает' },
];

return (
  <List
    items={items}
    getItemRightSide={(item) => (
      <Badge
        label={item.work}
        size="s"
        status={item.work === 'не работает' ? 'warning' : 'success'}
      />
    )}
    onItemClick={(item) => alert(`${item.label} ${item.work}`)}
  />
);
```

</MdxTabs>

### Группировка

Для группировки элементов укажите `groupId` в объекте элемента или используйте `getItemGroupKey`. Для отображения заголовков групп передайте массив групп в свойство `groups` с типом `DefaultListGroup`:

- `id` — уникальный идентификатор группы.
- `label` — название группы.
- `rightSide` — контент справа от заголовка группы.

<MdxTabs>

<ListExampleGroups />

```tsx
type Item = {
  label: string;
  id: number;
  groupId: number;
};

type Group = {
  label: string;
  id: number;
  rightSide?: React.ReactNode;
};

const groups: Group[] = [
  {
    id: 1,
    label: 'Первая группа',
    rightSide: (
      <Text view="brand" size="2xs" lineHeight="m">
        Все результаты
      </Text>
    ),
  },
  { id: 2, label: 'Вторая группа' },
  { id: 3, label: 'Третья группа' },
];

const items: Item[] = [
  { label: 'Первый', id: 1, groupId: 1 },
  { label: 'Второй', id: 2, groupId: 2 },
  { label: 'Третий', id: 3, groupId: 1 },
  { label: 'Четвертый', id: 4, groupId: 3 },
  { label: 'Пятый', id: 5, groupId: 2 },
];

return (
  <List
    items={items}
    groups={groups}
    onItemClick={(item) => alert(item.label)}
  />
);
```

</MdxTabs>

## Внешний вид

### Размер

Свойство `size` определяет размер компонента. Возможные значения: `'xs'`, `'s'`, `'m'`, `'l'`. По умолчанию — `'m'`. Компонент занимает всю ширину родительского контейнера.

<ListExampleSize />

### Отступы

Свойство `innerOffset` управляет внутренними горизонтальными отступами элементов. Возможные значения: `'normal'` (по умолчанию) и `'increased'`. Размер отступов зависит от `size`.

## Поведение

### Неактивный список

Чтобы сделать весь список неактивным, используйте свойство `disabled`.

<MdxTabs>

<ListExampleDisabled />

```tsx
type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  { label: 'Первый', id: 1 },
  { label: 'Второй', id: 2 },
  { label: 'Третий', id: 3 },
];

return <List items={items} disabled />;
```

</MdxTabs>

## Кастомизация

### Кастомный элемент списка

Свойство `renderItem` позволяет задать собственное представление элементов списка через функцию рендера.

<MdxTabs>

<ListExampleRenderItem />

```tsx
import React from 'react';
import { Badge } from '@consta/uikit/Badge';
import { List } from '@consta/uikit/ListCanary';

import { cn } from '@bem-react/className';

const cnListExampleRenderItem = cn('ListExampleRenderItem');

type Item = {
  label: string;
  id: number;
  status?: 'repairs' | 'serviceable';
};

const items: Item[] = [
  {
    label: 'Принтер',
    id: 1,
    status: 'repairs',
  },
  {
    label: 'Монитор',
    id: 2,
    status: 'serviceable',
  },
  {
    label: 'Ноутбук',
    id: 3,
    status: 'serviceable',
  },
  {
    label: 'Стол',
    id: 4,
  },
];

const mapLabel = {
  repairs: 'На ремонте',
  serviceable: 'Исправен',
} as const;

const mapStatus = {
  repairs: 'error',
  serviceable: 'success',
} as const;

function ListExampleRenderItem() {
  return (
    <List
      items={items}
      renderItem={(item) => (
        <div className={cnListExampleRenderItem('Item')}>
          {item.label}
          {item.status && (
            <Badge
              className={cnListExampleRenderItem('Badge')}
              as="span"
              size="s"
              label={mapLabel[item.status]}
              status={mapStatus[item.status]}
            />
          )}
        </div>
      )}
    />
  );
}
```

</MdxTabs>

### Кастомные типы данных

Для использования собственных типов данных для элементов (`items`) и групп (`groups`) применяйте геттеры: `getItemLabel`, `getItemKey`, `getItemGroupKey`, `getItemDisabled`, `getItemLeftIcon`, `getItemLeftSide`, `getItemRightIcon`, `getItemRightSide`, `getItemActive`, `getItemAs`, `getItemAttributes`, `getGroupLabel`, `getGroupKey`, `getGroupRightSide`.

### Кастомные отступы

Для настройки отступов элементов (`ListItem`), заголовков групп (`ListGroupLabel`) и разделителей (`ListDivider`) используйте свойства `itemSpace`, `groupLabelSpace` и `dividerSpace`. Они принимают объект в формате `MixSpaceProps`. Для удаления отступов передайте пустой объект `{}`.

<MdxTabs>

<ListExampleSpace />

```tsx
// Без отступов
<List
  items={items}
  groups={groups}
  onItemClick={(item) => alert(item.label)}
  itemSpace={{}}
  groupLabelSpace={{}}
  dividerSpace={{}}
/>

// С кастомными отступами, без заголовков групп
<List
  items={items}
  groups={groups}
  onItemClick={(item) => alert(item.label)}
  itemSpace={{ p: 's' }}
  dividerSpace={{ mH: 's' }}
  getGroupLabel={() => undefined}
/>


// С кастомными отступами, с заголовками групп
<List
  items={items}
  groups={groups}
  onItemClick={(item) => alert(item.label)}
  itemSpace={{ p: 's' }}
  groupLabelSpace={{ mH: 's', pT: 's', pB: '2xs' }}
/>
```

</MdxTabs>

### Дополнительный класс

Для добавления кастомных стилей к элементам списка используйте `getItemAdditionalClassName`.

<MdxTabs>

<ListExampleAdditionalClassName />

```tsx
type Item = { label: string; marker: 'red' | 'green' };

const items: Item[] = [
  { label: 'Первый', marker: 'red' },
  { label: 'Второй', marker: 'green' },
  { label: 'Третий', marker: 'red' },
];

const [checked, setChecked] = useState<Item | undefined>(undefined);

return (
  <List
    onItemClick={setChecked}
    items={items}
    getItemAdditionalClassName={({ marker, label }) =>
      cnListExampleAdditionalClassName('Item', {
        marker,
        checked: checked?.label === label,
      })
    }
  />
);
```

```css
.ListItem.ListExampleAdditionalClassName-Item {
  --list-item-color: var(--color-typo-primary);
  --marker-size: calc(var(--space-xs) - var(--space-3xs));

  border-radius: var(--control-radius);
  background: var(--list-item-bg);
  position: relative;

  &:hover {
    --list-item-bg: var(--color-control-bg-clear-hover);
  }

  &::before {
    top: var(--space-2xs);
    left: auto;
    right: var(--space-2xs);
    bottom: auto;
    height: var(--marker-size);
    width: var(--marker-size);
    background: var(--my-list-item-marker-color);
    opacity: 1;
    border-radius: 50%;
  }

  &_marker {
    &_red {
      --my-list-item-marker-color: var(--color-bg-alert);
    }
    &_green {
      --my-list-item-marker-color: var(--color-bg-success);
    }
  }

  &_checked {
    --list-item-bg: var(--color-control-bg-clear-hover);
    --list-item-color: var(--color-typo-brand);
  }
}
```

</MdxTabs>

## Дополнительные компоненты

### Элемент списка (ListItem)

Компонент `ListItem` используется для отображения отдельного элемента списка вне компонента `List`.

<MdxTabs>

<ListItemExample />

```tsx
return <ListItem label="Пункт меню" active />;
```

</MdxTabs>

#### Импорт

```tsx
import { ListItem } from '@consta/uikit/ListCanary';
```

#### Свойства

| Свойство       | Тип или варианты значения     | По умолчанию | Описание                        |
| -------------- | ----------------------------- | ------------ | ------------------------------- |
| `size?`        | `'xs'`, `'s'`, `'m'`, `'l'`   | `'m'`        | Размер компонента               |
| `label`        | `string`                      | -            | Название элемента               |
| `disabled?`    | `boolean`                     | -            | Делает элемент неактивным       |
| `active?`      | `boolean`                     | -            | Помечает элемент как активный   |
| `leftSide?`    | `React.ReactNode`             | -            | Контент с левой стороны         |
| `leftIcon?`    | `IconComponent`               | -            | Иконка с левой стороны          |
| `rightSide?`   | `React.ReactNode`             | -            | Контент с правой стороны        |
| `rightIcon?`   | `IconComponent`               | -            | Иконка с правой стороны         |
| `onClick?`     | `React.MouseEventHandler`     | -            | Событие при клике на элемент    |
| `innerOffset?` | `'increased'`, `'normal'`     | -            | Контролирует внутренние отступы |
| `space?`       | `MixSpaceProps`               | -            | Задает кастомный отступ         |
| `className?`   | `string`                      | -            | Дополнительный CSS-класс        |
| `as?`          | `keyof JSX.IntrinsicElements` | -            | HTML-тег компонента             |

### Индикатор загрузки (ListLoader)

Компонент `ListLoader` отображает индикатор загрузки в виде элемента списка.

<MdxTabs>

<ListLoaderExample />

```tsx
return <ListLoader size="m" />;
```

</MdxTabs>

#### Импорт

```tsx
import { ListLoader } from '@consta/uikit/ListCanary';
```

#### Свойства

| Свойство     | Тип или варианты значения   | По умолчанию | Описание                 |
| ------------ | --------------------------- | ------------ | ------------------------ |
| `size?`      | `'xs'`, `'s'`, `'m'`, `'l'` | `'m'`        | Размер компонента        |
| `className?` | `string`                    | -            | Дополнительный CSS-класс |

### Заголовок группы (ListGroupLabel)

Компонент `ListGroupLabel` используется для отображения заголовка группы.

<MdxTabs>

<ListGroupLabelExample />

```tsx
return (
  <ListGroupLabel label="Заголовок" rightSide={<Badge label="Example" />} />
);
```

</MdxTabs>

#### Импорт

```tsx
import { ListGroupLabel } from '@consta/uikit/ListCanary';
```

#### Свойства

| Свойство       | Тип или варианты значения   | По умолчанию | Описание                        |
| -------------- | --------------------------- | ------------ | ------------------------------- |
| `size?`        | `'xs'`, `'s'`, `'m'`, `'l'` | `'m'`        | Размер компонента               |
| `label?`       | `string`                    | -            | Заголовок группы                |
| `disabled?`    | `boolean`                   | -            | Делает элемент неактивным       |
| `innerOffset?` | `'increased'`, `'normal'`   | -            | Контролирует внутренние отступы |
| `space?`       | `MixSpaceProps`             | -            | Задает кастомный отступ         |
| `className?`   | `string`                    | -            | Дополнительный CSS-класс        |

### Компонент для добавления элемента (ListAddItem)

Компонент `ListAddItem` представляет собой кнопку для добавления нового элемента в список.

<MdxTabs>

<ListAddItemExample />

```tsx
return <ListAddItem label="Добавить" onClick={() => alert('onClick')} />;
```

</MdxTabs>

#### Импорт

```tsx
import { ListAddItem } from '@consta/uikit/ListCanary';
```

#### Свойства

| Свойство       | Тип или варианты значения   | По умолчанию | Описание                        |
| -------------- | --------------------------- | ------------ | ------------------------------- |
| `size?`        | `'xs'`, `'s'`, `'m'`, `'l'` | `'m'`        | Размер компонента               |
| `label?`       | `React.ReactNode`           | -            | Заголовок кнопки                |
| `innerOffset?` | `'increased'`, `'normal'`   | `'normal'`   | Контролирует внутренние отступы |
| `active?`      | `boolean`                   | -            | Помечает элемент как активный   |
| `underLine?`   | `boolean`                   | -            | Добавляет подчеркивание снизу   |
| `className?`   | `string`                    | -            | Дополнительный CSS-класс        |

### Коробка (ListBox)

Компонент `ListBox` позволяет настроить внешний вид списка, добавляя обводку (`border`) и тень (`shadow`). Свойство `form` определяет форму углов: `'default'`, `'brick'`, `'round'`.

<MdxTabs>

<ListExampleListBox />

```tsx
const items: string[] = ['Первый', 'Второй', 'Третий'];

const getItemLabel = (item: string) => item;

return (
  <ListBox form="round" shadow border>
    <List
      getItemLabel={getItemLabel}
      items={items}
      onItemClick={(item) => alert(item)}
    />
  </ListBox>
);
```

</MdxTabs>

#### Импорт

```tsx
import { ListBox } from '@consta/uikit/ListCanary';
```

#### Свойства

| Свойство     | Тип или варианты значения         | По умолчанию | Описание                 |
| ------------ | --------------------------------- | ------------ | ------------------------ |
| `size?`      | `'xs'`, `'s'`, `'m'`, `'l'`       | `'m'`        | Размер компонента        |
| `form?`      | `'default'`, `'brick'`, `'round'` | -            | Форма углов              |
| `border?`    | `boolean`                         | -            | Включает обводку         |
| `shadow?`    | `boolean`                         | -            | Включает тень            |
| `className?` | `string`                          | -            | Дополнительный CSS-класс |
