import { MdxMenu, MdxInformer, MdxTabs } from '@consta/stand';
import { TabsExample } from './examples/TabsExample/TabsExample';
import { TabsExampleIcon } from './examples/TabsExampleIcon/TabsExampleIcon';
import { TabsExampleSize } from './examples/TabsExampleSize/TabsExampleSize';
import { TabsExampleView } from './examples/TabsExampleView/TabsExampleView';
import {
  TabsExampleRenderItem,
  TabsExampleRenderItemBadge,
} from './examples/TabsExampleRenderItem/TabsExampleRenderItem';
import { TabsExampleLinePosition } from './examples/TabsExampleLinePosition/TabsExampleLinePosition';
import { TabsExampleFitModeDropdown } from './examples/TabsExampleFitModeDropdown/TabsExampleFitModeDropdown';
import { TabsExampleFitModeScroll } from './examples/TabsExampleFitModeScroll/TabsExampleFitModeScroll';
import { TabsExampleSide } from './examples/TabsExampleSide/TabsExampleSide';
import { TabsExampleDisabled } from './examples/TabsExampleDisabled/TabsExampleDisabled';
import { TabsExampleAs } from './examples/TabsExampleAs/TabsExampleAs';

<MdxMenu>

- [Обзор](#обзор)
- [Импорт](#импорт)
- [Свойства](#свойства)
- [Содержимое](#содержимое)
  - [Тип табов](#тип-табов)
  - [Текст](#текст)
  - [Иконки](#иконки)
  - [Дополнительный контент](#дополнительный-контент)
  - [Неактивные элементы](#неактивные-элементы)
  - [Рендеринг](#рендеринг)
- [Внешний вид](#внешний-вид)
  - [Размер](#размер)
  - [Стиль](#стиль)
  - [Расположение линии](#расположение-линии)
- [Адаптивность](#адаптивность)
  - [Выпадающий список](#выпадающий-список)
  - [Прокрутка](#прокрутка)
- [Кастомизация](#кастомизация)
- [Пример использования](#пример-использования)

</MdxMenu>

## Обзор

Компонент `Tabs` предназначен для создания вкладок, позволяющих пользователю переключаться между различными наборами данных или интерфейсами. Он поддерживает настройку содержимого, внешнего вида и поведения, включая иконки, дополнительные элементы, размеры и адаптивность.

Для работы с компонентом необходимо создать массив с данными для вкладок и передать его в свойство `items`. Каждому табу требуется уникальный текст (ключ), а также можно добавить иконки или дополнительный контент.

## Импорт

```tsx
import { Tabs } from '@consta/uikit/Tabs';
```

## Свойства

| Свойство                                       | Тип                               | По умолчанию | Описание                                                                                               |
| ---------------------------------------------- | --------------------------------- | ------------ | ------------------------------------------------------------------------------------------------------ |
| [`items`](#тип-табов)                          | `ITEM[]`                          | -            | Массив элементов с данными для табов (текст, иконка и т.д.)                                            |
| [`value`](#тип-табов)                          | `ITEM`, `null`                    | -            | Текущее выбранное значение                                                                             |
| `getItemKey`                                   | `TabsPropGetItemKey`              | -            | Функция для получения уникального ключа элемента                                                       |
| [`getItemLabel?`](#текст)                      | `TabsPropGetItemLabel`            | -            | Функция для получения текста таба                                                                      |
| [`getItemLeftIcon?`](#иконки)                  | `TabsPropGetItemLeftIcon`         | -            | Функция для получения иконки слева                                                                     |
| [`getItemRightIcon?`](#иконки)                 | `TabsPropGetItemRightIcon`        | -            | Функция для получения иконки справа                                                                    |
| [`getItemLeftSide?`](#дополнительный-контент)  | `TabsPropGetItemLeftSide`         | -            | Функция для получения дополнительного контента слева                                                   |
| [`getItemRightSide?`](#дополнительный-контент) | `TabsPropGetItemRightSide`        | -            | Функция для получения дополнительного контента справа                                                  |
| [`getItemDisabled?`](#неактивные-элементы)     | `TabsPropGetItemDisabled`         | -            | Функция для определения состояния активности элемента                                                  |
| [`getItemAs?`](#рендеринг)                     | `TabsPropGetItemAs`               | -            | Функция для задания HTML-тега элемента                                                                 |
| [`getItemAttributes?`](#рендеринг)             | `TabsPropGetItemAttributes`       | -            | Функция для получения HTML-атрибутов элемента                                                          |
| `getItemRef?`                                  | `TabsPropGetItemRef`              | -            | Функция для получения ссылки на элемент                                                                |
| [`onlyIcon?`](#иконки)                         | `boolean`                         | -            | Показывать только иконку (текст отображается при наведении)                                            |
| [`size?`](#размер)                             | `'xs', 's', 'm'`                  | `'m'`        | Размер компонента                                                                                      |
| [`view?`](#стиль)                              | `'bordered', 'clear'`             | `'bordered'` | Внешний вид компонента (с рамкой или без)                                                              |
| [`linePosition?`](#расположение-линии)         | `'bottom', 'top', left', 'right'` | `'bottom'`   | Расположение табов и линии, обозначающей активный таб                                                  |
| [`fitMode?`](#адаптивность)                    | `'dropdown', 'scroll'`            | `'dropdown'` | Способ адаптации при нехватке места: выпадающий список или прокрутка (только для горизонтальных табов) |
| [`withScrollButtons?`](#прокрутка)             | `boolean`                         | `true`       | Отображение кнопок прокрутки (только для `fitMode="scroll"`)                                           |
| [`onChange`](#тип-табов)                       | `TabsPropOnChange`                | -            | Действие при выборе таба                                                                               |
| [`renderItem?`](#кастомизация)                 | `RenderItem`                      | -            | Функция для кастомного рендеринга элемента                                                             |
| [`disabled?`](#неактивные-элементы)            | `boolean`, `undefined`            | -            | Отключение всех табов                                                                                  |
| `className?`                                   | `string`                          | -            | Дополнительный CSS-класс                                                                               |
| `ref?`                                         | `React.Ref<HTMLDivElement>`       | -            | Ссылка на корневой DOM-элемент компонента                                                              |

```tsx
export type TabsItemDefault = {
  label: string | number;
  icon?: IconComponent;
};

type OnChange<ITEM> = (
  value: ITEM | null,
  props: {
    e: React.ChangeEvent<HTMLInputElement>;
    value: ITEM | null;
  },
) => void;

type RenderItem<ITEM, ELEMENT> = (props: {
  item: ITEM;
  onChange: React.MouseEventHandler<ELEMENT>;
  checked: boolean;
  label: string;
  icon?: IconComponent;
  iconSize: IconPropSize;
  onlyIcon?: boolean;
}) => React.ReactNode | null;

export type TabsItemDefault = {
  label: string | number;
  leftIcon?: IconComponent;
  rightIcon?: IconComponent;
  rightSide?: React.ReactNode;
  leftSide?: React.ReactNode;
  disabled?: boolean;
  as?: AsTags;
  ref?: React.RefObject<HTMLElement>;
  attributes?: AsAttributes;
};

export const tabsSizes = ['m', 's', 'xs'] as const;
export type TabsPropSize = typeof tabsSizes[number];
export const tabsDefaultSize: TabsPropSize = tabsSizes[0];

export const tabsViews = ['bordered', 'clear'] as const;
export type TabsPropView = typeof tabsViews[number];
export const tabsDefaultView: TabsPropView = tabsViews[0];

export const tabsLinePositions = ['bottom', 'top', 'left', 'right'] as const;
export type TabsPropLinePosition = typeof tabsLinePositions[number];
export const tabsDefaultLinePosition: TabsPropLinePosition = 'bottom';

export const tabsFitModes = ['scroll', 'dropdown'] as const;
export type TabsPropFitMode = typeof tabsFitModes[number];
export const tabsDefaultFitMode: TabsPropFitMode = 'dropdown';

export type TabsPropGetItemLabel<ITEM> = (item: ITEM) => string | number;
export type TabsPropGetItemChecked<ITEM> = (item: ITEM) => boolean | undefined;
export type TabsPropGetItemIcon<ITEM> = (
  item: ITEM,
) => IconComponent | undefined;
export type TabsPropGetItemSide<ITEM> = (
  item: ITEM,
) => React.ReactNode | undefined;

export type TabsPropGetItemAs<ITEM> = (item: ITEM) => AsTags | undefined;
export type TabsPropGetItemAttributes<ITEM> = (
  item: ITEM,
) => TabsItemDefault['attributes'];
export type TabsPropGetItemRef<ITEM> = (
  item: ITEM,
) => React.RefObject<HTMLElement> | undefined;

export type TabsPropGetItemDisabled<ITEM> = (item: ITEM) => boolean | undefined;

export type TabsPropOnChange<ITEM> = (
  value: ITEM,
  props: {
    e: React.MouseEvent;
  },
) => void;

export type RenderItemProps<ITEM> = {
  item: ITEM;
  onChange: React.MouseEventHandler;
  checked: boolean;
  size: TabsPropSize;
  iconSize?: IconPropSize;
  onlyIcon?: boolean;
  label: string;
  tabRef?: React.RefObject<HTMLElement>;
  renderInDropdown?: boolean;
} & Omit<TabsItemDefault, 'label' | 'ref'>;

export type RenderItem<ITEM> = (
  props: RenderItemProps<ITEM>,
) => React.ReactNode | null;
```

## Содержимое

### Тип табов

Компонент `Tabs` работает с массивом элементов, переданным в свойство `items`. По умолчанию используется тип `TabsItemDefault`:

```tsx
type TabsItemDefault = {
  id: string;
  label: string | number;
  leftIcon?: IconComponent;
  rightIcon?: IconComponent;
  rightSide?: React.ReactNode;
  leftSide?: React.ReactNode;
  disabled?: boolean;
};
```

### Текст

Текст для таба по умолчанию берется из свойства `label` элемента. Чтобы использовать другой тип данных, задайте функцию `getItemLabel`, которая указывает, откуда брать текст. Текст должен быть коротким и лаконичным, а табы — примерно одинаковой длины.

<MdxTabs>

<TabsExample />

```tsx
import React, { useState } from 'react';
import { Tabs } from '@consta/uikit/Tabs';

const items: string[] = ['Один', 'Два', 'Три'];

const getItemLabel = (label: string) => label;

export const TabsExample = () => {
  const [value, setValue] = useState<string | null>(items[0]);
  return (
    <Tabs
      value={value}
      onChange={setValue}
      items={items}
      getItemLabel={getItemLabel}
    />
  );
};
```

</MdxTabs>

### Иконки

Иконки для табов задаются через свойства `leftIcon` или `rightIcon` в объекте элемента. Для кастомных типов данных используйте функции `getItemLeftIcon` или `getItemRightIcon`. Чтобы отображать только иконку (без текста), используйте свойство `onlyIcon` — текст будет виден при наведении.

<MdxTabs>

<TabsExampleIcon />

```tsx
import React, { useState } from 'react';
import { Tabs } from '@consta/uikit/Tabs';
import { IconPhoto } from '@consta/uikit/IconPhoto';
import { IconRing } from '@consta/uikit/IconRing';
import { IconCamera } from '@consta/uikit/IconCamera';

type Item = {
  label: string;
  image: IconComponent;
};

const items: Item[] = [
  {
    label: 'Первый',
    image: IconPhoto,
  },
  {
    label: 'Второй',
    image: IconRing,
  },
  {
    label: 'Третий вариант',
    image: IconCamera,
  },
];

const getItemIcon = (item: Item) => item.image;

export const TabsExampleIcon = () => {
  const [value, setValue] = useState<Item | null>(items[0]);
  return (
    <>
      <Tabs
        value={value}
        onChange={setValue}
        items={items}
        getItemLeftIcon={getItemIcon}
      />
      <Tabs
        value={value}
        onChange={setValue}
        items={items}
        getItemRightIcon={getItemIcon}
      />
      <Tabs
        value={value}
        onChange={setValue}
        items={items}
        getItemLeftIcon={getItemIcon}
        onlyIcon
      />
    </>
  );
};
```

</MdxTabs>

### Дополнительный контент

Для добавления дополнительного контента слева или справа от таба используйте свойства `leftSide` или `rightSide`. Для кастомных типов данных задайте функции `getItemLeftSide` или `getItemRightSide`. Если передать массив элементов, отступы между ними будут расставлены автоматически.

<MdxTabs>

<TabsExampleSide />

```tsx
import React, { useState } from 'react';
import { Badge } from '@consta/uikit/Badge';
import { Button } from '@consta/uikit/Button';
import { Example } from '@consta/stand';
import { IconRestart } from '@consta/icons/IconRestart';
import { Tabs } from '@consta/uikit/Tabs';

type Item = {
  label: string;
  status: 'success' | 'error';
};

const items: Item[] = [
  {
    label: 'typescript test',
    status: 'success',
  },
  {
    label: 'unit test',
    status: 'error',
  },
  {
    label: 'build test',
    status: 'success',
  },
];

const getItemRightSide = ({ status }: Item) => [
  <Badge size="xs" status={status} label={status} />,
  status === 'error' && (
    <Button
      tabIndex={0}
      as="span"
      label="Rerun"
      iconLeft={IconRestart}
      view="ghost"
      size="xs"
      onlyIcon
    />
  ),
];

export const TabsExampleSide = () => {
  const [value, setValue] = useState<Item | null>(items[0]);
  return (
    <Tabs
      value={value}
      onChange={setValue}
      items={items}
      getItemRightSide={getItemRightSide}
      fitMode="scroll"
    />
  );
};
```

</MdxTabs>

### Неактивные элементы

Для отключения всех табов используйте свойство `disabled`. Чтобы отключить отдельный таб, задайте свойство `disabled` в объекте элемента или используйте функцию `getItemDisabled`.

<MdxTabs>

<TabsExampleDisabled />

```tsx
import { Example } from '@consta/stand';
import React, { useState } from 'react';
import { Tabs } from '@consta/uikit/Tabs';

type Item = {
  label: string;
  disabled?: boolean;
};

const items: Item[] = [
  {
    label: 'Один',
  },
  {
    label: 'Два',
    disabled: true,
  },
  {
    label: 'Три',
  },
];

export const TabsExampleDisabled = () => {
  const [value, setValue] = useState<Item | null>(items[0]);
  return (
    <>
      <Tabs value={value} onChange={setValue} items={items} />
      <Tabs value={value} onChange={setValue} items={items} disabled />
    </>
  );
};
```

</MdxTabs>

### Рендеринг

Для кастомного рендеринга таба используйте свойство `getItemAs` для задания HTML-тега или `getItemAttributes` для добавления HTML-атрибутов.

<MdxTabs>

<TabsExampleAs />

```tsx
import React, { useState } from 'react';
import { Tabs } from '@consta/uikit/Tabs';

const items: string[] = ['Один', 'Два', 'Три'];

const getItemLabel = (label: string) => label;

export const TabsExampleAs = () => {
  const [value, setValue] = useState<string | null>(items[0]);
  return (
    <Tabs
      value={value}
      onChange={setValue}
      items={items}
      getItemAs={() => 'a'}
      getItemAttributes={(item) => ({ href: item })}
      getItemLabel={getItemLabel}
    />
  );
};
```

</MdxTabs>

## Внешний вид

### Размер

Свойство `size` управляет размером шрифта, отступами и другими параметрами. Доступные значения: `'xs'`, `'s'`, `'m'` (по умолчанию — `'m'`).

<MdxTabs>

<TabsExampleSize />

```tsx
import React, { useState } from 'react';
import { Tabs } from '@consta/uikit/Tabs';

type Item = string;

const items: Item[] = ['один', 'два', 'три'];

export const TabsExampleSize = () => {
  const [value, setValue] = useState<Item | null>(items[0]);
  return (
    <>
      <Tabs
        value={value}
        onChange={setValue}
        items={items}
        getItemLabel={(item) => item}
        size="m"
      />
      <Tabs
        value={value}
        onChange={setValue}
        items={items}
        getItemLabel={(item) => item}
        size="s"
      />
      <Tabs
        value={value}
        onChange={setValue}
        items={items}
        getItemLabel={(item) => item}
        size="xs"
      />
    </>
  );
};
```

</MdxTabs>

### Стиль

Свойство `view` определяет внешний вид табов. Доступные варианты:

- `'bordered'` — с рамкой (по умолчанию),
- `'clear'` — без рамки.

<MdxTabs>

<TabsExampleView />

```tsx
import React, { useState } from 'react';
import { Tabs } from '@consta/uikit/Tabs';

type Item = string;

const items: Item[] = ['один', 'два', 'три'];

export const TabsExampleView = () => {
  const [value, setValue] = useState<Item | null>(items[0]);
  return (
    <>
      <Tabs
        value={value}
        onChange={setValue}
        items={items}
        getItemLabel={(item) => item}
        view="bordered"
      />
      <Tabs
        value={value}
        onChange={setValue}
        items={items}
        getItemLabel={(item) => item}
        view="clear"
      />
    </>
  );
};
```

</MdxTabs>

### Расположение линии

Свойство `linePosition` задает ориентацию табов и положение линии, обозначающей активный таб:

- `'bottom'` (по умолчанию) — горизонтальные табы, линия снизу,
- `'top'` — горизонтальные табы, линия сверху,
- `'right'` — вертикальные табы, линия справа,
- `'left'` — вертикальные табы, линия слева.

<MdxTabs>

<TabsExampleLinePosition />

```tsx
// Код для TabsExampleLinePosition не предоставлен в исходном файле, но компонент демонстрирует различные значения свойства linePosition.
```

</MdxTabs>

## Адаптивность

<MdxInformer status="warning">

Адаптивность работает только для горизонтальных табов (`linePosition = 'bottom'` или `'top'`).

</MdxInformer>

Табы заполняют доступную ширину. Если содержимое не помещается, используется либо выпадающий список, либо прокрутка, в зависимости от свойства `fitMode`.

### Выпадающий список

Для отображения табов в виде выпадающего списка используйте `fitMode='dropdown'` (по умолчанию).

<TabsExampleFitModeDropdown />

### Прокрутка

Для включения прокрутки задайте `fitMode="scroll"`. Прокрутка осуществляется с помощью кнопок **вправо** и **влево**. Отображение кнопок можно отключить с помощью `withScrollButtons` (по умолчанию — `true`).

<TabsExampleFitModeScroll />

## Кастомизация

Для кастомного рендеринга табов используйте свойство `renderItem`, которое позволяет задать собственный компонент для отображения каждого таба.

<MdxTabs>

<TabsExampleRenderItem />

```tsx
import React, { useState } from 'react';
import { Tabs, cnTabsTab } from '@consta/uikit/Tabs';

type Item = string;

const items: Item[] = ['Один', 'Два', 'Три'];

export const TabsExampleRenderItem = () => {
  const [value, setValue] = useState<Item | null>(items[0]);
  return (
    <Tabs
      value={value}
      onChange={setValue}
      items={items}
      getItemLabel={(item) => item}
      size="m"
      renderItem={({ label, checked, onChange }) => (
        <button
          type="button"
          onClick={onChange}
          className={cnTabsTab({ checked })}
        >
          <span style={{ marginRight: 4 }} role="img" aria-label="img">
            {checked ? '🤘' : '✋'}
          </span>
          {label}
        </button>
      )}
    />
  );
};
```

</MdxTabs>

## Пример использования

```tsx
import React, { useState } from 'react';
import { Tabs } from '@consta/uikit/Tabs';

type Item = string;

const items = ['один', 'два', 'три'];

export function App() {
  const [value, setValue] = useState<string | null>(items[0]);
  return (
    <Tabs
      value={value}
      onChange={setValue}
      items={items}
      getItemLabel={(item) => item}
    />
  );
}
```
