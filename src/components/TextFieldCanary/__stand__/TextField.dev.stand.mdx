import { MdxMenu, MdxTabs, MdxInformer } from '@consta/stand';
import { TextFieldExampleStatus } from './examples/TextFieldExampleStatus/TextFieldExampleStatus';
import {
  TextFieldExampleTextPlaceholder,
  TextFieldExampleTextValue,
  TextFieldExampleTextLeft,
  TextFieldExampleTextRight,
} from './examples/TextFieldExampleText/TextFieldExampleText';
import {
  TextFieldExampleSize,
  TextFieldExampleSizeRows,
  TextFieldExampleSizeMinRows,
} from './examples/TextFieldExampleSize/TextFieldExampleSize';
import {
  TextFieldExampleView,
  TextFieldExampleViewDisabled,
} from './examples/TextFieldExampleView/TextFieldExampleView';
import {
  TextFieldExampleFormBasic,
  TextFieldExampleFormHybrid,
} from './examples/TextFieldExampleForm/TextFieldExampleForm';
import {
  TextFieldExampleResizeTrue,
  TextFieldExampleResizeAuto,
} from './examples/TextFieldExampleResize/TextFieldExampleResize';
import {
  TextFieldExampleTypeText,
  TextFieldExampleTypeTextarea,
  TextFieldExampleTypeNumber,
  TextFieldExampleTypePassword,
  TextFieldExampleTypeTextArray,
} from './examples/TextFieldExampleType/TextFieldExampleType';
import { TextFieldExampleStepArray } from './examples/TextFieldExampleStepArray/TextFieldExampleStepArray';
import { TextFieldExampleClearButton } from './examples/TextFieldExampleClearButton/TextFieldExampleClearButton';
import {
  TextFieldExampleMaskAmount,
  TextFieldExampleMaskPhone,
  TextFieldExampleMaskPassport,
  TextFieldExampleMaskBankAccount,
  TextFieldExampleMaskSetValue,
  TextFieldExampleMaskArraySn,
} from './examples/TextFieldExampleMask/TextFieldExampleMask';
import { TextFieldExampleProgramFocus } from './examples/TextFieldExampleAutoFocus/TextFieldExampleAutoFocus';
import { TextFieldExampleRenderValueItem } from './examples/TextFieldExampleRenderValueItem/TextFieldExampleRenderValueItem';
import { TextFieldExampleTextArrayPreParsing } from './examples/TextFieldExampleText copy/TextFieldExampleTextArrayPreParsing';
/* cspell:disable-next-line */
import { MdxCollapse } from '@consta/stand/src/componets/MdxCollapse';

<MdxMenu>

- [Обзор](#обзор)
- [Импорт](#импорт)
- [Свойства](#свойства)
- [Тип поля](#тип-поля)
  - [Одна строка](#поле-в-одну-строку)
  - [Несколько строк](#поле-в-несколько-строк)
  - [Числовое поле](#поле-для-ввода-чисел)
  - [Поле для пароля](#поле-для-ввода-пароля)
  - [Массив строк](#поле-для-ввода-массива-строк)
- [Содержимое](#содержимое)
  - [Подсказка](#подсказка)
  - [Значение](#значение)
  - [Дополнительная информация](#дополнительная-информация)
  - [Кнопка очистки](#кнопка-для-очистки-поля)
- [Внешний вид](#внешний-вид)
  - [Вид](#вид)
  - [Статус](#статус)
  - [Форма](#форма)
  - [Размер](#размер)
- [Поведение](#поведение)
  - [Фокус](#фокус)
- [Маскирование](#маскирование)
  - [Работа с useIMask](#работа-с-useimask)
  - [Примеры масок](#примеры-масок)
- [Пример использования](#пример-использования)

</MdxMenu>

## Обзор

`TextField` позволяет вводить текст, числа или массивы строк в формах. Компонент поддерживает настройку типа поля, маскирование, размеры, формы, статусы и дополнительные элементы, такие как иконки или кнопки очистки.

## Импорт

Импортируйте общий компонент:

```tsx
import { TextField } from '@consta/uikit/TextFieldCanary';
```

Или отдельные типы:

```tsx
import {
  TextFieldTypeNumber,
  TextFieldTypePassword,
  TextFieldTypeText,
  TextFieldTypeTextArea,
  TextFieldTypeTextArray,
} from '@consta/uikit/TextFieldCanary';
```

## Свойства

```tsx
type TextFieldPropValue<TYPE> = TYPE extends 'textarray'
  ? string[] | null
  : string | null;

type TextFieldPropDefaultValue<TYPE> = TYPE extends 'textarray'
  ? never
  : string | null;

type TextFieldPropOnChange<TYPE> = (
  value: TextFieldPropValue<TYPE>,
  params: {
    e: React.ChangeEvent | React.MouseEvent | React.KeyboardEvent;
  },
) => void;

type InputType<TYPE extends string> = TYPE extends 'textarea'
  ? HTMLTextAreaElement
  : HTMLInputElement;

type TextFieldPropRenderValueItem = (props: {
  item: string;
  index: number;
  onRemove: (e: React.MouseEvent) => void;
  size: FieldPropSize;
  disabled: boolean | undefined;
}) => React.ReactNode;
```

| Свойство                                       | Тип                                                                                                                                                                                                        | По умолчанию | Описание                                                            |
| ---------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------ | ------------------------------------------------------------------- |
| [`type?`](#тип-поля)                           | `string`                                                                                                                                                                                                   | `text`       | Тип поля ввода.                                                     |
| [`value?`](#значение)                          | `TextFieldPropValue<TYPE>`                                                                                                                                                                                 | -            | Значение поля.                                                      |
| [`defaultValue?`](#значение)                   | `TextFieldPropDefaultValue<TYPE>`                                                                                                                                                                          | -            | Предустановленное значение поля.                                    |
| [`placeholder?`](#подсказка)                   | `string`                                                                                                                                                                                                   | -            | Подсказка внутри поля.                                              |
| [`leftSide?`](#дополнительная-информация)      | `IconComponent` \| `string`                                                                                                                                                                                | -            | Иконка или текст слева внутри поля.                                 |
| [`rightSide?`](#дополнительная-информация)     | `IconComponent` \| `string`                                                                                                                                                                                | -            | Иконка или текст справа внутри поля. Не работает с `type="number"`. |
| [`status?`](#статус)                           | `'alert'` \| `'success'` \| `'warning'`                                                                                                                                                                    | -            | Статус поля (например, для выделения ошибок или успеха).            |
| [`size?`](#размер)                             | `'xs'` \| `'s'` \| `'m'` \| `'l'`                                                                                                                                                                          | `m`          | Размер поля (шрифт, отступы, высота).                               |
| [`form?`](#форма)                              | `'default'` \| `'brick'` \| `'round'` \| `'clearRound'` \| `'roundClear'` \| `'clearDefault'` \| `'defaultClear'` \| `'defaultBrick'` \| `'brickDefault'` \| `'brickClear'` \| `'clearBrick'` \| `'clear'` | `default`    | Форма поля.                                                         |
| [`view?`](#внешний-вид)                        | `'default'` \| `'clear'`                                                                                                                                                                                   | `default`    | Внешний вид поля.                                                   |
| [`rows?`](#поле-в-несколько-строк)             | `number`                                                                                                                                                                                                   | -            | Количество строк для `type="textarea"`.                             |
| [`minRows?`](#поле-в-несколько-строк)          | `number`                                                                                                                                                                                                   | -            | Минимальное количество строк для `type="textarea"`.                 |
| [`maxRows?`](#поле-в-несколько-строк)          | `number`                                                                                                                                                                                                   | -            | Максимальное количество строк для `type="textarea"`.                |
| [`maxLength?`](#поле-в-несколько-строк)        | `number`                                                                                                                                                                                                   | -            | Максимальное количество символов.                                   |
| [`resize?`](#поле-в-несколько-строк)           | `boolean` \| `'auto'`                                                                                                                                                                                      | -            | Возможность изменения размера поля для `type="textarea"`.           |
| [`step?`](#поле-для-ввода-чисел)               | `string` \| `number` \| `number[]`                                                                                                                                                                         | -            | Шаг изменения значения для `type="number"`.                         |
| [`min?`](#поле-для-ввода-чисел)                | `number` \| `string`                                                                                                                                                                                       | -            | Минимальное значение для `type="number"`.                           |
| [`max?`](#поле-для-ввода-чисел)                | `number` \| `string`                                                                                                                                                                                       | -            | Максимальное значение для `type="number"`.                          |
| [`incrementButtons?`](#поле-для-ввода-чисел)   | `boolean`                                                                                                                                                                                                  | -            | Отображение кнопок-стрелок для `type="number"`.                     |
| [`clearButton?`](#кнопка-для-очистки-поля)     | `boolean`                                                                                                                                                                                                  | -            | Отображение кнопки очистки поля.                                    |
| [`autoFocus?`](#фокус)                         | `boolean`                                                                                                                                                                                                  | -            | Автофокус при первом рендере.                                       |
| `renderValueItem?`                             | `TextFieldPropRenderValueItem`                                                                                                                                                                             | -            | Функция рендера элементов для `type="textarray"`.                   |
| `onChange?`                                    | `TextFieldPropOnChange<TYPE>`                                                                                                                                                                              | -            | Обработчик изменения значения поля.                                 |
| `onInputChange?`                               | `TextFieldPropOnChange<string>`                                                                                                                                                                            | -            | Обработчик изменения ввода для `type="textarray"`.                  |
| `onClear?`                                     | `React.MouseEventHandler`                                                                                                                                                                                  | -            | Обработчик очистки поля.                                            |
| `onFocus?`                                     | `React.FocusEventHandler`                                                                                                                                                                                  | -            | Обработчик фокуса.                                                  |
| `onBlur?`                                      | `React.FocusEventHandler`                                                                                                                                                                                  | -            | Обработчик потери фокуса.                                           |
| [`inputValue?`](#поле-для-ввода-массива-строк) | `string` \| `null`                                                                                                                                                                                         | -            | Значение `<input>` для `type="textarray"`.                          |
| [`iconSize?`](#дополнительная-информация)      | `'s'` \| `'m'` \| `'xs'` \| `'l'`                                                                                                                                                                          | -            | Размер иконок (зависит от `size`).                                  |
| [`iconClear?`](#кнопка-для-очистки-поля)       | `IconComponent`                                                                                                                                                                                            | -            | Иконка для кнопки очистки.                                          |
| [`iconShowPassword?`](#поле-для-ввода-пароля)  | `IconComponent`                                                                                                                                                                                            | -            | Иконка для отображения пароля.                                      |
| [`iconHidePassword?`](#поле-для-ввода-пароля)  | `IconComponent`                                                                                                                                                                                            | -            | Иконка для скрытия пароля.                                          |
| `id?`                                          | `string`                                                                                                                                                                                                   | -            | ID поля в DOM.                                                      |
| `name?`                                        | `string`                                                                                                                                                                                                   | -            | Имя поля в DOM.                                                     |
| `tabIndex?`                                    | `number`                                                                                                                                                                                                   | -            | Порядковый номер при переходе по **Tab**.                           |
| `autoComplete?`                                | `AutoCompete`                                                                                                                                                                                              | -            | Автозаполнение поля (аналог HTML-атрибута `autocomplete`).          |
| `className?`                                   | `string`                                                                                                                                                                                                   | -            | Дополнительный CSS-класс.                                           |
| `inputRef?`                                    | `React.Ref<InputType<TYPE>>`                                                                                                                                                                               | -            | Ссылка на DOM-элемент поля ввода.                                   |
| `ref?`                                         | `React.Ref<HTMLDivElement>`                                                                                                                                                                                | -            | Ссылка на корневой DOM-элемент компонента.                          |

## Тип поля

Свойство `type` определяет тип поля и его поведение:

- [`text`](#поле-в-одну-строку): Поле для ввода текста в одну строку.
- [`textarea`](#поле-в-несколько-строк): Поле для ввода текста в несколько строк.
- [`number`](#поле-для-ввода-чисел): Поле для ввода чисел с возможностью использования кнопок-стрелок.
- [`password`](#поле-для-ввода-пароля): Поле для ввода пароля с маскировкой символов.
- [`textarray`](#поле-для-ввода-массива-строк): Поле для ввода массива строк.

Поддерживаются любые HTML-атрибуты `<input type="*" />`, например, `email`.

### Поле в одну строку

Поле с `type="text"` предназначено для ввода текста в одну строку.

```tsx
<TextField type="text" placeholder="Одна строчка" />
```

<TextFieldExampleTypeText />

### Поле в несколько строк

Поле с `type="textarea"` подходит для ввода большого текста, например, отзывов или комментариев. Количество строк задается свойством `rows`.

```tsx
<TextField type="textarea" rows={3} placeholder="Несколько строчек" />
```

<TextFieldExampleTypeTextarea />

#### Изменение высоты

Для включения изменения высоты пользователем установите `resize={true}`.

```tsx
<TextField type="textarea" rows={3} placeholder="Подергай за уголок" resize />
```

<TextFieldExampleResizeTrue />

#### Автоматическая высота

Для автоматической регулировки высоты используйте `resize="auto"` с указанием `minRows` и `maxRows`.

```tsx
<TextField
  type="textarea"
  minRows={3}
  maxRows={6}
  placeholder="Буду увеличиваться до 6ти строк"
  resize="auto"
/>
```

<TextFieldExampleResizeAuto />

### Поле для ввода чисел

Поле с `type="number"` предназначено для ввода чисел. Поддерживает кнопки-стрелки для изменения значения.

```tsx
<TextField type="number" placeholder="Здесь цифры" />
```

<TextFieldExampleTypeNumber />

#### Шаг, значения и диапазон

Свойство `step` задает шаг изменения значения или набор фиксированных значений. Свойства `min` и `max` ограничивают диапазон. Отображение кнопок-стрелок включается с помощью `incrementButtons`.

```tsx
<TextField
  type="number"
  step={[10, 50, 80]}
  min="0"
  max="100"
  incrementButtons
  defaultValue="10"
  placeholder="Здесь цифры"
/>
```

<TextFieldExampleStepArray />

### Поле для ввода пароля

Поле с `type="password"` маскирует вводимые символы.

```tsx
<TextField type="password" placeholder="Пароль" />
```

<TextFieldExampleTypePassword />

### Поле для ввода массива строк

Поле с `type="textarray"` позволяет вводить массивы строк, которые добавляются по нажатию **Enter**.

<MdxTabs>

<TextFieldExampleTypeTextArray />

```tsx
import { useState } from 'react';

export const TextFieldExampleTypeTextArray = () => {
  const [value, setValue] = useState<string[] | null>(null);

  return (
    <TextField
      placeholder="Введите текст и нажмите Enter"
      value={value}
      onChange={setValue}
      type="textarray"
      clearButton
    />
  );
};
```

</MdxTabs>

#### Рендер значения

Для кастомизации отображения элементов в `type="textarray"` используйте свойство `renderValueItem`.

<MdxTabs>

<TextFieldExampleRenderValueItem />

```tsx
import { Tag } from '@consta/uikit/Tag';
import React, { useState } from 'react';
import { IconRecord } from '@consta/icons/IconRecord';
import {
  TextField,
  TextFieldPropRenderValueItem,
} from '@consta/uikit/TextFieldCanary';

const cnTextFieldExampleRenderValueItem = cn('TextFieldExampleRenderValueItem');

const RenderValueItem: TextFieldPropRenderValueItem = ({
  item,
  index,
  disabled,
  onRemove,
  size,
}) => (
  <Tag
    icon={IconRecord}
    key={index}
    mode="cancel"
    className={cnTextFieldExampleRenderValueItem({ disabled })}
    label={item}
    onCancel={onRemove}
    size={size}
    cancelButtonTabIndex={-1}
  />
);

export const TextFieldExampleRenderValueItem = () => {
  const [value, setValue] = useState<string[] | null>(null);

  return (
    <TextField
      value={value}
      onChange={setValue}
      type="textarray"
      clearButton
      renderValueItem={RenderValueItem}
    />
  );
};
```

```css
.TagBase.TextFieldExampleRenderValueItem {
  &-Item {
    &_disabled {
      background-color: var(--color-control-bg-disable);

      & > * {
        color: var(--color-control-typo-disable);
      }
    }
  }
}
```

</MdxTabs>

#### Парсинг при вставке

Для разбивки вставленного текста на массив строк используйте обработчик `onPaste`.

<MdxTabs>

<TextFieldExampleTextArrayPreParsing />

```tsx
import { useCallback, useRef, useState } from 'react';
import { Example } from '@consta/stand';
import { TextField } from '@consta/uikit/TextFieldCanary';

export const TextFieldExampleTextArrayPreParsing = () => {
  const [value, setValue] = useState<string[] | null>(null);
  const inputRef = useRef<HTMLInputElement>(null);

  const handleInputClear = useCallback(() => {
    if (inputRef.current) {
      inputRef.current.value = '';
    }
  }, []);

  const handleChange = useCallback((value: string[] | null) => {
    setValue(value);
    handleInputClear();
  }, []);

  const pasteHandle = useCallback((e: React.ClipboardEvent) => {
    const data = e.clipboardData.getData('text/plain');
    if (!data) {
      return;
    }

    const array = [data.split(','), data.split(' '), data.split('\n')];
    let maxLength = 0;
    let validIndex = 0;

    for (let index = 0; index < array.length; index++) {
      if (array[index].length > maxLength) {
        maxLength = array[index].length;
        validIndex = index;
      }
    }

    const validData = array[validIndex]
      .map((item) => item.trim())
      .filter((item) => !!item);

    if (validData.length > 1) {
      e.preventDefault();
      handleInputClear();
      setValue((state) => [...(state || []), ...validData]);
    }
  }, []);

  return (
    <Example col={1}>
      <TextField
        value={value}
        onChange={handleChange}
        placeholder="Вставьте вышеуказанный текст"
        onPaste={pasteHandle}
        type="textarray"
        inputRef={inputRef}
        clearButton
      />
    </Example>
  );
};
```

</MdxTabs>

## Содержимое

### Подсказка

Свойство `placeholder` задает текст-подсказку, уточняющую формат или тип вводимых данных.

```tsx
<TextField placeholder="Здесь только цифры" />
```

<TextFieldExampleTextPlaceholder />

### Значение

Свойство `value` задает текущее значение поля, а `defaultValue` – начальное значение.

<MdxTabs>

<TextFieldExampleTextValue />

```tsx
import { useState } from 'react';
import { TextField } from '@consta/uikit/TextFieldCanary';

const App = () => {
  const [value, setValue] = useState('текст');

  return <TextField value={value} onChange={setValue} />;
};
```

</MdxTabs>

### Дополнительная информация

Свойства `leftSide` и `rightSide` позволяют добавить текст или иконку слева или справа внутри поля.

```tsx
<TextField leftSide="куда" />
<TextField leftSide={IconDiamond} rightSide="карат" />
```

<TextFieldExampleTextLeft />

### Кнопка для очистки поля

Свойство `clearButton` добавляет кнопку для очистки содержимого поля.

```tsx
<TextField defaultValue="Очисти меня" clearButton />
```

<TextFieldExampleClearButton />

## Поведение

### Фокус

Свойство `autoFocus` активирует фокус при первом рендере.

```tsx
<TextField autoFocus />
```

Для программного управления фокусом используйте `inputRef`.

<MdxTabs>

<TextFieldExampleProgramFocus />

```tsx
import { useRef } from 'react';
import { TextField } from '@consta/uikit/TextFieldCanary';
import { Button } from '@consta/uikit/Button';

export const TextFieldExampleProgramFocus = () => {
  const inputRef = useRef<HTMLInputElement>(null);

  return (
    <>
      <TextField inputRef={inputRef} />
      <Button
        label="Тык"
        onClick={() => {
          inputRef.current?.focus();
        }}
      />
    </>
  );
};
```

</MdxTabs>

## Внешний вид

### Вид

Свойство `view="clear"` делает поле визуально минималистичным, убирая границы.

```tsx
<TextField view="default" placeholder="Самое обычное поле" />
<TextField view="clear" placeholder="Незаметное поле" />
```

<TextFieldExampleView />

Свойство `disabled` делает поле неактивным.

```tsx
<TextField placeholder="Неактивное поле" disabled />
```

<TextFieldExampleViewDisabled />

### Статус

Свойство `status` выделяет поле цветом: `success`, `alert`, `warning`. Без указания статуса поле имеет стандартный вид.

```tsx
<TextField status="success" placeholder="Статус success" />
<TextField status="alert" placeholder="Статус alert" />
<TextField status="warning" placeholder="Статус warning" />
<TextField placeholder="Обычное поле" />
```

<TextFieldExampleStatus />

### Форма

#### Базовые формы

Свойство `form` задает форму поля: `default` (скругленные края), `brick` (прямые края), `round` (круглые края).

```tsx
<TextField placeholder="Default" />
<TextField form="brick" placeholder="Форма brick" />
<TextField form="round" placeholder="Форма round" />
```

<TextFieldExampleFormBasic />

#### Гибридные формы

Гибридные формы (`roundClear`, `clearRound`, и т.д.) позволяют комбинировать разные границы для интеграции с другими компонентами, например, с кнопками.

<MdxTabs>

<TextFieldExampleFormHybrid />

```tsx
import { Button } from '@consta/uikit/Button';
import { cnMixFlex } from '@consta/uikit/MixFlex';

<div className={cnMixFlex({ flex: 'flex' })}>
  <TextField placeholder="Электронная почта" form="roundClear" />
  <Button form="brickRound" label="Подписаться" />
</div>;
```

</MdxTabs>

<MdxInformer status="success">

Для автоматической расстановки форм при группировке компонентов используйте [`FieldGroup`](##LIBS.LIB.STAND/lib:uikit/stand:components-fieldgroup-stable).

</MdxInformer>

### Размер

Свойство `size` изменяет размер шрифта, отступы и высоту поля: `xs`, `s`, `m`, `l`.

```tsx
<TextField size="xs" placeholder="Размер XS" />
<TextField size="s" placeholder="Размер S" />
<TextField size="m" placeholder="Размер M" />
<TextField size="l" placeholder="Размер L" />
```

<TextFieldExampleSize />

## Маскирование

Для маскирования данных используйте хук [useIMask](https://github.com/uNmAnNeR/imaskjs/tree/master/packages/react-imask). Подробности о создании масок см. в [документации imask](https://imask.js.org/guide.html).

### Работа с useIMask

Хук `useIMask` управляет значением поля через `ref`. Начальное значение задается через `defaultValue`, а программное изменение – через `setValue`.

<MdxTabs>

<TextFieldExampleMaskSetValue />

```tsx
import { ReactMaskOpts, useIMask } from 'react-imask';
import React from 'react';
import { IconRevert } from '@consta/icons/IconRevert';
import { TextField } from '@consta/uikit/TextFieldCanary';
import { FieldGroup } from '@consta/uikit/FieldGroup';
import { FieldWrapper } from '@consta/uikit/FieldComponents';
import { Button } from '@consta/uikit/Button';

const defaultValue = '9876543210';

export const TextFieldExampleMaskSetValue = () => {
  const { ref, setValue } = useIMask<HTMLInputElement, ReactMaskOpts>({
    mask: '+{7}(000)000-00-00',
  });

  return (
    <FieldWrapper label="Телефон">
      <FieldGroup>
        <TextField
          placeholder="+7(999)999-99-99"
          inputRef={ref}
          defaultValue={defaultValue}
          clearButton
          onClear={() => setValue('')}
        />
        <Button
          iconLeft={IconRevert}
          onClick={() => setValue(defaultValue)}
          title="Сбросить"
        />
      </FieldGroup>
    </FieldWrapper>
  );
};
```

</MdxTabs>

### Примеры масок

#### Формат числа

Маска для ввода чисел с разделителем тысяч и двумя знаками после запятой.

<MdxTabs>

<TextFieldExampleMaskAmount />

```tsx
import { ReactMaskOpts, useIMask } from 'react-imask';
import React from 'react';
import { Text } from '@consta/uikit/Text';
import { TextField } from '@consta/uikit/TextFieldCanary';
import { cnMixSpace } from '@consta/uikit/MixSpace';

export const TextFieldExampleMaskAmount = () => {
  const { ref, value, unmaskedValue } = useIMask<
    HTMLInputElement,
    ReactMaskOpts
  >({
    mask: Number,
    min: 0,
    scale: 2,
    thousandsSeparator: ' ',
    radix: ',',
    padFractionalZeros: true,
    autofix: true,
    lazy: true,
    normalizeZeros: true,
    mapToRadix: ['.'],
  });

  return (
    <>
      <TextField defaultValue="1000000" placeholder="0" inputRef={ref} />
      <FieldLabel className={cnMixSpace({ mB: 'xs' })}>Value</FieldLabel>
      <Text>{value}</Text>
      <FieldLabel className={cnMixSpace({ mB: 'xs' })}>
        UnmaskedValue
      </FieldLabel>
      <Text>{unmaskedValue}</Text>
    </>
  );
};
```

</MdxTabs>

#### Телефон

Маска для ввода номера телефона в формате `+7(XXX)XXX-XX-XX`.

<MdxTabs>

<TextFieldExampleMaskPhone />

```tsx
import { ReactMaskOpts, useIMask } from 'react-imask';
import React from 'react';
import { Text } from '@consta/uikit/Text';
import { TextField } from '@consta/uikit/TextFieldCanary';
import { cnMixSpace } from '@consta/uikit/MixSpace';

export const TextFieldExampleMaskPhone = () => {
  const { ref, value, unmaskedValue } = useIMask<
    HTMLInputElement,
    ReactMaskOpts
  >({
    mask: '+{7}(000)000-00-00',
  });

  return (
    <>
      <TextField
        placeholder="+7(999)999-99-99"
        inputRef={ref}
        defaultValue="9876543210"
      />
      <FieldLabel className={cnMixSpace({ mB: 'xs' })}>Value</FieldLabel>
      <Text>{value}</Text>
      <FieldLabel className={cnMixSpace({ mB: 'xs' })}>
        UnmaskedValue
      </FieldLabel>
      <Text>{unmaskedValue}</Text>
    </>
  );
};
```

</MdxTabs>

#### Паспорт

Маска для ввода номера паспорта в формате `XX XX XXXXXX`.

<MdxTabs>

<TextFieldExampleMaskPassport />

```tsx
import { ReactMaskOpts, useIMask } from 'react-imask';
import React from 'react';
import { Text } from '@consta/uikit/Text';
import { TextField } from '@consta/uikit/TextFieldCanary';
import { cnMixSpace } from '@consta/uikit/MixSpace';

export const TextFieldExampleMaskPassport = () => {
  const { ref, value, unmaskedValue } = useIMask<
    HTMLInputElement,
    ReactMaskOpts
  >({
    mask: '00 00 000000',
  });

  return (
    <>
      <TextField
        placeholder="00 00 000000"
        defaultValue="1234567890"
        inputRef={ref}
      />
      <FieldLabel className={cnMixSpace({ mB: 'xs' })}>Value</FieldLabel>
      <Text>{value}</Text>
      <FieldLabel className={cnMixSpace({ mB: 'xs' })}>
        UnmaskedValue
      </FieldLabel>
      <Text>{unmaskedValue}</Text>
    </>
  );
};
```

</MdxTabs>

#### Банковский счет

Маска для ввода номера банковского счета в формате `XXXX XXXX XXXX XXXX`.

<MdxTabs>

<TextFieldExampleMaskBankAccount />

```tsx
import { ReactMaskOpts, useIMask } from 'react-imask';
import React, { memo } from 'react';
import { Text } from '@consta/uikit/Text';
import { TextField } from '@consta/uikit/TextFieldCanary';
import { cnMixSpace } from '@consta/uikit/MixSpace';
import { Example } from '@consta/stand';

const TextField = memo(TextField);

export const TextFieldExampleMaskBankAccount = () => {
  const { ref, value, unmaskedValue } = useIMask<
    HTMLInputElement,
    ReactMaskOpts
  >({
    mask: '0000 0000 0000 0000',
  });

  return (
    <Example col={{ 1: 0, 3: 700 }}>
      <TextField
        placeholder="1111 1111 1111 1111"
        defaultValue="1111222233334444"
        inputRef={ref}
      />
      <FieldLabel className={cnMixSpace({ mB: 'xs' })}>Value</FieldLabel>
      <Text>{value}</Text>
      <FieldLabel className={cnMixSpace({ mB: 'xs' })}>
        UnmaskedValue
      </FieldLabel>
      <Text>{unmaskedValue}</Text>
    </Example>
  );
};
```

</MdxTabs>

#### Серийные номера

Маска для ввода серийных номеров с валидацией формата.

<MdxTabs>

<TextFieldExampleMaskArraySn />

```tsx
import { ReactMaskOpts, useIMask } from 'react-imask';
import React, { useCallback, useState } from 'react';
import { TextField } from '@consta/uikit/TextFieldCanary';
import { FieldWrapper } from '@consta/uikit/FieldComponents';

export const TextFieldExampleMaskArraySn = () => {
  const mask = 'SN-000000';
  const [value, setValue] = useState<string[] | null>(null);
  const [error, setError] = useState<string>('');
  const { ref, setValue: setInputValue } = useIMask<
    HTMLInputElement,
    ReactMaskOpts
  >({ mask });

  const onChange = useCallback((value: string[] | null) => {
    if (
      (value?.length && value[value.length - 1].length === mask.length) ||
      value?.length === 0
    ) {
      setValue(value);
      setError('');
      setInputValue('');
    } else {
      setError(`Введите серийный номер в формате "${mask}"`);
    }
  }, []);

  const onInputChange = useCallback(() => setError(''), []);

  const onClear = useCallback(() => {
    setValue(null);
    setInputValue('');
  }, []);

  const status = error ? 'alert' : undefined;

  return (
    <FieldWrapper label="Серийные номера" caption={error} status={status}>
      <TextField
        type="textarray"
        inputRef={ref}
        value={value}
        onChange={onChange}
        onInputChange={onInputChange}
        status={status}
        placeholder={mask}
        clearButton
        onClear={onClear}
      />
    </FieldWrapper>
  );
};
```

</MdxTabs>

## Пример использования

Базовый пример использования `TextField` с управляемым значением:

<MdxTabs>

<TextFieldExampleTextValue />

```tsx
import { useState } from 'react';
import { TextField } from '@consta/uikit/TextFieldCanary';

const App = () => {
  const [value, setValue] = useState('текст');

  return <TextField value={value} onChange={setValue} />;
};
```

</MdxTabs>
