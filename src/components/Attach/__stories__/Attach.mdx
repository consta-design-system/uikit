import { AttachExampleLoading } from './examples/AttachExampleLoading/AttachExampleLoading';
import { AttachExampleError } from './examples/AttachExampleError/AttachExampleError';
import { AttachExampleEvents } from './examples/AttachExampleEvents/AttachExampleEvents';
import { AttachExampleList } from './examples/AttachExampleList/AttachExampleList';
import { AttachExampleIcon } from './examples/AttachExampleIcon/AttachExampleIcon';
import { AttachExampleName } from './examples/AttachExampleName/AttachExampleName';

# Attach

С помощью этого компонента можно показывать файлы, которые загрузил пользователь:
показать процесс загрузки, уже загруженный файл, изменение загруженных файлов.

Например, чтобы загрузить в систему документы, прикрепить скриншот к форме обратной
связи, загрузить фотографии.


- [Свойства файла](#свойства-файла)
  - [Иконка](#иконка)
  - [Название](#название)
  - [Описание](#описание)
- [Загрузка файла](#загрузка-файла)
  - [Индикаторы загрузки](#индикаторы-загрузки)
  - [Ошибка при загрузке](#ошибка-при-загрузке)
- [Обработка событий](#обработка-событий)
  - [По клику на кнопку](#по-клику-на-кнопку)
  - [По клику на компонент](#по-клику-на-компонент)
- [Список свойств](#список-свойств)
- [Пример использования](#пример)

## Свойства файла

### Иконка

Иконка файла зависит от его расширения, за это отвечает свойство `fileExtension`.
Если вы укажете расширение, которого нет в нашей галерее иконок, пользователь
увидит иконку с вопросом. [Посмотреть иконки для файлов](?path=/story/components-file--gallery)



```ts
<Attach
  fileName="Картинка в JPG"
  fileExtension="jpg"
/>
```
```ts
<Attach
  fileName="Картинка в непонятном формате BZZ"
  fileExtension="bzz"
/>
```
<AttachExampleIcon />

Рядом с иконкой можно разместить информацию о файле.

### Название

За название отвечает свойство `fileName`. Сюда можно подставить имя файла, но лучше
придумать красивое название, которое будет понятно пользователям.

Например, если вы просите загрузить фотографию, скан паспорта и
сопроводительное письмо, загруженные файлы можно так и назвать.

```ts
<Attach
  className={cnAttachExampleList()}
  fileName="Фотография"
  fileExtension="jpg"
  fileDescription="1,5 Mб 19.07.2020, 16:11"
/>
```
``` ts
<Attach
  className={cnAttachExampleList()}
  fileName="Скан паспорта"
  fileExtension="pdf"
  fileDescription="1,5 Mб 19.07.2020, 16:12"
/>
```
```ts
<Attach
  className={cnAttachExampleList()}
  fileName="Сопроводительное письмо"
  fileExtension="docx"
  fileDescription="225 Mб 19.07.2020, 17:15"
/>
```


<AttachExampleList />

### Описание

За описание файла отвечает свойство `fileDescription`.  Мы предполагаем, что здесь удобно
показывать размер файла и время загрузки, но вы можете использовать его для любой
информации, которую считаете важной.

```ts
<Attach
  className={cnAttachExampleName()}
  fileName="Файл с нормальным описанием"
  fileExtension="jpg"
  fileDescription="14 Мб 01.04.2020, 07:01"
/>
```

```ts
<Attach
  className={cnAttachExampleName()}
  fileName="Файл с каким попало описанием"
  fileExtension="bzz"
  fileDescription="Крекс, пекс, фекс"
/>
```


<AttachExampleName />

## Загрузка файла

### Индикаторы загрузки

Чтобы показать, что файл загружается, используйте свойство `loading`. Тогда вместо
иконки файла пользователь увидит прелоадер.

Свойство `loadingText` отвечает за текст, который можно показать во время загрузки
файла. Значение по умолчанию — **Loading**.

`loadingProgress` позволяет показать прогресс загрузки файла в процентах.

```ts
<Attach
  fileName="Инструкция по сборке марсохода"
  fileExtension="docx"
  fileDescription="25,5 Mб 19.07.2020, 21:12"
  loadingText="Я ещё не загрузился, уже загружено"
  loading
  loadingProgress={70}
/>
```

<AttachExampleLoading />


### Ошибка при загрузке

Если во время загрузки файла произошла ошибка, вы можете показать, что случилось,
с помощью свойства `errorText`.

Постарайтесь в тексте ошибки объяснить пользователю не только, что произошло, но ещё
и почему так получилось и как это исправить.

<AttachExampleError />

```ts
<Attach
  fileName="Марсианский закат"
  fileExtension="jpg"
  errorText="Файл слишком большой, максимум 100 ТБ"
/>
```

## Обработка событий

### По клику на кнопку

Кнопка нужна, чтобы совершать с файлом дополнительные действия (например, удалить его).

`buttonIcon` отвечает за иконку на кнопке, она появится при наведении на компонент.
Иконку можно выбрать из [библиотеки иконок](?path=/story/components-icons--playground).

`buttonTitle` — всплывающая подсказка, появится при наведении на кнопку.

`onButtonClick` задаёт событие, которое обрабатывается при клике на кнопку.


### По клику на компонент

За обработку событий по клику на весь компонент отвечает свойство `onClick`.


> Не забудьте про всплытие событий


```ts
<Attach
  fileName="my_tale_about_mars_variant_121_final"
  fileExtension="docx"
  fileDescription="1,5 Mб 21.02.2051, 14:12"
  loadingText="Загрузка"
  buttonIcon={IconTrash}
  buttonTitle="Удалить"
  onClick={() => console.log('onClick')}
  onButtonClick={(e) => {
    e.stopPropagation();
    console.log('onButtonClick');
  }}
/>
```
<AttachExampleEvents />



## Свойства

<!-- props:start -->

| Свойство         | Тип                                     | По умолчанию  | Описание                                     |
| ---------------- | --------------------------------------- | ------------- | -------------------------------------------- |
| [`fileName`](#название)        | `string`                                | -             | Название файла файла                                    |
| [`fileDescription`](#описание) | `string`                                | -             | Описание файла файла                               |
| [`fileExtension`](#иконка)  | `string`                                | -             | Расширение файла файла                             |
| [`loading`](#загрузка-файла)        | `boolean`                               | -             | Прелоадер  загрузки                           |
| [`loadingProgress`](#индикаторы-загрузки) | `number`                                | -             | Степень загрузки файла в процентах        |
| [`loadingText`](#индикаторы-загрузки)    | `string`                                | `'Loading'`   | Текст, который видно во время загрузки       |
| [`errorText`](#ошибка-при-загрузке)     | `string`                                | -             | Текст ошибки при загрузке файла                              |
| [`onClick`](#по-клику-на-компонент)        | `React.EventHandler<React.MouseEvent>;` | -             | Событие для клика по всему компоненту          |
| [`onButtonClick`](#по-клику-на-кнопку) | `React.EventHandler<React.MouseEvent>;` | -             | Событие для клика по кнопке                      |
| [`buttonIcon`](#по-клику-на-кнопку)   | `React.FC<IconProps>;`                  | -             | Иконка для кнопки                            |
| [`buttonTitle`](#по-клику-на-кнопку)     | `string`                                | -             | Всплывающая подсказка для кнопки                                 |
| `className`      | `string`                                | -             | Дополнительный класс                         |
| `ref`            | `React.Ref<HTMLDivElement>`             | -             | Ссылка на корневой DOM-элемент компонента    |

<!-- props:end -->

## Пример использования

Использование компонента:

```ts
// src/App.ts
import React from 'react';
import { Attach } from '@gpn-design/uikit/Attach';

const App = () => {
  return <Attach fileName="Документация" extension="doc" />;
};
```
