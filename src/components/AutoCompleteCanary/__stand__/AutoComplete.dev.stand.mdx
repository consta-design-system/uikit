import { AutoCompleteExampleItems } from './examples/AutoCompleteExampleItems/AutoCompleteExampleItems';
import { AutoCompleteExampleDisabled } from './examples/AutoCompleteExampleDisabled/AutoCompleteExampleDisabled';
import {
  AutoCompleteExampleForm,
  AutoCompleteExampleDropdownForm,
} from './examples/AutoCompleteExampleForm/AutoCompleteExampleForm';
import { AutoCompleteExampleGroups } from './examples/AutoCompleteExampleGroups/AutoCompleteExampleGroups';
import { AutoCompleteExampleLabel } from './examples/AutoCompleteExampleLabel/AutoCompleteExampleLabel';
import { AutoCompleteExamplePlaceholder } from './examples/AutoCompleteExamplePlaceholder/AutoCompleteExamplePlaceholder';
import { AutoCompleteExampleRenderItem } from './examples/AutoCompleteExampleRenderItem/AutoCompleteExampleRenderItem';
import { AutoCompleteExampleSize } from './examples/AutoCompleteExampleSize/AutoCompleteExampleSize';
import { AutoCompleteExampleStatus } from './examples/AutoCompleteExampleStatus/AutoCompleteExampleStatus';
import {
  AutoCompleteExampleType,
  AutoCompleteExampleTypeEmail,
} from './examples/AutoCompleteExampleType/AutoCompleteExampleType';
import { AutoCompleteExampleView } from './examples/AutoCompleteExampleView/AutoCompleteExampleView';
import { AutoCompleteExampleVirtualScroll } from './examples/AutoCompleteExampleVirtualScroll/AutoCompleteExampleVirtualScroll';
import { AutoCompleteExampleDropdownOpen } from './examples/AutoCompleteExampleDropdownOpen/AutoCompleteExampleDropdownOpen';
import {
  AutoCompleteExampleIsLoading,
  AutoCompleteExampleOnScrollBottom,
} from './examples/AutoCompleteExampleIsLoading/AutoCompleteExampleIsLoading';
import { MdxMenu } from '@consta/stand';

```tsx
import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';
```

<MdxMenu>

- [Подсказки при наборе](#подсказки-при-наборе)
  - [Объект с подсказками](#объект-с-подсказками)
  - [Группы подсказок](#группы-подсказок)
  - [Поиск по подсказкам](#поиск-по-подсказкам)
- [Подсказка в поле (плейсхолдер)](#подсказка-в-поле-плейсхолдер)
- [Тип поля](#тип-поля)
- [Заголовок и подпись](#заголовок-и-подпись)
- [Статус](#статус-поля)
- [Размер](#размер)
- [Форма](#форма)
  - [Форма поля](#форма-поля)
  - [Форма списка](#форма-списка)
- [Внешний вид](#внешний-вид)
- [Виртуализация списка](#виртуализация-списка)
- [Индикация загрузки](#индикация-загрузки)
- [Неактивный выпадающий список](#неактивный-выпадающий-список)
- [Управление состоянием выподающего списка](#управление-состоянием-выподающего-списка)
- [Кастомизация](#кастомизация)
  - [Кастомный элемент списка](#кастомный-элемент-списка)
- [Импорт](#импорт)
- [Список свойств](#свойства)

</MdxMenu>

## Подсказки при наборе

Компонент выглядит, как обычное поле ввода. Если в этом поле что-то напечатать,
компонент найдёт все подсказки, в названии которых есть напечатанные символы и
покажет их в выпадающем списке.

Подсказки нужно собрать заранее и передать компоненту в свойстве `items`.

### Объект с подсказками

Элементы выпадающего списка, то есть подсказки, можно описать в объекте `items` типа [DefaultItem](#свойства). Что внутри:

- `label` — название элемента списка,
- `id` — уникальный ключ элемента,
- `groupId` — идентификатор [группы](#группы-подсказок), в которую входит этот элемент (если список разбит на группы).

Вы можете создать [кастомный тип данных для подсказок](#кастомный-элемент-списка) и использовать его.

### Группы подсказок

Чтобы разбить элементы списка на группы, создайте объект с группами и передайте
в свойстве `groups` типа [DefaultGroup](#свойства). Что внутри:

- `label` — название группы,
- `id` — уникальный ключ.

```tsx
import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoComplete';

type Item = {
  label: string;
  id: string | number;
  groupId?: string | number;
};

type Group = {
  label: string;
  id: string | number;
};

const items: Item[] = [
  {
    label: 'Чёрный',
    groupId: 1,
    id: 1,
  },
  {
    label: 'Белый',
    groupId: 1,
    id: 2,
  },
  {
    label: 'Синий',
    groupId: 1,
    id: 3,
  },
  {
    label: 'Красный',
    groupId: 1,
    id: 4,
  },
  {
    label: 'Сине-зелёный',
    groupId: 2,
    id: 5,
  },
  {
    label: 'Красно-коричневый',
    groupId: 2,
    id: 6,
  },
  ...
];

const groups: Group[] = [
  {
    id: 1,
    label: 'Первая группа',
  },
  {
    id: 2,
    label: 'Вторая группа',
  },
  {
    id: 3,
    label: 'Третья группа',
  },
];

const AutoCompleteExampleGroups = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
      <AutoComplete
        type="text"
        placeholder="Начните вводить цвет"
        value={value}
        items={items}
        groups={groups}
       onChange={setValue}
      />
  );
};
```

<AutoCompleteExampleGroups />

### Поиск по подсказкам

По умолчанию компонент ищет по `label` подсказки. Вы можете поменять параметры поиска с помощью `searchFunction`.

## Подсказка в поле (плейсхолдер)

Подсказка, которая видна, когда ни один вариант не выбран, задаётся в свойстве `placeholder`.
Сформулируйте подсказку так, чтобы стало понятно, что по клику на поле раскроется список вариантов, один из которых нужно выбрать.

Если не знаете, что написать в подсказке, используйте универсальное **Выберите**.

```tsx
import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

const AutoCompleteExamplePlaceholder = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
    <AutoComplete
      type="text"
      placeholder="Введите значение"
      value={value}
      items={items}
      onChange={setValue}
    />
  );
};
```

<AutoCompleteExamplePlaceholder />

## Тип поля

Свойство `type` определяет тип поля и тег, который будет для него использоваться. Варианты:

- `text` — поле для ввода текста в одну строку,`<input type="text">`.

- `textarea` — текстовое поле из нескольких строк, `<textarea></textarea>`, можно [регулировать количество строк и колонок](##LIBS.LIB.STAND/lib:uikit/stand:components-textfield-stable/hash:строки-и-колонки).

Здесь описаны основные типы, но вы можете использовать любые `input type`,
например, `<input type="email">`.

```tsx
import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];
const AutoCompleteExampleType = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
      <AutoComplete
        type="text"
        value={value}
        items={items}
       onChange={setValue}
      />
      <AutoComplete
        type="textarea"
        value={value}
        items={items}
       onChange={setValue}
      />
  );
};
```

<AutoCompleteExampleType />

```tsx
import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';

const getMailItems = (value: string | null | undefined): Item[] => {
  const postfixes = ['@gmail.com', '@yandex.com', '@mail.ru'];
  if (postfixes.find((el) => value?.includes(el))) {
    return [];
  }
  return postfixes.map((el, index) => ({
    id: index,
    label: `${value}${el}`,
  }));
};

const AutoCompleteExampleTypeEmail = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
    <AutoComplete
      type="email"
      value={value}
      items={getMailItems(value)}
      onChange={setValue}
    />
  );
};
```

<AutoCompleteExampleTypeEmail />

## Заголовок и подпись

Вы можете добавить к компоненту два необязательных элемента — заголовок и подпись.

Заголовок можно добавить с помощью свойства `label`.
За его расположение отвечает свойство `labelPosition`.
Варианты: `'top'` (над полем) или `'left'` (слева от поля), по умолчанию `'top'`.

Подпись можно добавить с помощью свойства `caption`.

```tsx
import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];
const AutoCompleteExampleLabel = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
    <AutoComplete
      type="text"
      label="Введите значение"
      value={value}
      items={items}
      onChange={setValue}
    />
  );
};
```

<AutoCompleteExampleLabel />

## Статус поля

С помощью статуса можно выделить поле: показать, где ошибка, или, наоборот,
отметить правильно заполненные поля.

За статус отвечает свойство `status`. Если оно не указано, поле будет обычным.

```tsx
import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];
const AutoCompleteExampleStatus = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
      <AutoComplete
        type="text"
        placeholder="default"
        caption="default"
        value={value}
        items={items}
       onChange={setValue}
      />
      <AutoComplete
        type="text"
        value={value}
        items={items}
        placeholder="alert"
        caption="alert"
        status="alert"
       onChange={setValue}
      />
      <AutoComplete
        type="text"
        value={value}
        items={items}
        placeholder="warning"
        caption="warning"
        status="warning"
       onChange={setValue}
      />
      <AutoComplete
        type="text"
        value={value}
        items={items}
        placeholder="success"
        caption="success"
        status="success"
       onChange={setValue}
      />
  );
};
```

<AutoCompleteExampleStatus />

## Размер

За размер компонента отвечает свойство `size`. Варианты: `xs`, `s` , `m` , `l` , по умолчанию `m`.

Компонент занимает всю ширину родительского блока.

```tsx
import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

const AutoCompleteExampleSize = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
      <AutoComplete
        type="text"
        placeholder="Размер xs"
        size="xs"
        value={value}
        items={items}
       onChange={setValue}
      />
      <AutoComplete
        type="text"
        placeholder="Размер s"
        value={value}
        items={items}
        size="s"
       onChange={setValue}
      />
      <AutoComplete
        type="text"
        placeholder="Размер m"
        value={value}
        items={items}
        size="m"
       onChange={setValue}
      />
      <AutoComplete
        type="text"
        placeholder="Размер l"
        value={value}
        items={items}
        size="l"
       onChange={setValue}
      />
  );
};
```

<AutoCompleteExampleSize />

## Форма

### Форма поля

За форму селекта отвечает свойство `form`. Варианты:
`default`, `brick`, `round`, `clearRound`, `roundClear`, `clearDefault`, `defaultClear`, `defaultBrick`, `brickDefault`, `brickClear`, `clearBrick`, `clearClear`. По умолчанию `default`.

```tsx
import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

const AutoCompleteExampleForm = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
      <AutoComplete
        type="text"
        placeholder="Форма round"
        form="round"
        value={value}
        items={items}
       onChange={setValue}
      />
      <AutoComplete
        type="text"
        placeholder="Форма defaultBrick"
        form="defaultBrick"
        value={value}
        items={items}
       onChange={setValue}
      />
  );
};
```

<AutoCompleteExampleForm />

### Форма выпадающего списка

За форму выпадающего списка с подсказками отвечает свойство `dropdownForm`.
Варианты: `default` (по умолчанию), `brick`, `round`.

```tsx
<AutoComplete
  type="text"
  placeholder="Форма списка round"
  dropdownForm="round"
  value={value}
  items={items}
 onChange={setValue}
/>
<AutoComplete
  type="text"
  placeholder="Форма списка brick"
  dropdownForm="brick"
  value={value}
  items={items}
 onChange={setValue}
/>
```

<AutoCompleteExampleDropdownForm />

## Внешний вид

За вид компонента отвечает свойство `view`. Варианты: `default`, `clear`, по умолчанию `default`.

Вид `view="clear"` используется, когда нужно создать кастомное поле ввода или обернуть его в контейнер. В этом случае поля с разными статусами и разной формы будут выглядеть одинаково.

> Для создания hover эффекта для view="`clear`", управляйте внешним видом контейнера, в котором находится AutoComplete.

```tsx
import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];
const AutoCompleteExampleView = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
      <AutoComplete
        type="text"
        value={value}
        view="default"
        items={items}
       onChange={setValue}
      />
      <AutoComplete
        type="text"
        value={value}
        items={items}
        view="clear"
       onChange={setValue}
      />
  );
};
```

<AutoCompleteExampleView />

## Виртуализация списка

Если список элементов очень большой, то стоит использовать виртуализацию скрола.

```tsx
import { Example } from '@consta/stand';
import React, { useState } from 'react';

import { AutoComplete } from '../../..';

type Item = {
  label: string;
  id: number;
  groupId: number;
};

type Group = {
  label: string;
  id: number;
};

const items: Item[] = new Array(100000).fill(null).map((_, i) => ({
  label: `Опция ${i + 1}`,
  groupId: Math.floor(i / 100) + 1,
  id: i,
}));

const groups: Group[] = new Array(items.length / 100)
  .fill(null)
  .map((_, i) => ({
    id: i + 1,
    label: `Группа ${i + 1}`,
  }));

export const AutoCompleteExampleVirtualScroll = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
    <AutoComplete
      placeholder="Чтобы посмотреть весь список, скрольте вниз"
      items={items}
      value={value}
      onChange={setValue}
      groups={groups}
      virtualScroll
      searchFunction={(item, searchValue) => {
        if (!searchValue) {
          return true;
        }
        return (
          item.label
            .toLocaleLowerCase()
            .indexOf(searchValue.toLocaleLowerCase()) !== -1
        );
      }}
    />
  );
};
```

<AutoCompleteExampleVirtualScroll />

## Индикация загрузки

Для отображения индикации загрузки укажите параметр `isLoading`

Пример ниже показывает, как можно загрузить данные после раскрытия списка.
Этот функционаол стоит использовать когда список сильно большой

```tsx
type Item = {
  label: string;
  id: number;
};

const useMockLoadData = (
  searchValue = '',
  timeout = 2000,
): [Item[], boolean, () => void] => {
  const [isLoading, setIsLoading] = useFlag();
  const [isStart, setIsStart] = useFlag();
  const [lenght, setLenght] = useState<number>(0);
  const isLoadingOffDebounce = useDebounce(setIsLoading.off, 2000);

  const items = useMemo(() => {
    if (searchValue) {
      return new Array(10000)
        .fill(null)
        .map((_, i) => ({
          label: `Опция ${i + 1}`,
          id: i,
        }))
        .filter(
          (item) =>
            item.label
              .toLocaleLowerCase()
              .indexOf(searchValue.toLocaleLowerCase()) !== -1,
        );
    }
    return new Array(lenght).fill(null).map((_, i) => ({
      label: `Опция ${i + 1}`,
      id: i,
    }));
  }, [lenght, searchValue]);

  useEffect(() => {
    if (isLoading) {
      setIsLoading.on();
      isLoadingOffDebounce();
    }
  }, [searchValue]);

  useEffect(() => {
    if (isStart) {
      setIsLoading.on();
    }

    const timeoutNumber = setTimeout(() => {
      if (isStart) {
        setLenght((state) => state + 100);
        setIsLoading.off();
        setIsStart.off();
      }
    }, timeout);

    return () => {
      clearTimeout(timeoutNumber);
    };
  }, [isStart]);

  useEffect(() => {
    return () => {
      setIsLoading.off();
      setIsStart.off();
    };
  }, []);

  return [searchValue && isLoading ? [] : items, isLoading, setIsStart.on];
};

export const AutoCompleteExampleIsLoading = () => {
  const [value, setValue] = useState<string | null>();
  const [data, isLoading, onFocus] = useMockLoadData();

  return (
    <AutoComplete
      placeholder="Кликните по полю ввода, чтобы данные загрузились"
      items={data}
      value={value}
      onChange={setValue}
      onFocus={onFocus}
      isLoading={isLoading}
      virtualScroll
      searchFunction={(item, searchValue) => {
        if (!searchValue) {
          return true;
        }
        return (
          item.label
            .toLocaleLowerCase()
            .indexOf(searchValue.toLocaleLowerCase()) !== -1
        );
      }}
    />
  );
};
```

<AutoCompleteExampleIsLoading />

Пример ниже показывает как можно дозагружать данные при скролле до конца списка.

```tsx
const useMockLoadData = (
  searchValue = '',
  timeout = 2000,
): [Item[], boolean, () => void] => {
  const [isLoading, setIsLoading] = useFlag();
  const [isStart, setIsStart] = useFlag();
  const [lenght, setLenght] = useState<number>(0);
  const isLoadingOffDebounce = useDebounce(setIsLoading.off, 2000);

  const items = useMemo(() => {
    if (searchValue) {
      return new Array(10000)
        .fill(null)
        .map((_, i) => ({
          label: `Опция ${i + 1}`,
          id: i,
        }))
        .filter(
          (item) =>
            item.label
              .toLocaleLowerCase()
              .indexOf(searchValue.toLocaleLowerCase()) !== -1,
        );
    }
    return new Array(lenght).fill(null).map((_, i) => ({
      label: `Опция ${i + 1}`,
      id: i,
    }));
  }, [lenght, searchValue]);

  useEffect(() => {
    if (isLoading) {
      setIsLoading.on();
      isLoadingOffDebounce();
    }
  }, [searchValue]);

  useEffect(() => {
    if (isStart) {
      setIsLoading.on();
    }

    const timeoutNumber = setTimeout(() => {
      if (isStart) {
        setLenght((state) => state + 100);
        setIsLoading.off();
        setIsStart.off();
      }
    }, timeout);

    return () => {
      clearTimeout(timeoutNumber);
    };
  }, [isStart]);

  useEffect(() => {
    return () => {
      setIsLoading.off();
      setIsStart.off();
    };
  }, []);

  return [searchValue && isLoading ? [] : items, isLoading, setIsStart.on];
};

export const AutoCompleteExampleOnScrollBottom = () => {
  const [value, setValue] = useState<string | null>(null);
  const [data, isLoading, onFocus] = useMockLoadData(value || '');

  return (
    <AutoComplete
      placeholder="Кликните по полю ввода, чтобы данные загрузились"
      items={data}
      value={value}
      onChange={setValue}
      onFocus={onFocus}
      isLoading={isLoading}
      virtualScroll
      onScrollToBottom={value ? undefined : onFocus}
      searchFunction={() => true}
    />
  );
};
```

<AutoCompleteExampleOnScrollBottom />

## Неактивный выпадающий список

Чтобы сделать весь комбобокс неактивным, добавьте `disabled`.

```tsx
import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

const AutoCompleteExampleDisabled = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
    <AutoComplete
      type="text"
      placeholder="Пример disabled"
      form="round"
      disabled
      value={value}
      items={items}
      onChange={setValue}
    />
  );
};
```

<AutoCompleteExampleDisabled />

## Управление состоянием выподающего списка

Для управлением состояния выподающего списка используйте следующие свойства:

- `dropdownOpen` - флаг открыт/закрыт
- `onDropdownOpen` - колбек отрабатывающий каждый раз при открытии/закрытии
- `ignoreClicksInsideRefs` - список ссылок на элементы по которым игнорируется клики

```tsx
type Item = {
  label: string;
  id: number | string;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

const Icon = withAnimateSwitcherHOC({
  startIcon: IconArrowDown,
  startDirection: 0,
  endDirection: 180,
});

export const AutoCompleteExampleDropdownOpen = () => {
  const [value, setValue] = useState<string | null>();
  const [open, setOpen] = useFlag();
  const buttonRef = useRef<HTMLButtonElement>(null);
  const inputRef = useRef<HTMLInputElement>(null);
  const onDropdownOpen = useCallback((open: boolean) => {
    setOpen.set(open);
    if (open) {
      inputRef.current?.focus();
    }
  }, []);

  return (
    <Example col={1}>
      <AnimateIconSwitcherProvider active={open}>
        <FieldGroup>
          <Button
            ref={buttonRef}
            label={open ? 'Закрыть' : 'Открыть'}
            onClick={setOpen.toggle}
            iconLeft={Icon}
            onlyIcon
          />
          <AutoComplete
            inputRef={inputRef}
            placeholder="Выберите вариант"
            items={items}
            value={value}
            onChange={setValue}
            dropdownOpen={open}
            onDropdownOpen={onDropdownOpen}
            ignoreOutsideClicksRefs={[buttonRef]}
            searchFunction={(item, searchValue) => {
              if (!searchValue) {
                return true;
              }
              return (
                item.label
                  .toLocaleLowerCase()
                  .indexOf(searchValue.toLocaleLowerCase()) !== -1
              );
            }}
          />
        </FieldGroup>
      </AnimateIconSwitcherProvider>
    </Example>
  );
};
```

<AutoCompleteExampleDropdownOpen />

# Кастомизация

### Кастомный элемент списка

Чтобы создать свое представление элементов списка, используйте свойство `renderItem`.
Свойство принимает [функцию рендера](https://reactjs.org/docs/render-props.html).

#### Пример с кастомным элементом списка и своей функцией поиска

```tsx
import './AutoCompleteExampleRenderItem.css';

import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';
import { IconEdit } from '@consta/uikit/IconEdit';

type Item = {
  label: string;
  id: number;
};

const items: Item[] = [
  {
    label: 'Первый',
    id: 1,
  },
  {
    label: 'Второй',
    id: 2,
  },
  {
    label: 'Третий',
    id: 3,
  },
];

const AutoCompleteExampleRenderItem = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
    <AutoComplete
      type="text"
      value={value}
      items={items}
      renderItem={({ item, active, hovered, onClick, onMouseEnter, ref }) => (
        <div
          aria-selected={active}
          aria-hidden="true"
          onMouseEnter={onMouseEnter}
          onClick={onClick}
          ref={ref}
        >
          <IconEdit />
          {item.label}
        </div>
      )}
      onChange={setValue}
    />
  );
};
```

### Кастомные типы данных для групп и вариантов

Вы можете использовать кастомные типы данных для элементов списка (items) и групп (groups) — они могут отличаться от [DefaultItem](#свойства) и [DefaultGroup](#свойства).

В этом случае нужно использовать геттеры `getItemLabel`, `getItemKey`, `getItemGroupKey`, `getItemDisabled`, `getGroupLabel`, `getGroupKey`, чтобы компонент понимал, откуда брать данные.

#### Геттеры по умолчанию

```ts
const defaultGetItemKey = (item) => item.id;
const defaultGetItemLabel = (item) => item.label;
const defaultGetItemGroupKey = (item) => item.groupId;
const defaultGetItemDisabled = (item) => item.disabled;
const defaultGetGroupKey = (group) => group.id;
const defaultGetGroupLabel = (group) => group.label;
```

#### Пример с кастомным Item

```tsx
import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';

const basicItems = ['Первый', 'Второй', 'Третий', 'Четвертый', 'Пятый'];

const AutoCompleteExampleItems = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
    <AutoComplete
      type="text"
      placeholder="Введите значение"
      value={value}
      items={basicItems}
      getItemKey={(item) => item}
      getItemLabel={(item) => item}
      onChange={setValue}
    />
  );
};
```

<AutoCompleteExampleItems />

## Импорт

```tsx
import { AutoComplete } from '@consta/uikit/AutoComplete';
```

## Свойства

```tsx
type AutoCompleteItemDefault = {
  id: string | number;
  label: string;
  groupId?: number;
};

type AutoCompleteGroupDefault = {
  label: string;
  id: number | string;
};

type AutoCompletePropDropdownForm = 'default' | 'brick' | 'round';

type AutoCompletePropGetItemLabel<ITEM> = (item: ITEM) => string;
type AutoCompletePropGetItemKey<ITEM> = (item: ITEM) => string | number;
type AutoCompletePropGetItemGroupId<ITEM> = (item: ITEM) => number | undefined;
type AutoCompletePropGetGroupLabel<GROUP> = (group: GROUP) => string;
type AutoCompletePropGetGroupId<GROUP> = (group: GROUP) => number | string;

type AutoCompletePropOnChange = (
  value: string | null,
  props: {
    e: React.ChangeEvent | React.MouseEvent | React.KeyboardEvent;
    id?: string;
    name?: string;
    value: string | null;
  },
) => void;
```

| Свойство                                                                                                        | Тип                                                                                                                                                                 | По умолчанию                                                                         | Описание                                                                                                                                     |
| --------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------- |
| [`items`](#содержимое)                                                                                          | `ITEM[]`                                                                                                                                                            | -                                                                                    | Объект с подсказками, которые появляются, когда пользователь начинает что-то вводить в поле                                                  |
| [`groups?`](#группы-подсказок)                                                                                  | `GROUP[]`                                                                                                                                                           | -                                                                                    | Группы подсказок                                                                                                                             |
| [`type?`](#тип-поля)                                                                                            | `'text'`, `'textarea'`                                                                                                                                              | `'text'`                                                                             | Тип поля (и тег для поля в DOM)                                                                                                              |
| [`status?`](#статус-поля)                                                                                       | `'', 'alert', 'success', 'warning'`                                                                                                                                 | `' '`                                                                                | Тип поля                                                                                                                                     |
| [`disabled?`](#внешний-вид)                                                                                     | `boolean`                                                                                                                                                           | -                                                                                    | Делает поле неактивным                                                                                                                       |
| [`size?`](#размер)                                                                                              | `'xs', 's', 'm', 'l'`                                                                                                                                               | `'m'`                                                                                | Размер шрифта, отступы и высота поля                                                                                                         |
| [`rows?`](##LIBS.LIB.STAND/lib:uikit/stand:components-textfield-stable/hash:#строки-и-колонки)                  | `number`                                                                                                                                                            | -                                                                                    | Количество строк, работает только с `type='textarea'`, нельзя использовать вместе с `minRows` и `maxRows`                                    |
| [`cols?`](##LIBS.LIB.STAND/lib:uikit/stand:components-textfield-stable/hash:#строки-и-колонки)                  | `number`                                                                                                                                                            | -                                                                                    | Количество колонок                                                                                                                           |
| [`minRows?`](##LIBS.LIB.STAND/lib:uikit/stand:components-textfield-stable/hash:#строки-и-колонки)               | `number`                                                                                                                                                            | -                                                                                    | Минимум видимых строк, работает только с `type='textarea'`, нельзя использовать вместе с `rows`                                              |
| [`maxRows?`](##LIBS.LIB.STAND/lib:uikit/stand:components-textfield-stable/hash:#строки-и-колонки)               | `number`                                                                                                                                                            | -                                                                                    | Максимум видимых строк, работает только с `type='textarea'`, нельзя использовать вместе с `rows`                                             |
| [`maxLength?`](##LIBS.LIB.STAND/lib:uikit/stand:components-textfield-stable/hash:#строки-и-колонки)             | `number`                                                                                                                                                            | -                                                                                    | Максимальная ширина                                                                                                                          |
| [`withClearButton?`](##LIBS.LIB.STAND/lib:uikit/stand:components-textfield-stable/hash:кнопка-для-очистки-поля) | `boolean`                                                                                                                                                           | `false`                                                                              | Отображать ли кнопку-крестик для очистки поля ввода                                                                                          |
| [`view?`](#внешний-вид)                                                                                         | `'default', 'clear'`                                                                                                                                                | `'default'`                                                                          | Внешний вид поля                                                                                                                             |
| `label?`                                                                                                        | `string`                                                                                                                                                            | -                                                                                    | Лейбл к полю ввода                                                                                                                           |
| `labelIcon?`                                                                                                    | `IconComponent`                                                                                                                                                     | -                                                                                    | Иконка слева от лейбла                                                                                                                       |
| `labelPosition?`                                                                                                | `'top', 'left'`                                                                                                                                                     | `'top'`                                                                              | Положение лейбла относительно поля                                                                                                           |
| `caption?`                                                                                                      | `string`                                                                                                                                                            | -                                                                                    | Подпись под полем ввода                                                                                                                      |
| [`form?`](#форма)                                                                                               | `'default', 'brick', 'round', 'clearRound', 'roundClear', 'clearDefault', 'defaultClear', 'defaultBrick', 'brickDefault', 'brickClear', 'clearBrick', 'clearClear'` | `'default'`                                                                          | Форма поля                                                                                                                                   |
| [`leftSide?`](##LIBS.LIB.STAND/lib:uikit/stand:components-textfield-stable/hash:дополнительная-информация)      | `IconComponent, string`                                                                                                                                             | -                                                                                    | Иконка или текст слева, внутри поля                                                                                                          |
| [`rightSide?`](##LIBS.LIB.STAND/lib:uikit/stand:components-textfield-stable/hash:дополнительная-информация)     | `IconComponent, string`                                                                                                                                             | -                                                                                    | Иконка или текст справа, внутри поля. Не работает с `type='number'`                                                                          |
| [`value?`](##LIBS.LIB.STAND/lib:uikit/stand:components-textfield-stable/hash:значение)                          | `string`, `null`                                                                                                                                                    | -                                                                                    | Предустановленное значение в поле                                                                                                            |
| [`placeholder?`](#подсказка)                                                                                    | `string`                                                                                                                                                            | -                                                                                    | Подсказка внутри поля                                                                                                                        |
| `id?`                                                                                                           | `string`                                                                                                                                                            | -                                                                                    | ID поля в DOM                                                                                                                                |
| `name?`                                                                                                         | `string`                                                                                                                                                            | -                                                                                    | Имя поля в DOM                                                                                                                               |
| [`required?`](##LIBS.LIB.STAND/lib:uikit/stand:components-textfield-stable/hash:обязательность)                 | `boolean`                                                                                                                                                           | -                                                                                    | Нужно заполнить                                                                                                                              |
| `tabIndex?`                                                                                                     | `number`                                                                                                                                                            | -                                                                                    | Порядковый номер при переходе между элементами интерфейса по клавише **tab**                                                                 |
| [`autoFocus?`](##LIBS.LIB.STAND/lib:uikit/stand:components-textfield-stable/hash:фокус)                         | `boolean`                                                                                                                                                           | -                                                                                    | Перемещает фокус в поле                                                                                                                      |
| `onFocus?`                                                                                                      | `React.FocusEventHandler<HTMLElement>`                                                                                                                              | -                                                                                    | Действие по фокусу                                                                                                                           |
| `onBlur?`                                                                                                       | `React.FocusEventHandler<HTMLElement>`                                                                                                                              | -                                                                                    | Действие при потере фокуса                                                                                                                   |
| `autoComplete?`                                                                                                 | [`AutoCompete`](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete)                                                                          | -                                                                                    | Автозаполнение поля ввода — аналог HTML-атрибута [`autocomplete`](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete) |
| `onChange?`                                                                                                     | `AutoCompletePropOnChange`                                                                                                                                          | -                                                                                    | Действие при изменении текстового поля                                                                                                       |
| `className?`                                                                                                    | `string`                                                                                                                                                            | -                                                                                    | Дополнительный CSS-класс                                                                                                                     |
| `inputRef?`                                                                                                     | `React.Ref<HTMLTextAreaElement` <code>&#124;</code> `HTMLInputElement>`                                                                                             | -                                                                                    | Ссылка на DOM-элемент поля ввода                                                                                                             |
| `inputContainerRef?`                                                                                            | `React.Ref<HTMLDivElement>`                                                                                                                                         | -                                                                                    | Ссылка на DOM-элемент контейнера поля ввода                                                                                                  |
| `ref?`                                                                                                          | `React.Ref<HTMLDivElement>`                                                                                                                                         | -                                                                                    | Ссылка на корневой DOM-элемент компонента                                                                                                    |
| [`searchFunction?`](#поиск)                                                                                     | `AutoCompletePropSearchFunction<ITEM>`                                                                                                                              | Поиск по `label` элементов из объекта `item` или полученных с помощью `getItemLabel` | Функция поиска                                                                                                                               |
| [`renderItem?`](#пример-с-кастомным-элементом-списка-и-своей-функцией-поиска)                                   | `PropRenderItem<ITEM>`                                                                                                                                              | рендер по умолчанию                                                                  | Рендер-функция для элемента списка                                                                                                           |
| `getItemLabel?`                                                                                                 | `AutoCompletePropGetItemLabel<ITEM>`                                                                                                                                | `(item) => item.label`                                                               | Функция для определения названия элемента                                                                                                    |
| `getItemKey?`                                                                                                   | `AutoCompletePropGetItemKey<ITEM>`                                                                                                                                  | `(item) => item.id`                                                                  | Функция для определения уникального ключа элемента                                                                                           |
| `getItemGroupKey?`                                                                                              | `AutoCompletePropGetItemGroupKey<ITEM>`                                                                                                                             | `(item) => item.groupId`                                                             | Функция для определения ключа группы, к которой будет привязан элемент                                                                       |
| `getGroupLabel?`                                                                                                | `AutoCompletePropGetGroupKey<GROUP>`                                                                                                                                | `(group) => group.id`                                                                | Функция для определения названия группы                                                                                                      |
| `getGroupKey?`                                                                                                  | `AutoCompletePropGetGroupLabel<GROUP>`                                                                                                                              | `(group) => group.label`                                                             | Функция для определения уникального ключа группы                                                                                             |
| `isLoading?`                                                                                                    | `boolean`                                                                                                                                                           | -                                                                                    | Отображает лоадер при загрузке                                                                                                               |
| `dropdownClassName?`                                                                                            | `string`                                                                                                                                                            | -                                                                                    | Дополнительный CSS-класс для выпадающего блока с подсказками                                                                                 |
| `dropdownForm?`                                                                                                 | `'default', 'brick', 'round'`                                                                                                                                       | `'default'`                                                                          | Форма выпадающего блока с подсказками                                                                                                        |
| `dropdownRef?`                                                                                                  | `React.RefObject<HTMLDivElement>`                                                                                                                                   | -                                                                                    | Ссылка на DOM-элемент выпадающего списка                                                                                                     |
| `virtualScroll?`                                                                                                | `boolean`                                                                                                                                                           | -                                                                                    | Включает виртуализацию скрола                                                                                                                |
| `onScrollToBottom?`                                                                                             | `() => void;`                                                                                                                                                       | -                                                                                    | Колбэк сработает при скроле до конца списка                                                                                                  |

## Пример

```tsx
import React, { useState } from 'react';

import { AutoComplete } from '@consta/uikit/AutoCompleteCanary';

const getMailItems = (value: string | null | undefined): Item[] => {
  const postfixes = ['@gmail.com', '@yandex.com', '@mail.ru'];
  if (postfixes.find((el) => value?.includes(el))) {
    return [];
  }
  return postfixes.map((el, index) => ({
    id: index,
    label: `${value}${el}`,
  }));
};

const AutoCompleteExampleTypeEmail = () => {
  const [value, setValue] = useState<string | null>(null);
  return (
    <AutoComplete
      type="email"
      value={value}
      items={getMailItems(value)}
      onChange={setValue}
    />
  );
};
```
