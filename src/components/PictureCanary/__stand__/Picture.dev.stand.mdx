import { MdxMenu } from '@consta/stand';
import { PictureExample } from './examples/PictureExample/PictureExample';
import { PictureExampleGetImageSettings } from './examples/PictureExampleGetImageSettings/PictureExampleGetImageSettings';
import { PictureExampleResizeMode } from './examples/PictureExampleResizeMode/PictureExampleResizeMode';

```tsx
import { Picture } from '@consta/uikit/PictureCanary';
```

<MdxMenu>

- [Изображения](#изображения)
- [Функция определения свойств](#функция-определения-свойств)
- [Адаптивность](#адаптивность)
- [Список свойств](#свойства)

</MdxMenu>

## Изображения

Для того чтобы указать исходные изображения или изображение необходимо определить свойство `src`. Оно может принимать как строку, так и объект ключ - значение,
где ключ содержит в себе параметры изображения.

```tsx
<Picture
  alt={alt}
  title={title}
  resizeMode={resizeMode}
  src={{
    'gpnDefault--0--1x': ImageSmall1xDefault,
    'gpnDefault--0--2x': ImageSmall2xDefault,
    'gpnDefault--0--4x': ImageSmall3xDefault,
    'gpnDefault--500--1x': ImageMedium1xDefault,
    'gpnDefault--500--2x': ImageMedium2xDefault,
    'gpnDefault--500--4x': ImageMedium3xDefault,
    'gpnDefault--1000--1x': ImageBig1xDefault,
    'gpnDefault--100--2x': ImageBig2xDefault,
    'gpnDefault--1000--4x': ImageBig3xDefault,
    'gpnDisplay--0--1x': ImageSmall1xDisplay,
    'gpnDisplay--0--2x': ImageSmall2xDisplay,
    'gpnDisplay--0--4x': ImageSmall3xDisplay,
    'gpnDisplay--500--1x': ImageMedium1xDisplay,
    'gpnDisplay--500--2x': ImageMedium2xDisplay,
    'gpnDisplay--500--4x': ImageMedium3xDisplay,
    'gpnDisplay--1000--1x': ImageBig1xDisplay,
    'gpnDisplay--100--2x': ImageBig2xDisplay,
    'gpnDisplay--1000--4x': ImageBig3xDisplay,
    'gpnDark--0--1x': ImageSmall1xDark,
    'gpnDark--0--2x': ImageSmall2xDark,
    'gpnDark--0--4x': ImageSmall3xDark,
    'gpnDark--500--1x': ImageMedium1xDark,
    'gpnDark--500--2x': ImageMedium2xDark,
    'gpnDark--500--4x': ImageMedium3xDark,
    'gpnDark--1000--1x': ImageBig1xDark,
    'gpnDark--100--2x': ImageBig2xDark,
    'gpnDark--1000--4x': ImageBig3xDark,
  }}
/>
```

<PictureExample />

По умолчанию первым параметром указывается название темы, вторым разрешение, начиная с которого изображение будет отображаться, а на третьем дескриптор (физическая ширина картинки или плотность пикселей устройства DPR)

## Функция определения свойств

Если вы используете свой метод именования ключей, тогда определите свойство `getImageSettings`. Эта функция принимает ключ и возвращает объект:

- `theme` - тема для которой показывается картинка,
- `size` - размер, начиная с которого изображение отображается,
- `descriptor` - дескриптор

```tsx
const themeMap: Record<string, string> = {
  default: 'gpnDefault',
  display: 'gpnDisplay',
  dark: 'gpnDark',
};

export const PictureExampleGetImageSettings = () => {
  const getImageSettings = (key: string) => {
    const parts = key.split('_');
    return {
      theme: themeMap[parts[0]],
      size: Number(parts[1].replace(/[^0-9.]+/g, '')),
      descriptor: parts[2],
    };
  };

  return (
    <Picture
      src={{
        default_0px_1x: ImageSmall1xDefault,
        default_0px_2x: ImageSmall2xDefault,
        default_0px_4x: ImageSmall3xDefault,
        default_500px_1x: ImageMedium1xDefault,
        default_500px_2x: ImageMedium2xDefault,
        default_500px_4x: ImageMedium3xDefault,
        default_1000px_1x: ImageBig1xDefault,
        default_100px_2x: ImageBig2xDefault,
        default_1000px_4x: ImageBig3xDefault,
        display_0px_1x: ImageSmall1xDisplay,
        display_0px_2x: ImageSmall2xDisplay,
        display_0px_4x: ImageSmall3xDisplay,
        display_500px_1x: ImageMedium1xDisplay,
        display_500px_2x: ImageMedium2xDisplay,
        display_500px_4x: ImageMedium3xDisplay,
        display_1000px_1x: ImageBig1xDisplay,
        display_100px_2x: ImageBig2xDisplay,
        display_1000px_4x: ImageBig3xDisplay,
        dark_0px_1x: ImageSmall1xDark,
        dark_0px_2x: ImageSmall2xDark,
        dark_0px_4x: ImageSmall3xDark,
        dark_500px_1x: ImageMedium1xDark,
        dark_500px_2x: ImageMedium2xDark,
        dark_500px_4x: ImageMedium3xDark,
        dark_1000px_1x: ImageBig1xDark,
        dark_100px_2x: ImageBig2xDark,
        dark_1000px_4x: ImageBig3xDark,
      }}
      getImageSettings={getImageSettings}
    />
  );
};
```

<PictureExampleGetImageSettings />

## Адаптивность

Отображать значение по разрешению можно в двух режимах: в зависимости от ширины экрана `window` и в зависимости от ширины компонента `component`.

```tsx
export const PictureExampleResizeMode = () => {
  const getImageSettings = (key: string) => {
    if (key === 'dark') {
      return {
        size: 0,
      };
    }
    return {
      size: 700,
    };
  };

  const componentRef = useRef<HTMLImageElement>(null);

  return (
    <>
      <Picture
        src={{
          dark: ImageDark,
          light: ImageLight,
        }}
        resizeContainer={window}
        getImageSettings={getImageSettings}
      />
      <Picture
        src={{
          dark: ImageDark,
          light: ImageLight,
        }}
        ref={componentRef}
        resizeContainer={componentRef}
        getImageSettings={getImageSettings}
      />
    </>
  );
};
```

<PictureExampleResizeMode />

## Cвойства

```tsx
export type PicturePropGetImageSettings = (image: string) => {
  theme?: string;
  size?: number;
  descriptor?: string;
};

export type PicturePropSrc = string | Record<string, string>;
```

| Свойство                                            | Тип                              | По умолчанию              | Описание                                                   |
| --------------------------------------------------- | -------------------------------- | ------------------------- | ---------------------------------------------------------- |
| [`src?`](#изображения)                              | `PicturePropSrc`                 | -                         | Изображение или объект с изображениями                     |
| [`getImageSettings?`](#функция-определения-свойств) | `PicturePropGetImageSettings`    | `defaultGetImageSettings` | Функция получения параметров отображения картинки          |
| [`resizeContainer?`](#адаптивность)                 | `Window, React.Ref<HTMLElement>` | `window`                  | Контейнер, относительно которого просчитываем адаптивность |
| `alt?`                                              | `string`                         | -                         | Альтернативное текстовое описание изображения              |
| `title?`                                            | `string`                         | -                         | Отображаемая подзказка                                     |
| `className?`                                        | `string`                         | -                         | Дополнительный CSS-класс                                   |
| `ref`                                               | `React.Ref<HTMLDivElement>`      | -                         | Ссылка на корневой DOM-элемент этого компонента            |
