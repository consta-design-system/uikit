import { MdxMenu, MdxTabs } from '@consta/stand';

import { ChoiceGroupExampleIcon } from './examples/ChoiceGroupExampleIcon/ChoiceGroupExampleIcon';
import { ChoiceGroupExampleView } from './examples/ChoiceGroupExampleView/ChoiceGroupExampleView';
import { ChoiceGroupExampleForm } from './examples/ChoiceGroupExampleForm/ChoiceGroupExampleForm';
import { ChoiceGroupExampleSize } from './examples/ChoiceGroupExampleSize/ChoiceGroupExampleSize';
import {
  ChoiceGroupExample,
  ChoiceGroupExampleText,
} from './examples/ChoiceGroupExampleText/ChoiceGroupExampleText';
import { ChoiceGroupExampleTextOverflow } from './examples/ChoiceGroupExampleTextOverflow/ChoiceGroupExampleTextOverflow';
import { ChoiceGroupExampleWidth } from './examples/ChoiceGroupExampleWidth/ChoiceGroupExampleWidth';
import {
  ChoiceGroupExampleOne,
  ChoiceGroupExampleMultiple,
} from './examples/ChoiceGroupExampleMultiple/ChoiceGroupExampleMultiple';

import {
  ChoiceGroupExampleSwitchPolar,
  ChoiceGroupExampleSwitchMode,
  ChoiceGroupExampleSwitchLetters,
} from './examples/ChoiceGroupExampleSwitch/ChoiceGroupExampleSwitch';
import { ChoiceGroupExampleDisabled } from './examples/ChoiceGroupExampleDisabled/ChoiceGroupExampleDisabled';
import { ChoiceGroupExampleSomeDisabled } from './examples/ChoiceGroupExampleSomeDisabled/ChoiceGroupExampleSomeDisabled';
import {
  ChoiceGroupExampleAdaptiveScroll,
  ChoiceGroupExampleAdaptiveUseBreakpoints,
} from './examples/ChoiceGroupExampleAdaptive/ChoiceGroupExampleAdaptive';

<MdxMenu>

- [Обзор](#обзор)
- [Импорт](#импорт)
- [Свойства](#свойства)
- [Содержимое](#содержимое)
  - [Текст на кнопках](#текст-на-кнопках)
  - [Иконки](#иконки)
- [Внешний вид](#внешний-вид)
  - [Форма кнопок](#форма-кнопок)
  - [Размер](#размер)
  - [Ширина](#ширина)
  - [Стиль](#стиль)
- [Поведение](#поведение)
  - [Один или несколько вариантов](#один-или-несколько-вариантов)
  - [Неактивные кнопки](#неактивные-кнопки)
- [Адаптивность](#адаптивность)
  - [Прокрутка](#прокрутка)
  - [Преобразование в RadioGroup](#преобразование-в-radiogroup)
- [Пример использования](#пример-использования)

</MdxMenu>

## Обзор

Компонент `ChoiceGroup` — это группа кнопок, которая позволяет пользователю выбрать один или несколько вариантов из предложенных. Используется для представления набора опций, таких как фильтры, переключатели или выбор настроек. Поддерживает настройку текста, иконок, внешнего вида, размеров и поведения.

## Импорт

```tsx
import { ChoiceGroup } from '@consta/uikit/ChoiceGroup';
```

## Свойства

| Свойство                                    | Тип                                   | По умолчанию | Описание                                                                                                                                  |
| ------------------------------------------- | ------------------------------------- | ------------ | ----------------------------------------------------------------------------------------------------------------------------------------- |
| [`items`](#текст-на-кнопках)                | `ITEM[]`                              | -            | Элементы для отображения в группе кнопок                                                                                                  |
| [`multiple`](#один-или-несколько-вариантов) | `boolean`                             | `false`      | Разрешает выбор нескольких вариантов                                                                                                      |
| [`value`](#один-или-несколько-вариантов)    | `ChoiceGroupPropValue`                | -            | Текущее значение (выбранный элемент или массив элементов)                                                                                 |
| [`onChange`](#один-или-несколько-вариантов) | `ChoiceGroupPropOnChange`             | -            | Обработчик события при выборе элемента                                                                                                    |
| [`name`](#один-или-несколько-вариантов)     | `string`                              | -            | Имя `<input>` для доступности                                                                                                             |
| [`getItemLabel?`](#текст-на-кнопках)        | `ChoiceGroupPropGetItemLabel`         | -            | Функция для формирования текста кнопки или всплывающей подсказки (при `onlyIcon = true`). Также используется как уникальный ключ элемента |
| [`getItemIcon?`](#иконки)                   | `ChoiceGroupPropGetItemIcon`          | -            | Функция для указания иконки на кнопке                                                                                                     |
| [`onlyIcon?`](#иконки)                      | `boolean`                             | `false`      | Показывает только иконку, текст отображается во всплывающей подсказке                                                                     |
| [`size?`](#размер)                          | `'xs' \| 's' \| 'm' \| 'l'`           | `'m'`        | Размер кнопок                                                                                                                             |
| [`form?`](#форма-кнопок)                    | `'default' \| 'brick' \| 'round'`     | `'default'`  | Форма кнопок                                                                                                                              |
| [`view?`](#внешний-вид)                     | `'primary' \| 'ghost' \| 'secondary'` | `'primary'`  | Внешний вид кнопок                                                                                                                        |
| [`width?`](#ширина)                         | `'default' \| 'full'`                 | `'default'`  | Ширина компонента                                                                                                                         |
| [`disabled?`](#неактивные-кнопки)           | `boolean`                             | `false`      | Делает всю группу кнопок неактивной                                                                                                       |
| [`getItemDisabled?`](#неактивные-кнопки)    | `ChoiceGroupPropGetItemDisabled`      | -            | Функция для указания неактивного состояния отдельных кнопок                                                                               |
| [`truncate?`](#текст-на-кнопках)            | `boolean`                             | `false`      | Обрезает длинный текст на кнопках, добавляя многоточие                                                                                    |
| `getItemAttributes?`                        | `ChoiceGroupPropGetItemAttributes`    | -            | Функция для получения дополнительных атрибутов элемента                                                                                   |
| `getItemRef?`                               | `ChoiceGroupPropGetItemRef`           | -            | Функция для получения ссылки на DOM-элемент кнопки                                                                                        |
| `className?`                                | `string`                              | -            | Дополнительный CSS-класс для компонента                                                                                                   |
| `ref?`                                      | `React.Ref<HTMLDivElement>`           | -            | Ссылка на корневой DOM-элемент компонента                                                                                                 |

## Содержимое

### Текст на кнопках

Текст для кнопок задаётся через свойство `items` и формируется с помощью функции `getItemLabel` или поля `label` в объекте элемента. Если текст слишком длинный, используйте свойство `truncate`, чтобы обрезать текст и добавить многоточие.

<MdxTabs>

<ChoiceGroupExample />

```tsx
type Item = string;

const items: Item[] = ['один', 'два', 'три', 'четыре', 'пять', 'шесть'];

export const ChoiceGroupExample = () => {
  const [value, setValue] = useState<Item | null>(items[0]);
  return (
    <ChoiceGroup
      value={value}
      onChange={setValue}
      items={items}
      getItemLabel={(item) => item}
      multiple={false}
      name="ChoiceGroupExample"
    />
  );
};
```

</MdxTabs>

### Иконки

Для добавления иконок используйте функцию `getItemIcon` или поле `icon` в объекте элемента. Свойство `onlyIcon` позволяет отображать только иконку, скрывая текст (текст показывается во всплывающей подсказке при наведении).

<MdxTabs>

<ChoiceGroupExampleIcon />

```tsx
<>
  <ChoiceGroup
    value={value}
    onChange={setValue}
    items={[
      { name: 'Первый', icon: IconPhoto },
      { name: 'Второй', icon: IconRing },
      { name: 'Третий вариант', icon: IconCamera },
    ]}
    getItemLabel={(item) => item.name}
    getItemIcon={(item) => item.icon}
    name="ChoiceGroupExampleIcon"
    multiple={false}
  />
  <ChoiceGroup
    value={value}
    onChange={setValue}
    items={[
      { name: 'Первый', icon: IconPhoto },
      { name: 'Второй', icon: IconRing },
      { name: 'Третий вариант', icon: IconCamera },
    ]}
    getItemLabel={(item) => item.name}
    getItemIcon={(item) => item.icon}
    onlyIcon
    name="ChoiceGroupExampleIcon"
    multiple={false}
  />
</>
```

</MdxTabs>

## Внешний вид

### Форма кнопок

Свойство `form` определяет форму кнопок. Доступные варианты: `'default'`, `'brick'`, `'round'`.

<MdxTabs>

<ChoiceGroupExampleForm />

```tsx
<ChoiceGroup
  value={value}
  onChange={setValue}
  items={['один', 'два', 'три']}
  getItemLabel={(item) => item}
  form="default"
  name="ChoiceGroupExampleForm"
  multiple={false}
/>
```

</MdxTabs>

### Размер

Свойство `size` задаёт размер кнопок. Доступные варианты: `'xs'`, `'s'`, `'m'`, `'l'`.

<MdxTabs>

<ChoiceGroupExampleSize />

```tsx
<ChoiceGroup
  value={value}
  onChange={setValue}
  items={['один', 'два', 'три']}
  getItemLabel={(item) => item}
  size="xs"
  name="ChoiceGroupExampleSize"
  multiple={false}
/>
```

</MdxTabs>

### Ширина

Свойство `width` управляет шириной компонента. Варианты: `'default'` (по содержимому) или `'full'` (на всю ширину контейнера).

<MdxTabs>

<ChoiceGroupExampleWidth />

```tsx
<ChoiceGroup
  value={value}
  onChange={setValue}
  items={['один', 'два', 'три']}
  getItemLabel={(item) => item}
  multiple={false}
  width="full"
  name="ChoiceGroupExampleWidth"
/>
```

</MdxTabs>

### Стиль

Свойство `view` определяет стиль кнопок. Варианты: `'primary'`, `'ghost'`, `'secondary'`.

<MdxTabs>

<ChoiceGroupExampleView />

```tsx
<ChoiceGroup
  value={value}
  onChange={setValue}
  items={['один', 'два', 'три']}
  getItemLabel={(item) => item}
  view="primary"
  multiple={false}
  name="ChoiceGroupExampleView"
/>
```

</MdxTabs>

## Поведение

### Один или несколько вариантов

По умолчанию (`multiple={false}`) пользователь может выбрать только один вариант, аналогично компоненту [RadioGroup](##LIBS.LIB.STAND/lib:uikit/stand:components-radiogroup-stable). Если установить `multiple={true}`, можно выбирать несколько вариантов, как в [CheckboxGroup](##LIBS.LIB.STAND/lib:uikit/stand:components-checkboxgroup-stable).

<MdxTabs>

<ChoiceGroupExampleOne />

```tsx
<ChoiceGroup
  value={value}
  onChange={setValue}
  items={['один', 'два', 'три', 'четыре', 'пять', 'шесть']}
  getItemLabel={(item) => item}
  multiple={false}
  name="ChoiceGroupExampleOne"
/>
```

</MdxTabs>

<MdxTabs>

<ChoiceGroupExampleMultiple />

```tsx
<ChoiceGroup
  value={value}
  onChange={setValue}
  items={['один', 'два', 'три', 'четыре', 'пять', 'шесть']}
  getItemLabel={(item) => item}
  multiple
  name="ChoiceGroupExampleMultiple"
/>
```

</MdxTabs>

Для двух вариантов `ChoiceGroup` может использоваться вместо переключателя [Switch](##LIBS.LIB.STAND/lib:uikit/stand:components-switch-stable), если позволяет пространство интерфейса.

Примеры использования в качестве переключателя:

<ChoiceGroupExampleSwitchPolar />
<ChoiceGroupExampleSwitchLetters />
<ChoiceGroupExampleSwitchMode />

### Неактивные кнопки

Чтобы сделать отдельные кнопки неактивными, используйте функцию `getItemDisabled` или поле `disabled` в объекте элемента.

<MdxTabs>

<ChoiceGroupExampleSomeDisabled />

```tsx
<ChoiceGroup
  value={value}
  onChange={setValue}
  items={[
    { name: 'один' },
    { name: 'два' },
    { name: 'три', disabled: true },
    { name: 'четыре', disabled: true },
  ]}
  getItemLabel={(item) => item.name}
  multiple={false}
  name="ChoiceGroupExampleSomeDisabled"
  getItemDisabled={(item) => item.disabled}
/>
```

</MdxTabs>

Для отключения всей группы кнопок задайте свойство `disabled`.

<MdxTabs>

<ChoiceGroupExampleDisabled />

```tsx
<ChoiceGroup
  value={value}
  onChange={setValue}
  items={['один', 'два', 'три']}
  getItemLabel={(item) => item}
  multiple={false}
  name="ChoiceGroupExampleDisabled"
  disabled
/>
```

</MdxTabs>

## Адаптивность

Для адаптивности на мобильных устройствах или в узких контейнерах используйте свойство `truncate` для обрезки длинного текста (см. [Текст на кнопках](#текст-на-кнопках)). Также можно добавить горизонтальную прокрутку или преобразовать `ChoiceGroup` в [RadioGroup](##LIBS.LIB.STAND/lib:uikit/stand:components-radiogroup-stable) на определённых разрешениях экрана.

### Прокрутка

<MdxTabs>

<ChoiceGroupExampleAdaptiveScroll />

```tsx
<div className="ChoiceGroupExampleAdaptiveScroll">
  <ChoiceGroup
    name="ChoiceGroupExampleAdaptiveScroll"
    items={[
      'один',
      'два',
      'три',
      'четыре',
      'пять',
      'шесть',
      'семь',
      'восемь',
      'девять',
    ]}
    getItemLabel={(item) => item}
    form="round"
  />
</div>
```

</MdxTabs>

### Преобразование в RadioGroup

Если ширина экрана меньше 800 px, компонент отображается как `ChoiceGroup`, иначе — как `RadioGroup`.

<MdxTabs>

<ChoiceGroupExampleAdaptiveUseBreakpoints />

```tsx
const { desktop } = useBreakpoints({ map: { desktop: 800 }, isActive: true });
if (desktop) {
  return (
    <ChoiceGroup
      name="ChoiceGroupExampleAdaptiveUseBreakpoints"
      items={['один', 'два', 'три', 'четыре', 'пять']}
      getItemLabel={(item) => item}
      form="round"
      value={value}
      onChange={onChange}
    />
  );
}
return (
  <RadioGroup
    name="ChoiceGroupExampleAdaptiveUseBreakpoints"
    items={['один', 'два', 'три', 'четыре', 'пять']}
    getItemLabel={(item) => item}
    value={value}
    onChange={onChange}
  />
);
```

</MdxTabs>

## Пример использования

```tsx
import React, { useState } from 'react';
import { ChoiceGroup } from '@consta/uikit/ChoiceGroup';

type Item = string;

const items = ['один', 'два', 'три'];

export function App() {
  const [value, setValue] = useState<string | null>(items[0]);
  return (
    <ChoiceGroup
      value={value}
      onChange={setValue}
      items={items}
      getItemLabel={(item) => item}
    />
  );
}
```
