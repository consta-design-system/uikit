import { Meta } from '@storybook/addon-docs/blocks';
import { NewFontPictures } from './components/newFontPictures';

<Meta
  title="Документация|Дизайнерам/Переход на шрифт Inter"
  id="new-font"
  parameters={{ order: 307 }}
/>

# Переход на шрифт Inter

В библиотеках дизайн-системы и проектах, где библиотеки используются, запланирована замена шрифтов: Segoe UI на Inter.

> Скачать шрифт Inter можно [с официального сайта](https://rsms.me/inter/) или [Google Fonts](https://fonts.google.com/specimen/Inter?query=inter)  
> [Установите его](https://lifehacker.ru/kak-ustanovit-shrift-v-windows-i-macos) в систему перед началом работы

<br />

# Как все будет происходить

### 1. Обновите библиотеки Consta в Figma

Все библитеки Consta из Figma Community мы обновим самостятельно и сообщим об этом [в канале](https://t.me/consta_ui_releases). Вам лишь понадобится подтянуть обновления с новым шрифтом в свои файлы.
Обратите внимание на список ниже, скорее всего, вы используете эти библиотеки у себя в макетах. Их нужно будет обновить в первую очередь:

- [Consta Default Typography](https://www.figma.com/community/file/855746990421795518)
- [Consta UI-kit](https://www.figma.com/community/file/853774806786762374)
- [Consta Geo-kit](https://www.figma.com/community/file/1063113573061305628)
- [Consta Charts](https://www.figma.com/community/file/982611119114314434)

Остальные файлы в Community предназначены для просмотра, копирования или не используют типографику как экспортируемый ресурс. Их мы тоже обновим, но в Figma вы, скорее всего, не получите уведомлений.

> Этот шаг важен, поскольку позволит обновить часть текста средствами самой Figma и снять нагрузку на следующих шагах

### 2. Проверьте макеты

Проверьте макеты и убедитесь, что библиотечные компоненты обновились. Это важно для следующих шагов.
Если вы используете локальные компоненты без текстовых стилей из Consta Default Typography, обновление библиотек их не коснется. Эту проблему решаем дальше.

### 3. Замена шрифта там, где не подключены компоненты или стили библиотек

Для замены шрифта в остальных элементах и компонентах мы создали плагин [Consta font replacer](https://www.figma.com/community/plugin/1100808562040625391).

API Figma позволяет искать текстовые слои по всему файлу, внутри всех страниц. Мы предполагаем, что макетов в файле может быть много, что влияет на скорость обхода слоев в проекте вплоть до зависания редактора.
Поэтому решили сделать замену **постраничной**, а не во всем файле сразу. Это быстрее и позволяет лучше контролировать процесс замены.

> Плагин лучше запускать на десктопном клиенте, а не в браузере

Как пользоваться плагином?

**Шаг 1.** Установить Inter в систему, если его нет

**Шаг 2.** Установить плагин из Figma Community

**Шаг 3.** Открыть рабочий файл

**Шаг 4.** Зайти на первую страницу (Page), запустить плагин и набраться терпения (в зависимости от количества артбордов, плагин может работать до 5 минут, именно столько обрабатывалась страница с ~40 артбордами и 24000 текстовых слоев)

**Шаг 5.** Во время работы плагина лучше закрыть все программы, кроме Figma и ничего не трогать на артбордах

**Шаг 6.** Дождаться завершения работы плагина, рандомно прокликав текстовые слои

**Далее** Перейти на другую страницу и вызвать плагин заново. Для других файлов алгоритм такой же

<br />

# Известные проблемы

## Мертвое зависание компьютера/ноутбука

От такого не застрахован никто. Если проблема повторяется:

- перезапустите Figma и плагин
- разбейте макеты на одной странице на несколько страниц

## Поехали контейнеры с текстом

<NewFontPictures name="1-image" />

Мы в процессе поиска решения. Пока придется пройти все макеты руками:

- исправить значение на Auto width
- проверить позиционирование

> Сообщить о проблеме можно [в чате Consta](https://t.me/Consta_Chat)
